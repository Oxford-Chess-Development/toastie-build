{"version":3,"sources":["utils/cookies.ts","utils/requests.ts","css/components.module.css","css/profile.module.css","css/login.module.css","css/sidebar.module.css","utils/electron.ts","css/pairings.module.css","css/menu.module.css","css/app.module.css","utils/prototype.ts","css/tournament.module.css","components/EditableField.tsx","components/SinglePairing.tsx","components/index.ts","css/crosstable.module.css","css/statusbar.module.css","css/alert.module.css","assets/settings.ts","components/Grid.tsx","utils/regexes.ts","tournament/Login.tsx","tournament/Menu.tsx","components/Vectors.tsx","StatusBar.tsx","tournament/InfoBar.tsx","tournament/Pairings.tsx","components/Buttons.tsx","components/CollapsableSection.tsx","tournament/Sidebar.tsx","tournament/Profile.tsx","tournament/Settings.tsx","tournament/CrossTable.tsx","Tournament.tsx","tournament/Alert.tsx","App.tsx","serviceWorker.js","index.js"],"names":["windowCookies","universalCookies","errorCallback","cookies","isElectron","isProd","electronCookies","get","then","arr","reduce","acc","curr","name","value","catch","e","console","log","Promise","resolve","getAll","map","cookie","options","details","Object","assign","date","Date","now","url","expirationDate","setFullYear","getFullYear","set","error","remove","reject","server","isDev","config","prodServer","GET","method","axios","res","data","response","status","statusText","split","pop","join","POST","headers","FORM","preventDefault","persist","form","target","Array","from","type","Number","action","setErrorCallback","c","defaults","baseURL","interceptors","request","use","a","JSON","stringify","Authorization","module","exports","window","require","process","remote","win","session","getCurrentWindow","minimize","maximize","restore","close","isMaximized","webContents","capitalise","str","slice","toUpperCase","toLowerCase","calculateHypotenuse","base","height","Math","sqrt","pow","EditableField","props","useState","content","setContent","editContent","setEditContent","mustFocus","focus","inputField","useRef","divArea","decrement","button","constructor","parentNode","stepDown","increment","stepUp","handleAny","handleSubmit","handleInfinity","validateInput","onSubmitSuccess","firstChild","exitEditing","keyCode","generateForm","defaultValue","defaultEditContent","inputType","isNaN","valueOf","tzoffset","getTimezoneOffset","toISOString","toDatetimeLocal","interDate","setUTCHours","getUTCHours","getUTCMinutes","setUTCMinutes","roundUpDate","show","any","className","styles","onKeyDown","onSubmit","input","additionalStyles","required","ref","additionalInputProps","submit","infinity","submitHidden","cancel","onClick","useEffect","current","select","useMouseDown","contains","myID","random","toString","displayContent","toLocaleString","container","id","editableField","defaultContent","SinglePairing","undefined","valid","setValid","hover","setHover","handleChange","parentElement","validate","tournamentID","min","step","inputClassName","onChange","centre","tooltip","tabIndex","reset","neutral","entries","hidden","i","key","callback","addEventListener","removeEventListener","defaultSettings","general","tournamentId","locked","primaryKey","enum","convert","round","active","pairingSystem","lockOnInit","competitors","totalRounds","v","Infinity","nb","max","allow","ratingSystem","displayPoints","gamePointTotal","stats","nbPlayers","players","length","activePlayers","filter","p","matchesPlayed","played","gamesPlayed","histories","averageRating","sum","rating","createdAt","updatedAt","permissions","allowNewPlayers","allowSelfSubmissions","roundTimes","points","lossReward","drawReward","winReward","byeReward","performanceSystem","defaultUserSettings","username","location","language","Grid","header","body","crossTable","style","table","scope","th","cell","headerCell","handleHeaderClick","rowData","first","shift","rest","tr","j","UID","td","regexes","space","letters","image","href","email","Crown","appStyles","logo","classNames","loading","staticLogo","src","alt","crownOutline","loadingGif","Login","state","register","errorMessage","setState","sessionID","login","finally","canvas","column","setLoading","this","loginSection","messageBar","placeholder","forgottenContainer","forgotten","minLength","pattern","source","initialiseButton","loginBackground","flip","setTimeout","foreground","registerForeground","loginForeground","registerForm","loginForm","React","Component","Menu","tournamentDict","loadingOverride","lines","linesMounted","linesAdjusted","selected","hovered","setTournamentID","validateTournament","path","updateTournamentDict","endSession","createNewTournament","Error","removeID","logoRef","createRef","drawLines","startCoords","getElementCentre","document","getElementsByClassName","dot","opacity","push","renderLineBetween","values","elem","rect","getBoundingClientRect","x","left","right","y","top","bottom","start","end","width","diff","abs","sign","angle","atan","PI","line","backgroundColor","position","transform","transition","keys","side","navData","meta","dotDescription","descriptionSelected","description","radius","dotUnloaded","noSet","onMouseEnter","onMouseLeave","reverse","dotContainer","dotContainerLoaded","prevProps","prevState","setImmediate","leftColumn","handleNavData","rightColumn","Listing","updateTournamentSettings","closeListing","triggerConfirm","UserSettings","updateSetting","settings","create","roundRobin","load","back","border","refresh","listing","renderHeight","titles","title","displayName","profileStyles","row","clickButton","sidebar","profile","listWrapper","generateListing","k","def","editable","renderSettings","display","alignItems","justifyContent","Circle","lineHeight","borderRadius","cursor","StatusBar","minimise","toggleMaximisation","maximised","forceUpdate","statusBar","menu","favicon","draggable","exec","InfoBar","lastRound","lastRoundOverride","uri","titleBar","gridColumn","updateTournamentStatus","closeTournament","role","aria-label","triggerError","setLastRound","toggleCrossTable","Pairings","useMemo","reduceResults","useCallback","W","B","pairingData","setPairings","useReducer","Map","results","setResults","getPairings","pairings","w","b","playerDict","getDisplayName","player","firstName","lastName","score","pending","every","triggerNextRound","updatePlayerDict","updateRound","validateForm","resultWhite","resultBlack","validity","topBanner","pairingContainer","dict","black","wDisplay","bDisplay","result","pairing","playerInfo","bye","setDisplayPlayer","resultsBridge","setResult","inputResult","toggleSidebar","canTriggerNextRound","waitButton","finishButton","nextButton","generateNextButton","toggleSettings","Bottom","buttons","item","func","icon","SectionBreak","sectionContainer","sectionHeader","sectionHeaderText","CollapsableSection","expanded","internalExpanded","setExpanded","useInternalState","querySelectorAll","sectionListWrapper","h","list","firstElementChild","includes","children","sectionToggle","sectionList","Sidebar","linkedState","updatePlayerList","updatePlayerState","sort","checkIfEnoughPlayers","editToDisplay","child","parent","dom","cloneNode","render","generateActivePlayer","replaceWith","editEscape","editPlayer","playerLine","find","innerHTML","activatePlayer","params","updatePlayer","clearPlayer","clearPlayerList","handlePaste","text","clipboardData","getData","trim","CSV","parse","delimitersToGuess","dynamicTyping","fastMode","requireLastName","TypeError","r","all","playerInactive","edit","activate","prevPropsPlayerDict","prevPropsPlayerDictKey","modifyPlayerDict","scoreSection","newPlayer","inputs","refs","childNodes","onPaste","section","size","some","triggerReload","playerDictKey","currDict","prevDict","wideLeft","generateActivePlayerList","generateNewForms","playersSection","Profile","playerID","refetch","updatePlayerFromProps","Name","getNameFromPlayer","Status","Rating","performanceRating","Playing","isPlaying","total","totalGames","scores","Score","gamePoints","expectedScore","toFixed","expectedGameScore","history","renderEntry","minPlayer","colour","resultsRow","Settings","sectionExpando","handleToggle","index","indexOf","setIndex","message","modifyHeightValues","watchProps","renderRound","roundRow","rounds","updateRounds","semiPresent","endsWith","CrossTable","sortValue","byRounds","startsWith","calcLength","prettyScore","winPercentage","ratingDifference","expectedDifference","resultsCell","match","oppRating","rows","isPlayer","isScore","playerBox","firstColumn","bodyByRounds","bodyByRobin","closeButton","bodyClassNames","wide","defaultColumns","dispatchEvent","eventName","event","createEvent","initEvent","Tournament","columns","setColumns","resize","setResize","boundaries","displayPlayer","setDisplayPlayerRaw","setCrossTable","nextRound","toggleNextRound","reduceSidebar","_columns","reduceSettings","reload","showSettings","setPlayerDictKey","reducePlayerDict","delete","hash","setStatus","setSettings","setRounds","setPlayers","setPlayerDict","mouseClick","setMouseClick","handleMouseMove","percentX","innerWidth","prev","findIndex","MouseEvents","tournament","gridTemplateColumns","Alert","alertBox","textBox","confirm","NO","YES","App","mode","closeAlertBox","hasLoggedIn","backgroundImage","Boolean","hostname","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1800ea88.chunk.js","sourcesContent":["import universalCookies, { Cookie, CookieSetOptions } from 'universal-cookie';\nimport { isElectron, electronCookies, isProd } from './electron';\nimport { CookiesSetDetails } from 'electron';\nimport { server as url } from './requests';\nimport { StringDictionary } from '../interfaces';\n\nconst windowCookies = new universalCookies();\n\nexport default class Cookies {\n\n\tgetAll(): Promise<StringDictionary> {\n\t\tif (isElectron || isProd) {\n\t\t\treturn (electronCookies.get({}) as Promise<Electron.Cookie[]>)\n\t\t\t\t.then((arr: Cookie[]) => arr.reduce((acc: StringDictionary, curr: Cookie) => {\n\t\t\t\t\tacc[curr.name] = curr.value;\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {}))\n\t\t\t\t.catch((e: Error) => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t\treturn {};\n\t\t\t\t});\n\t\t} else return Promise.resolve(windowCookies.getAll() || {});\n\t}\n\n\tget(name: string): Promise<string> {\n\t\tif (isElectron || isProd) {\n\t\t\treturn (electronCookies.get({ name }) as Promise<Electron.Cookie[]>)\n\t\t\t\t.then((arr: Cookie[]) => arr.map(cookie => cookie.value))\n\t\t\t\t.then((arr: Cookie[]) => arr[0] || '')\n\t\t\t\t.catch((e: Error) => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t\treturn '';\n\t\t\t\t});\n\t\t} else return Promise.resolve(windowCookies.get(name) || '');\n\t}\n\n\tset(name: string, value: any, options: CookieSetOptions = {}): Promise<void> {\n\t\tlet details = Object.assign({}, options) as CookiesSetDetails;\n\t\tif (isElectron || isProd) {\n\t\t\tlet date = new Date(Date.now());\t\n\t\t\tdetails = Object.assign(details, {\n\t\t\t\tname,\n\t\t\t\tvalue,\n\t\t\t\turl,\n\t\t\t\texpirationDate: date.setFullYear(date.getFullYear() + 1)\n\t\t\t});\n\t\t\treturn electronCookies.set(details)\n\t\t\t\t.then(() => electronCookies.get({}))\n\t\t\t\t.then((arr: Cookie[]) => arr.map(cookie => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: cookie.name,\n\t\t\t\t\t\tvalue: cookie.value\n\t\t\t\t\t};\n\t\t\t\t}))\n\t\t\t\t.catch(console.error);\n\t\t} else {\n\t\t\treturn Promise.resolve(windowCookies.set(name, value, options));\n\t\t}\n\t}\n\n\tremove(name: string, options: CookieSetOptions = {}): Promise<void> {\n\t\tif (isElectron || isProd) {\n\t\t\treturn electronCookies.remove(url, name);\t\t\t\n\t\t} else {\n\t\t\tif (windowCookies.get(name)) {\n\t\t\t\treturn Promise.resolve(windowCookies.remove(name, options));\n\t\t\t} else {\n\t\t\t\treturn Promise.reject('Couldn\\'t remove cookie');\n\t\t\t}\n\t\t}\n\t}\n}","import axios, { AxiosRequestConfig, AxiosResponse, AxiosError } from 'axios';\nimport config from '../config.json';\nimport { isDev } from './electron';\nimport { AnyDictionary } from '../interfaces.js';\nimport Cookies from './cookies';\n\nlet errorCallback: (message: string) => void = () => {};\n\nexport let cookies = new Cookies();\n\nexport const server = !isDev ? config.prodServer : config.server;\n\naxios.defaults.baseURL = server;\n\n// alter all requests to use cookies only from AsyncStorageCookieStore\naxios.interceptors.request.use(async config => {\n\t\n\t// the device will have it's own cookie store, and attempt to\n\t// send cookies itself.\n\t// this has been documented to be unreliable, so we wipe these cookies\n\t// and implement the cookie store ourselves.\n\n\t//await AsyncStorage.clear()\n\treturn {\n\t\t...config,\n\t\theaders: {\n\t\t\t...config.headers,\n\t\t\tAuthorization: JSON.stringify(await cookies.getAll())\n\t\t}\n\t};\n\n});\n\nexport function GET(options: AxiosRequestConfig): Promise<any> {\n\toptions = Object.assign(options, {\n\t\tmethod: 'GET'\n\t});\n\treturn axios(options)\n\t\t.then((res: AxiosResponse<any>) => res.data)\n\t\t.catch((e: AxiosError) => {\n\t\t\tconsole.error(e);\n\t\t\tif (e.response) errorCallback([e.response.status, e.response.statusText, ':', '/' + e.response.config.url.split('/').pop()].join(' '));\n\t\t\tthrow e;\n\t\t});\n}\n\nexport function POST(options: AxiosRequestConfig): Promise<any> {\n\toptions = Object.assign(options, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t}\n\t});\n\treturn axios(options)\n\t\t.then((res: AxiosResponse<any>) => res.data)\n\t\t.catch((e) => {\n\t\t\tif (e && e.response && e.response.data) errorCallback(e.response.data);\n\t\t\tthrow e;\n\t\t});\n}\n\nexport function FORM(e: React.FormEvent<HTMLFormElement>): Promise<any> {\n\te.preventDefault();\n\te.persist();\n\tlet form = e.target as HTMLFormElement;\n\tlet inputs = Array.from(form) as HTMLInputElement[];\n\tlet data = inputs.reduce((acc, curr) => {\n\t\tif (!curr.name) return acc;\n\t\tif (curr.name === 'submit') return acc;\n\t\tif (curr.type === 'number') acc[curr.name] = Number(curr.value);\n\t\telse acc[curr.name] = curr.value;\n\t\treturn acc;\n\t}, {} as AnyDictionary);\n\tlet options = {\n\t\tdata,\n\t\turl: form.action\n\t} as AxiosRequestConfig;\n\treturn POST(options);\n}\n\nexport function setErrorCallback(c: (message: string) => void) {\n\terrorCallback = c;\n}\n\n/*\n\nclass Requests {\n\n\tGET(options: AxiosRequestConfig): Promise<any> {\n\t\toptions = Object.assign(options, {\n\t\t\tmethod: 'GET'\n\t\t});\n\t\treturn axios(options)\n\t\t\t.then((res: AxiosResponse<any>) => res.data);\n\t}\n\n\tPOST(options: AxiosRequestConfig): Promise<any> {\n\t\toptions = Object.assign(options, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t});\n\t\treturn axios(options)\n\t\t\t.then((res: AxiosResponse<any>) => res.data);\n\t}\n\n\tFORM(e: React.FormEvent<HTMLFormElement>): Promise<any> {\n\t\te.preventDefault();\n\t\tlet form = e.target as HTMLFormElement;\n\t\tlet inputs = Array.from(form) as HTMLInputElement[];\n\t\tlet data = inputs.reduce((acc, curr) => {\n\t\t\tif (!curr.name) return acc;\n\t\t\tif (curr.name === 'submit') return acc;\n\t\t\tacc[curr.name] = curr.value;\n\t\t\treturn acc;\n\t\t}, {} as AnyDictionary);\n\t\tlet options = {\n\t\t\tdata,\n\t\t\turl: form.action\n\t\t} as AxiosRequestConfig;\n\t\treturn this.POST(options);\n\t}\n\n}\n\nlet r = new Requests();\nexport const GET = r.GET;\nexport const POST = r.POST;\nexport const FORM = r.FORM;\n\n*/","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"components_container__1CCB7\",\"editableField\":\"components_editableField__2fs18\",\"form\":\"components_form__1RjIP\",\"input\":\"components_input__I_Vv7\",\"submitHidden\":\"components_submitHidden__PvrYt\",\"any\":\"components_any__3pCEP\",\"submit\":\"components_submit__1SFYQ\",\"increment\":\"components_increment__19rbD\",\"cancel\":\"components_cancel__1_2ia\",\"infinity\":\"components_infinity__1rF3u\",\"resolve\":\"components_resolve__1X_KN\",\"reject\":\"components_reject__3ymMO\",\"neutral\":\"components_neutral__392Xn\",\"flash-green\":\"components_flash-green__2Wczz\",\"centre\":\"components_centre__2BcEl\",\"tooltip\":\"components_tooltip__1IKxP\",\"sectionContainer\":\"components_sectionContainer__1tg1I\",\"sectionHeader\":\"components_sectionHeader__-UWwY\",\"sectionHeaderText\":\"components_sectionHeaderText__1OTig\",\"sectionListWrapper\":\"components_sectionListWrapper__a03uW\",\"sectionList\":\"components_sectionList__117sb\",\"expanded\":\"components_expanded__3qOxR\",\"sectionToggle\":\"components_sectionToggle__2z6Il\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"profile_sidebar__C1jtg\",\"slide-in-from-right\":\"profile_slide-in-from-right__2jdIT\",\"profile\":\"profile_profile__1V8qL\",\"roundRow\":\"profile_roundRow__3OA2r\",\"row\":\"profile_row__aUfgI\",\"resultsRow\":\"profile_resultsRow__4zleX\",\"editable\":\"profile_editable__24Eas\",\"editableField\":\"profile_editableField__2onPe\",\"input\":\"profile_input__2tu2X\",\"sectionContainer\":\"profile_sectionContainer__Tm0AF\",\"sectionHeader\":\"profile_sectionHeader__UZUfT\",\"sectionHeaderText\":\"profile_sectionHeaderText__XE7UN\",\"sectionListWrapper\":\"profile_sectionListWrapper__1K1-l\",\"sectionList\":\"profile_sectionList__3bJ8Z\",\"expanded\":\"profile_expanded__3QtaO\",\"sectionToggle\":\"profile_sectionToggle__2qBPk\",\"semiPresent\":\"profile_semiPresent__1APEU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"column\":\"login_column__14Kgt\",\"initialiseButton\":\"login_initialiseButton__3CXrs\",\"forgottenContainer\":\"login_forgottenContainer__2yR4y\",\"forgotten\":\"login_forgotten__3VFQz\",\"form\":\"login_form__1ieaR\",\"input\":\"login_input__3ze1R\",\"submit\":\"login_submit__2qxJT\",\"loginSection\":\"login_loginSection__1BBMn\",\"loginBackground\":\"login_loginBackground__y9UZ2\",\"foreground\":\"login_foreground__2Cqo8\",\"loginForeground\":\"login_loginForeground__lnGgY\",\"registerForeground\":\"login_registerForeground__3D6jX\",\"flip\":\"login_flip__2KG2q\",\"messageBar\":\"login_messageBar__6TM4O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"sidebar_sidebar__3Z89I\",\"slide-in-from-left\":\"sidebar_slide-in-from-left__3kaGk\",\"playersSection\":\"sidebar_playersSection__3_kKf\",\"scoreSection\":\"sidebar_scoreSection__2Qh1c\",\"addPlayerForm\":\"sidebar_addPlayerForm__1BL-S\",\"input\":\"sidebar_input__3Y8ld\",\"submit\":\"sidebar_submit__22Uk4\",\"edit\":\"sidebar_edit__zaTlg\",\"cancel\":\"sidebar_cancel__1DhJL\",\"activate\":\"sidebar_activate__2-tDL\",\"playerInfo\":\"sidebar_playerInfo__12dBq\",\"playerLine\":\"sidebar_playerLine__1cnKs\",\"scoreSeparator\":\"sidebar_scoreSeparator__1zbAQ\",\"sectionHeader\":\"sidebar_sectionHeader__2UjkE\",\"playerInactive\":\"sidebar_playerInactive__1Y9Kw\",\"topBanner\":\"sidebar_topBanner__3fw_E\",\"bottomBanner\":\"sidebar_bottomBanner__ZFfBX\"};","export const isElectron = typeof window.require === 'function'; //detect !in-browser\nexport const isDev = process.env.NODE_ENV === 'development'; //detects a react dev build\nexport const isProd = typeof window.require === 'function' && !window.require('electron-is-dev'); //detect an electron prod build\n\n// export const renderedArguments = !window.process.argv.includes('--production');\n/**\n * \t\t\t\t|\t\tisDev\t\t\t\t\t\t|\t\t\t\t\t!isDev\t\n * _________________________________________________________________________________________________\n * !isElectron\t|\t\tyarn start (in-browser)\t\t|\t\tyarn deploy (gh-pages build)\n *  isElectron\t|\t\tyarn gui (linked electron)\t|\t\tyarn gui-prod (headless electron build)\n * \n * isProd: yarn exe (OS-specific executable)\n */\n\nexport const remote = isElectron ? window.require('electron').remote : null;\nexport const session = isElectron ? remote.session : null;\n\nexport const win = (isElectron ? remote.getCurrentWindow() : {\n\tminimize: () => {},\n\tmaximize: () => {},\n\trestore: () => {},\n\tclose: () => {},\n\tisMaximized: () => true\t\t\n}) as any;\n\nexport const electronCookies = isElectron ? win.webContents.session.cookies : null;\n\nconsole.log('isDev', isDev);\nconsole.log('isElectron', isElectron);\nconsole.log('isProd', isProd);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pairings\":\"pairings_pairings__2Z6gd\",\"pairingContainer\":\"pairings_pairingContainer__2snrJ\",\"pairing\":\"pairings_pairing__jh3eo\",\"fade-in\":\"pairings_fade-in__3Iydy\",\"topBanner\":\"pairings_topBanner__duKX4\",\"playerInfo\":\"pairings_playerInfo__2BGOf\",\"resultsBridge\":\"pairings_resultsBridge__1P3NX\",\"statusBar\":\"pairings_statusBar__Y2g9v\",\"slide-in-from-bottom\":\"pairings_slide-in-from-bottom__1tu-V\",\"waitButton\":\"pairings_waitButton__3CIsd\",\"nextButton\":\"pairings_nextButton__1fjha\",\"inputResult\":\"pairings_inputResult__8kpK5\",\"setResult\":\"pairings_setResult__3mSXp\",\"neutral\":\"pairings_neutral__2WWsU\",\"bye\":\"pairings_bye__2Q8Qe\",\"submit\":\"pairings_submit__258vX\",\"errorMessage\":\"pairings_errorMessage__1qM9W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"leftColumn\":\"menu_leftColumn__13Ey0\",\"rightColumn\":\"menu_rightColumn__2D55A\",\"line\":\"menu_line__2oByf\",\"row\":\"menu_row__q-PZk\",\"listWrapper\":\"menu_listWrapper__1_77c\",\"clickButton\":\"menu_clickButton__1F_HI\",\"dotContainer\":\"menu_dotContainer__ze3l6\",\"dotDescription\":\"menu_dotDescription__19QYi\",\"dot\":\"menu_dot__3Dq9b\",\"dotContainerLoaded\":\"menu_dotContainerLoaded__3YmWC\",\"descriptionSelected\":\"menu_descriptionSelected__2aKX-\",\"close\":\"menu_close__3eKoV\",\"logo\":\"menu_logo__3MwZ9\",\"float-down\":\"menu_float-down__1GhiB\",\"dotUnloaded\":\"menu_dotUnloaded__2DT-h\",\"expand\":\"menu_expand__1E6M-\",\"briefly-expand\":\"menu_briefly-expand__ex-pm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"app_canvas__1MLEL\",\"column\":\"app_column__2WVoo\",\"logo\":\"app_logo__b6W_t\",\"loadingLine\":\"app_loadingLine__1xeSs\",\"staticLogo\":\"app_staticLogo__1-Wsi\",\"loadingGif\":\"app_loadingGif__2PnUi\",\"crownOutline\":\"app_crownOutline__2IPSS\",\"fade-in\":\"app_fade-in__3kaKs\",\"grow-right\":\"app_grow-right__1NUcX\"};","export function capitalise(str: string): string {\n\tif (!str) return str;\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1).toLowerCase();\n}\n\nexport function delay(ms: number): Promise<void> {\n\treturn new Promise((res) => {\n\t\tsetTimeout(res, ms);\n\t});\n}\n\nexport function calculateHypotenuse(base: number, height: number): number {\n\treturn Math.sqrt(Math.pow(base, 2) + Math.pow(height, 2));\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tournament\":\"tournament_tournament__1ikhA\",\"titleBar\":\"tournament_titleBar__1Kvez\",\"slide-in-from-top\":\"tournament_slide-in-from-top__22vmU\",\"row\":\"tournament_row__3K-Kn\",\"header\":\"tournament_header__hB1Cf\",\"container\":\"tournament_container__DVAFe\",\"form\":\"tournament_form__1Pn88\",\"input\":\"tournament_input__xb1Th\",\"editableField\":\"tournament_editableField__1rO3U\"};","import React, { useEffect, useState, useRef, ReactElement } from 'react';\nimport { useMouseDown } from '.';\nimport { FORM } from '../utils/requests';\nimport styles from '../css/components.module.css';\nimport { AiOutlineClose, AiOutlineDown, AiOutlineUp, AiOutlineCheck } from 'react-icons/ai';\n\ninterface EditableFieldProps {\n\tcontent: string\n\tdefaultEditContent?: string\n\tdefaultContent?: string\n\tinputType?: 'button' | 'checkbox' | 'color' | 'date' | 'datetime-local' | 'email' | 'file' | 'hidden' | 'image' | 'month' | 'number' | 'password' | 'radio' | 'range' | 'reset' | 'search' | 'submit' | 'tel' | 'text' | 'time' | 'url' | 'week',\n\n\turl: string, //url.resolve(server, ['tournament', props.id, 'editTournamentName'].join('/'))\n\thandleSubmit: (k: string, v: any) => Promise<void>\n\tonSubmitSuccess: (e: React.FormEvent<HTMLFormElement>) => React.FormEvent<HTMLFormElement>\n\tvalidateInput?: (form: HTMLFormElement) => Promise<void>\n\tadditionalStyles: {[key: string]: string}\n\tadditionalInputProps: {[key: string]: any}\n\tname?: string\n\tshow?: {\n\t\tsubmit?: boolean\n\t\tinfinity?: boolean\n\t\tincrement?: boolean\n\t\tany?: boolean\n\t}\n}\n\nfunction roundUpDate(date: Date): Date {\n\tlet interDate = new Date(date.setUTCHours(date.getUTCHours() + 1));\n\tlet nextDate: Date;\n\tif (interDate.getUTCMinutes() < 30) nextDate = new Date(interDate.setUTCMinutes(30));\n\telse nextDate = new Date(new Date(interDate.setUTCMinutes(0)).setUTCHours(interDate.getUTCHours() + 1));\n\treturn nextDate;\n}\n\nfunction toTimeDate(date: Date): string {\n\tif (isNaN(date.valueOf())) return '';\n\treturn date.toLocaleString('en-GB').slice(0, -3);\n\t//return date.toTimeString().slice(0, 8) + ' ' + date.toDateString().slice(0, 10);\n}\n\nfunction toDatetimeLocal(date: Date) {\n\tif (isNaN(date.valueOf())) return '';\n\tlet tzoffset = date.getTimezoneOffset() * 60000; //offset in milliseconds\n\tlet localDate = new Date(date.valueOf() - tzoffset); \n\treturn localDate.toISOString().slice(0, 16);\n}\n\nexport default function EditableField (props: EditableFieldProps): ReactElement {\n\t\n    const [content, setContent] = useState(props.content);\n    const [editContent, setEditContent] = useState(false);\n    const [mustFocus, focus] = useState(false);\n    const inputField = useRef(null as HTMLInputElement);\n    const divArea = useRef(null as HTMLDivElement);\t\n\n    const decrement = (e: React.MouseEvent<HTMLButtonElement>): void => {\n        e.preventDefault();\n        let button = e.target as HTMLButtonElement;\n        if (button.constructor.name !== 'HTMLButtonElement') return;\n        let form = button.parentNode as HTMLFormElement;\n        let input = form[props.name || 'name'] as HTMLInputElement;\n        input.stepDown();\n    }\n    \n    const increment = (e: React.MouseEvent<HTMLButtonElement>): void => {\n        e.preventDefault();\n        let button = e.target as HTMLButtonElement;\n        if (button.constructor.name !== 'HTMLButtonElement') return;\n        let form = button.parentNode as HTMLFormElement;\n        let input = form[props.name || 'name'] as HTMLInputElement;\n        input.stepUp();\n    }\n\n\tconst handleAny = (e: React.MouseEvent<HTMLButtonElement>): Promise<void> => {\n        e.preventDefault();\n\t\treturn props.handleSubmit(props.name || 'name', 0)\n\t\t\t.then(() => {\n                setEditContent(false);\n                setContent('0');\n            });\n\t}\n\n\tconst handleInfinity = (e: React.MouseEvent<HTMLButtonElement>): Promise<void> => {\n        e.preventDefault();\n\t\treturn props.handleSubmit(props.name || 'name', 'Infinity')\n\t\t\t.then(() => {\n                setEditContent(false);\n                setContent('∞');\n            });\n\t}\n\n\tconst handleSubmit = (e: React.FormEvent<HTMLFormElement>): Promise<void> => {\n        e.preventDefault();\n\t\treturn FORM(e)\n\t\t\t.then(async () => {\n\t\t\t\tlet form = e.target as HTMLFormElement;\n\t\t\t\tif (props.validateInput) await props.validateInput(form);\t\t\t\t\t\t\n\t\t\t})\n\t\t\t.then(() => {\n                setEditContent(false);\n\t\t\t\treturn e;\n\t\t\t})\n\t\t\t.then(props.onSubmitSuccess)\n\t\t\t.then((e) => {\n\t\t\t\tlet form = e.target as HTMLFormElement;\n\t\t\t\tlet input = form.firstChild as HTMLInputElement;\n                let content = input.value;\n                setContent(content);\n\t\t\t});\n    }\n    \n\tconst exitEditing = (e: React.KeyboardEvent<HTMLFormElement>): React.KeyboardEvent<HTMLFormElement> => {\n\t\tconst ESCAPE_KEY = 27;\n\t\tif (e.keyCode !== ESCAPE_KEY) return e;\n\t\tsetEditContent(false);\n\t\treturn e;\n\t}\n\n\tconst generateForm = (name: string): JSX.Element => {\n\t\tlet defaultValue = name || props.defaultEditContent;\n\t\tif (props.inputType === 'datetime-local') defaultValue = toDatetimeLocal(roundUpDate(new Date(defaultValue)));\n\t\telse if (props.show?.any && defaultValue === '0') defaultValue = '';\n\t\treturn (\n\t\t\t<form\n\t\t\t\tclassName={styles.form}\n\t\t\t\ttarget='_self'\n\t\t\t\tonKeyDown={exitEditing}\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\tmethod='POST'\n\t\t\t\taction={props.url}\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\ttype={props.inputType}\n\t\t\t\t\tclassName={[styles.input, props.additionalStyles.input].join(' ')}\n\t\t\t\t\tname={props.name || 'name'}\n\t\t\t\t\tdefaultValue={defaultValue || '\\u200b'}\n\t\t\t\t\trequired\n\t\t\t\t\tref={inputField}\n\t\t\t\t\t{...props.additionalInputProps}\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\tvalue='✗'\n\t\t\t\t\tclassName={[props.show?.submit && !props.show?.infinity && !props.show?.any ? '' : styles.submitHidden, styles.cancel].join(' ')}\n\t\t\t\t\tonClick={() => setEditContent(false)}\n\t\t\t\t>\n                    <AiOutlineClose />\n                </button>\n\t\t\t\t<button\n\t\t\t\t\tclassName={[!props.show?.any ? styles.submitHidden : '', styles.any].join(' ')}\n\t\t\t\t\tonClick={handleAny}\n\t\t\t\t>Any</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName={[!props.show?.infinity ? styles.submitHidden : '', styles.infinity].join(' ')}\n\t\t\t\t\tonClick={handleInfinity}\n\t\t\t\t>∞</button>\n\t\t\t\t<button\n\t\t\t\t\ttype='button'\n\t\t\t\t\tvalue='▼'\n\t\t\t\t\tclassName={[!props.show?.increment ? styles.submitHidden : '', styles.increment].join(' ')}\n\t\t\t\t\tonClick={decrement}\n\t\t\t\t>\n                    <AiOutlineDown />\n                </button>\n\t\t\t\t<button\n\t\t\t\t\tclassName={[!props.show?.increment ? styles.submitHidden : '', styles.increment].join(' ')}\n\t\t\t\t\tonClick={increment}\n                    >\n                    <AiOutlineUp />\n                </button>\n\t\t\t\t<button\n\t\t\t\t\ttype='submit'\n\t\t\t\t\tvalue='✔'\n                    className={[!props.show?.submit ? styles.submitHidden : '', styles.submit].join(' ')}\n                >\n                    <AiOutlineCheck />\n                </button>\n\t\t\t</form>\n\t\t);\n    }\n    \n    useEffect(() => {\n        setContent(props.content);\n    }, [props.content]);\n    useEffect(() => {\n        if (!mustFocus) return;\n        let form = inputField.current;\n        if (form) form.select();\n    }, [mustFocus]);\n    useMouseDown((e) => {\n\t\tif (divArea.current && divArea.current.contains(e.target as Node)) return;\n        setEditContent(false);\n    });\n\n\tconst myID = Math.random().toString(16).slice(2, 9);\n\t\n\tlet displayContent = content;\n\tif (displayContent && props.inputType === 'datetime-local') displayContent = toTimeDate(new Date(content));\n\telse if (props.show?.any && displayContent === '0') displayContent = 'Any';\n\n    return (\n        <div\n            ref={divArea}\n            className={[styles.container, props.additionalStyles.container].join(' ')}\n            id={myID}\n        >\n            {editContent ?\n                generateForm(content) :\n                <div\n                    className={[styles.editableField, props.additionalStyles.editableField || ''].join(' ')}\n                    onClick={() => {\n                        setEditContent(true);\n                        focus(true);\n                    }}\n                >\n                    {editContent ? \n                        generateForm(content) :\n                        displayContent || props.defaultContent || '\\u200b'\n                    }\n                </div>\n            }\n        </div>\n    );\n\n}","import React, { useState } from 'react';\nimport url from 'url';\nimport { FORM, server } from '../utils/requests';\nimport { AnyDictionary } from '../interfaces';\n\nimport styles from '../css/components.module.css';\nimport { AiOutlineCheck, AiOutlineClose, AiOutlineMinus } from 'react-icons/ai';\n\ninterface SinglePairingProps {\n\ttournamentID: string\n\tclassName: any\n\tinputClassName: any\n\thidden: AnyDictionary\n\tvalidate: (form: HTMLFormElement) => boolean | string | void\n\thandleSubmit: (e: React.FormEvent<HTMLFormElement>) => Promise<React.FormEvent<HTMLFormElement>>\n}\n\nexport default function SinglePairing(props: SinglePairingProps) {\n\n    const [valid, setValid] = useState(undefined as boolean | undefined);\n    const [hover, setHover] = useState('');\n\n    const handleChange = (e: React.FormEvent<HTMLInputElement>) => {\n\t\tlet input = e.target as HTMLInputElement;\n        let form = input.parentElement as HTMLFormElement;\n        let valid = props.validate(form);\n        if (typeof valid === 'string') setHover(valid);\n        else setHover('');\n        if (typeof valid === 'boolean') setValid(valid);\n        else if (typeof valid === 'string') setValid(false);\n\t\telse setValid(undefined);\n    }\n\n    const clear = (e: React.FormEvent<HTMLButtonElement>) => {\n        e.preventDefault();\n\t\tlet input = e.target as HTMLButtonElement;\n        let div = input.parentElement as HTMLDivElement;\n        let form = div.parentElement as HTMLFormElement\n        form.reset();\n        setHover('');\n        setValid(undefined);\n    }\n    \n    return <form\n        className={props.className}\n        target='_self'\n        onSubmit={(e) => {\n            e.persist();\n            if (!props.validate(e.target as HTMLFormElement)) return e.preventDefault();\n            FORM(e).then(props.handleSubmit);\n        }}\n        method='POST'\n        action={url.resolve(server, ['tournament', props.tournamentID, 'addResult'].join('/'))}\n    >\n        <input type='number' min={0} step={0.5} name='resultWhite' required className={props.inputClassName} onChange={handleChange}/>\n        <div className={styles.centre}>\n            {hover ? <span className={styles.tooltip}>{hover}</span> : null}\n            {valid ?\n                <button tabIndex={-1} className={styles.resolve}>\n                    <AiOutlineCheck />\n                </button> :\n                valid === false ?\n                    <button tabIndex={-1} className={styles.reject} onClick={clear}>\n                        <AiOutlineClose />\n                    </button> :\n                    <div className={styles.neutral}>\n                        <AiOutlineMinus />\n                    </div>\n            }\n        </div>\n        <input type='number' min={0} step={0.5} name='resultBlack' required className={props.inputClassName} onChange={handleChange}/>\n        {Object.entries(props.hidden).map(([name, value], i) => {\n            return <input key={['hiddenInput', i].join('.')} type='hidden' name={name} value={value} required />;\n        })}\t\t\n    </form>;\n}","import { useEffect } from 'react';\n\nimport EditableField from './EditableField';\nimport Grid from './Grid';\nimport SinglePairing from './SinglePairing';\n\nexport { EditableField, Grid, SinglePairing };\n\nexport const useMouseDown = (callback: (e: MouseEvent) => any) => {\n\tuseEffect(() => {\n\t    window.addEventListener('mousedown', callback);\n\t    return () => window.removeEventListener('mousedown', callback);\n\t}, [callback]);\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"crossTable\":\"crosstable_crossTable__3tCtZ\",\"titles\":\"crosstable_titles__2lOQ_\",\"table\":\"crosstable_table__FafeF\",\"td\":\"crosstable_td__1hxGz\",\"th\":\"crosstable_th__Gp7TR\",\"cell\":\"crosstable_cell__1NDzK\",\"playerBox\":\"crosstable_playerBox__ImPf9\",\"resultsCell\":\"crosstable_resultsCell__3g4mX\",\"headerCell\":\"crosstable_headerCell__2zS_u\",\"firstColumn\":\"crosstable_firstColumn__2m7R_\",\"closeButton\":\"crosstable_closeButton__2pu_0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statusBar\":\"statusbar_statusBar__3f7HO\",\"favicon\":\"statusbar_favicon__1Unmh\",\"menu\":\"statusbar_menu__3nFvT\",\"title\":\"statusbar_title__3ClL5\",\"exec\":\"statusbar_exec__2fXB2\",\"close\":\"statusbar_close__3ssky\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alertBox\":\"alert_alertBox__-kpK4\",\"error\":\"alert_error__wKYnQ\",\"textBox\":\"alert_textBox__ATagI\",\"response\":\"alert_response__1RX0q\",\"NO\":\"alert_NO__2Bl9f\",\"YES\":\"alert_YES__pKi26\"};","import { capitalise } from '../utils/prototype';\nimport { TournamentStatus, Player, TournamentSettings } from '../interfaces';\n\nexport interface TournamentSetting {\n\tname?: string\n\tenum?: string[]\n\tconvert?: (v: any) => string\n\tvalue?: (status: any, players: Player[]) => any\n\ttype?: string\n\tlocked?: boolean,\n\tlockOnInit?: boolean\n\tshow?: {\n        [key in keyof TournamentSettings]?: any\n    }\n\tallow?: {\n\t\tinfinity?: boolean\n\t\tany?: boolean\n\t\tsubmit?: boolean\n\t\tincrement?: boolean\n\t}\n\tnb?: {\n\t\tmin?: number\n\t\tmax?: number\n\t\tstep?: number\n\t}\n\n\tprimaryKey?: boolean\n\tdefaultValue?: any\n}\n\nexport const defaultSettings = {\n\tgeneral: {\n\t\ttournamentId: {\n\t\t\tname: 'Unique ID',\n\t\t\ttype: 'string',\n\t\t\tlocked: true,\n\t\t\tprimaryKey: true\n\t\t},\n\t\tstatus: {\n\t\t\tname: 'Status',\n\t\t\tenum: ['uninitialised', 'active', 'finished'],\n\t\t\tconvert: capitalise,\n\t\t\tdefaultValue: 'uninitialised',\n\t\t\tvalue: (status: TournamentStatus): string => {\n\t\t\t\tif (!status.round) return 'uninitialised';\n\t\t\t\tif (status.active === false) return 'finished';\n\t\t\t\telse return 'active';\n\t\t\t}\n\t\t},\n\t\tpairingSystem: {\n\t\t\tname: 'Pairing system',\n\t\t\tenum: ['swiss'],\n\t\t\tconvert: capitalise,\n\t\t\tlockOnInit: true,\n\t\t\tdefaultValue: 'swiss'\n\t\t},\n\t\tcompetitors: {\n\t\t\tname: 'Tournament type',\n\t\t\tenum: ['individual', 'team'],\n\t\t\tconvert: capitalise,\n\t\t\tlockOnInit: true,\n\t\t\tdefaultValue: 'individual'\n\t\t},\n\t\ttotalRounds: {\n\t\t\tname: 'Total rounds',\n\t\t\tconvert: (v: number | 'Infinity') => v === 'Infinity' ? '∞' : v.toString(),\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: Infinity,\n\t\t\tnb: {\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 100\n\t\t\t},\n\t\t\tallow: {\n\t\t\t\tinfinity: true\n\t\t\t}\n\t\t},\n\t\tratingSystem: {\n\t\t\tname: 'Rating system',\n\t\t\tenum: ['ECF', 'FIDE', 'USCF'],\n\t\t\tlockOnInit: true,\n\t\t\tdefaultValue: 'FIDE'\n\t\t},\n\t\tdisplayPoints: {\n\t\t\tname: 'Show',\n\t\t\tconvert: (v: 'match' | 'game') => capitalise(v) + ' Points',\n\t\t\tenum: ['match', 'game'],\n\t\t\tdefaultValue: 'match'\n\t\t},\n\t\tgamePointTotal: {\n\t\t\tname: 'Sum results to',\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: 1,\n\t\t\tshow: {\n                displayPoints: 'game'\n            },\n\t\t\tlockOnInit: true,\n\t\t\tnb: {\n\t\t\t\tstep: 1,\n\t\t\t\tmin: 1\n\t\t\t},\n\t\t\tallow: {\n\t\t\t\tany: true\n\t\t\t}\n\t\t}\n\t},\n\tstats: {\n\t\tnbPlayers: {\n\t\t\tname: 'Number of players',\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: 0,\n\t\t\tvalue: (status: TournamentStatus, players: Player[]): number => players.length,\n\t\t\tconvert: (v: number) => v.toString()\n\t\t},\n\t\tactivePlayers: {\n\t\t\tname: 'Active players',\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: 0,\n\t\t\tvalue: (status: TournamentStatus, players: Player[]): number => players.filter(p => p.active).length,\n\t\t\tconvert: (v: number) => v.toString()\n\t\t},\n\t\tmatchesPlayed: {\n\t\t\tname: 'Matches played',\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: 0,\n\t\t\tvalue: (status: TournamentStatus, players: Player[]): number => players.reduce((acc, curr) => acc += curr.played, 0) / 2,\n\t\t\tconvert: (v: number) => v.toString()\n\t\t},\n\t\tgamesPlayed: {\n\t\t\tname: 'Games played',\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: 0,\n\t\t\tvalue: (status: TournamentStatus, players: Player[]): number => players.reduce((acc, curr) => acc += curr.histories.slice(1).reduce((acc, curr) => acc += curr.played, 0), 0) / 2,\n\t\t\tconvert: (v: number) => v.toString()\n\t\t},\n\t\taverageRating: {\n\t\t\tname: 'Average rating',\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: 1200,\n\t\t\tvalue: (status: TournamentStatus, players: Player[]): number => {\n\t\t\t\tlet sum = players.reduce((acc, curr) => acc += curr.rating, 0);\n\t\t\t\treturn Math.round(sum / players.length);\n\t\t\t},\n\t\t\tconvert: (v: number) => v.toString()\n\t\t},\n\t\tcreatedAt: {\n\t\t\tname: 'Created at',\n\t\t\tconvert: (v: string) => new Date(v).toString().slice(0, 24),\n\t\t\tlocked: true\n\t\t},\n\t\tupdatedAt: {\n\t\t\tname: 'Last updated',\n\t\t\tconvert: (v: string) => new Date(v).toString().slice(0, 24),\n\t\t\tlocked: true\n\t\t}\n\t},\n\tpermissions: {\n\t\tallowNewPlayers: {\n\t\t\tname: 'Mid-way joining?',\n\t\t\tconvert: (v: boolean) => capitalise(v.toString()),\n\t\t\tlockOnInit: false,\n\t\t\ttype: 'boolean',\n\t\t\tdefaultValue: true\n\t\t},\n\t\tallowSelfSubmissions: {\n\t\t\tname: 'User submissions?',\n\t\t\tconvert: (v: boolean) => capitalise(v.toString()),\n\t\t\tlockOnInit: false,\n\t\t\ttype: 'boolean',\n\t\t\tdefaultValue: true\n\t\t},\n\t\troundTimes: {\n\t\t\tname: 'Round times?',\n\t\t\tconvert: (v: boolean) => capitalise(v.toString()),\n\t\t\ttype: 'boolean',\n\t\t\tdefaultValue: false,\n\t\t\tlocked: false // TODO: implement on backend\n\t\t}\n\t},\n\tpoints: {\n\t\tlossReward: {\n\t\t\tname: 'Points on loss',\n\t\t\tlockOnInit: true,\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: 0,\n\t\t\tnb: {\n\t\t\t\tstep: 0.1\n\t\t\t}\n\t\t},\n\t\tdrawReward: {\n\t\t\tname: 'Points on draw',\n\t\t\tlockOnInit: true,\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: 0.5,\n\t\t\tnb: {\n\t\t\t\tstep: 0.1\n\t\t\t}\n\t\t},\n\t\twinReward: {\n\t\t\tname: 'Points on win',\n\t\t\tlockOnInit: true,\n\t\t\ttype: 'number',\n\t\t\tdefaultValue: 1,\n\t\t\tnb: {\n\t\t\t\tstep: 0.1\n\t\t\t}\n\t\t},\n\t\tbyeReward: {\n\t\t\tname: 'Bye reward',\n\t\t\tenum: ['win', 'draw', 'loss'],\n\t\t\tlockOnInit: true,\n\t\t\tdefaultValue: 'win'\n\t\t},\n\t\tperformanceSystem: {\n\t\t\tname: 'Performance rating',\n\t\t\tenum: ['ELO', 'FIDE'],\n\t\t\tlockOnInit: false,\n\t\t\tdefaultValue: 'ELO'\n\t\t}\n\t}\n} as {\n\t[key: string]: {\n\t\t[key: string]: TournamentSetting\n\t}\n};\n\nexport const defaultUserSettings = {\n\tusername: {\n\t\tname: 'Username',\n\t\ttype: 'string',\n\t\tlocked: true,\n\t\tprimaryKey: true,\n\t},\n\tlocation: {\n\t\tname: 'Location',\n\t\ttype: 'string',\n\t\tlocked: true,\n\t\tdefaultValue: 'Oxford, UK'\n\t},\n\tlanguage: {\n\t\tname: 'Language',\n\t\ttype: 'string',\n\t\tdefaultValue: 'English (UK)',\n\t\tlocked: true\n\t},\n\tcreatedAt: {\n\t\tname: 'Created at',\n\t\tconvert: (v: string) => new Date(v).toString().slice(0, 24),\n\t\tlocked: true,\n\t\tdefaultValue: Date.now()\n\t},\n\tupdatedAt: {\n\t\tname: 'Last updated',\n\t\tconvert: (v: string) => new Date(v).toString().slice(0, 24),\n\t\tlocked: true,\n\t\tdefaultValue: Date.now()\n\t}\n} as {\n\t[key: string]: {\n\t\tname?: string,\n\t\tenum?: string[],\n\t\tconvert?: (v: any) => string,\n\t\ttype?: string\n\t\tlocked?: boolean\n\n\t\tprimaryKey?: boolean\n\t\tdefaultValue?: any\n\t}\n};","import React, { ReactElement } from 'react';\n\ninterface GridProps {\n\theader: {[key: string]: string | undefined}\n\tbody: JSX.Element[][]\n\tstyles: any\n\tbodyClassNames: string[]\n\tstyle: any\n\thandleHeaderClick: (key: string) => void\n}\n\nexport default function Grid(props: GridProps): ReactElement {\n\n\tconst headers = props.header;\n\tconst body = props.body;\n\n\treturn (\n\t\t<div className={props.styles.crossTable} style={props.style}>\n\t\t\t<table className={props.styles.table}>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{Object.entries(headers).map(([key, header], i) => {\n\t\t\t\t\t\t\treturn <th scope='column' key={['column', i].join('.')} className={props.styles.th}>\n\t\t\t\t\t\t\t\t{header ? <div\n\t\t\t\t\t\t\t\t\tclassName={[props.styles.cell, props.styles.headerCell].join(' ')}\n\t\t\t\t\t\t\t\t\tonClick={() => props.handleHeaderClick(key)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{header}\n\t\t\t\t\t\t\t\t</div> : ''}\n\t\t\t\t\t\t\t</th>;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\t\t\t\t\t\t\n\t\t\t\t\t{body.map((rowData, i) => {\n\t\t\t\t\t\tlet first = rowData.shift();\n\t\t\t\t\t\tlet rest = rowData;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<tr key={'row.' + i} className={props.styles.tr}>\n\t\t\t\t\t\t\t\t<th scope='row'>\n\t\t\t\t\t\t\t\t\t{first}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t{rest.map((cell, j) => {\n\t\t\t\t\t\t\t\t\tlet UID = ['cell', i, j].join('.');\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<td id={UID} key={UID} className={props.styles.td}>\n\t\t\t\t\t\t\t\t\t\t\t{cell}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n\t\n}","const regexes = {\n\tspace: /\\s+/g,\n\tletters: /\\w+/g,\n\timage: /<img\\s+.*?src=[\"'](.*).*?\">/,\n\tdate: /^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}_/,\n\thref: /^(https?:)?\\/\\//,\n\t/* eslint-disable-next-line no-control-regex */\n\temail: /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/\n};\n\nexport default regexes;","import React, { ReactElement } from 'react';\nimport url from 'url';\nimport { server, FORM } from '../utils/requests';\nimport regexes from '../utils/regexes';\n\nimport appStyles from '../css/app.module.css';\nimport styles from '../css/login.module.css';\nimport { StringDictionary } from '../interfaces';\nimport { IoIosArrowForward, IoIosArrowBack } from 'react-icons/io';\n\n/*\nimport FontAwesome from 'react-native-vector-icons/FontAwesome';\nimport iconFont from 'react-native-vector-icons/Fonts/FontAwesome.ttf';\nconst iconFontStyles = `@font-face {\n  src: url(${iconFont});\n  font-family: FontAwesome;\n}`;*/\n\nexport function Crown(props: {\n\tloading: boolean,\n\tsetLoading: (loading: boolean) => void\n\tclassNames?: StringDictionary\n}) {\n\n\treturn (\n\t\t<div\n\t\t\tclassName={[appStyles.logo, props.classNames?.logo].join(' ')}\n\t\t>\n\t\t\t{!props.loading ? \n\t\t\t\t<img className={appStyles.staticLogo} src={process.env.PUBLIC_URL + '/images/favicon.png'} alt='swiss-logo.png'/> :\n\t\t\t\t<>\n\t\t\t\t\t<img className={appStyles.staticLogo} src={process.env.PUBLIC_URL + '/images/dubrovny.png'} alt='swiss-logo.png'/>\n\t\t\t\t\t<img className={appStyles.crownOutline} src={process.env.PUBLIC_URL + '/images/crown-outline.png'} alt='outline-gif'/>\n\t\t\t\t\t<img className={appStyles.loadingGif} src={process.env.PUBLIC_URL + '/images/loading-crown.gif'} alt='loading-gif'/>\n\t\t\t\t</>\n\t\t\t} {/*\n\t\t\t<div>\n\t\t\t\t<hr className={appStyles.loadingLine}/>\n\t\t\t\t<hr className={appStyles.loadingLine}/>\n\t\t\t\t<hr className={appStyles.loadingLine}/>\n\t\t\t</div>*/}\n\t\t</div>\n\t);\n}\n\nexport default class Login extends React.Component<{\n\tlogin: (sessionID: string) => void\n}, {\n\tloading: boolean\n\tregister: boolean\n\terrorMessage: string\n}> {\n\n\tpublic state = {\n\t\tloading: false,\n\t\tregister: false,\n\t\terrorMessage: ''\n\t}\n\n\tprivate handleSubmit = (e: React.FormEvent<HTMLFormElement>): void => {\n\t\tthis.setState({loading: true});\n\t\tFORM(e)\n\t\t\t.then((sessionID: string) => this.props.login(sessionID))\n\t\t\t.catch((e) => {\n\t\t\t\tif (e && e.response && e.response.data) this.setState({\n\t\t\t\t\terrorMessage: e.response.data\n\t\t\t\t});\n\t\t\t\tconsole.error(e);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tthis.setState({loading: false});\n\t\t\t});\n\t}\n\n\tprivate get loginForm(): ReactElement {\n\t\treturn (\n\t\t\t<form\n\t\t\t\tclassName={styles.form}\n\t\t\t\tmethod='POST'\n\t\t\t\tonSubmit={this.handleSubmit}\n\t\t\t\taction={url.resolve(server, 'login')}\n\t\t\t>\n\t\t\t\t<input type='text' name='username' required placeholder='username' className={['input', styles.input].join(' ')}></input>\n\t\t\t\t<input type='password' name='password' required placeholder='password' className={['input', styles.input].join(' ')}></input>\n\t\t\t\t<div className={styles.forgottenContainer}>\n\t\t\t\t\t<div className={['input', styles.forgotten].join(' ')}>username reminder</div>\n\t\t\t\t\t<div className={['input', styles.forgotten].join(' ')}>password reset</div>\n\t\t\t\t</div>\n\t\t\t\t<input type='submit' value='LOGIN' className={['input', styles.submit].join(' ')}></input>\n\t\t\t</form>\n\t\t);\n\t}\n\n\tprivate get registerForm(): ReactElement {\n\t\treturn (\n\t\t\t<form\n\t\t\t\tclassName={styles.form}\n\t\t\t\tmethod='POST'\n\t\t\t\tonSubmit={this.handleSubmit}\n\t\t\t\taction={url.resolve(server, 'register')}\n\t\t\t>\n\t\t\t\t<input type='text' name='username' required placeholder='username' className={['input', styles.input].join(' ')}></input>\n\t\t\t\t<input type='password' name='password' required placeholder='password' minLength={8} className={['input', styles.input].join(' ')}></input>\n\t\t\t\t<input type='email' name='email' required placeholder='email' className={['input', styles.input].join(' ')} pattern={regexes.email.source}></input>\n\t\t\t\t<input type='submit' value='REGISTER' className={['input', styles.submit].join(' ')}></input>\n\t\t\t</form>\n\t\t);\n\t}\n\n\tprivate get loginSection(): ReactElement {\n\t\treturn (\n\t\t\t<div className={[styles.loginSection, styles.initialiseButton].join(' ')}>\n\t\t\t\t<div className={styles.loginBackground}>\n\t\t\t\t\t<div className={[styles.flip, 'button'].join(' ')} onClick={() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tloading: true,\n\t\t\t\t\t\t\tregister: false,\n\t\t\t\t\t\t\terrorMessage: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(() => this.setState({ loading: false }), 500);\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<div>LOGIN</div>\n\t\t\t\t\t\t<div>\n                            <IoIosArrowBack />\n                        </div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div></div>\n\t\t\t\t\t<div className={[styles.flip, 'button'].join(' ')} onClick={() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tloading: true,\n\t\t\t\t\t\t\tregister: true,\n\t\t\t\t\t\t\terrorMessage: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(() => this.setState({ loading: false }), 500);\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<div>REGISTER</div>\n\t\t\t\t\t\t<div>\n                            <IoIosArrowForward />\n                        </div>\n\t\t\t\t\t</div>\n\t\t\t\t\tBackground\n\t\t\t\t</div>\n\t\t\t\t<div className={[styles.foreground, this.state.register ? styles.registerForeground : styles.loginForeground].join(' ')}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.register ? this.registerForm : this.loginForm\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender(): ReactElement {\n\t\treturn (\n\t\t\t<div className={appStyles.canvas}>\n\t\t\t\t<div className={appStyles.column} />\n\t\t\t\t<div className={[appStyles.column, styles.column].join(' ')}>\n\t\t\t\t\t<Crown setLoading={(loading: boolean) => this.setState({ loading })} loading={this.state.loading} />\n\t\t\t\t\t{this.loginSection}\n\t\t\t\t\t<div className={styles.messageBar}>\n\t\t\t\t\t\t{this.state.errorMessage || '\\u200b'}\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*<div className={['button', styles.initialiseButton].join(' ')}>\n\t\t\t\t\t\t{this.state.register ? <>\n\t\t\t\t\t\t\t<div className={styles.registerForm}>{this.registerForm}</div>\n\t\t\t\t\t\t\t<div className={styles.flip} onClick={() => this.setState({ register: false })}>{'LOGIN\\n🡄'}</div>\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t<div className={styles.flip} onClick={() => this.setState({ register: true })}>{'REGISTER\\n🡆'}</div>\n\t\t\t\t\t\t\t<div className={styles.loginForm}>{this.loginForm}</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>*/}\n\t\t\t\t</div>\n\t\t\t\t<div className={appStyles.column} />\n\t\t\t</div>\n\t\t);\n\t}\n\n\n}","import React, { ReactElement } from 'react';\nimport url from 'url';\n\nimport appStyles from '../css/app.module.css';\nimport profileStyles from '../css/profile.module.css';\nimport styles from '../css/menu.module.css';\n\nimport { NumberDictionary, StringDictionary, NavData } from '../interfaces';\nimport { Crown } from './Login';\nimport { GET, POST, cookies, server } from '../utils/requests';\nimport { AxiosError } from 'axios';\nimport { Circle } from '../components/Vectors';\nimport { calculateHypotenuse } from '../utils/prototype';\nimport { defaultUserSettings } from '../assets/settings';\nimport { EditableField } from '../components/';\n\nimport { IoMdArrowRoundBack, IoIosSettings, IoMdClose, IoIosCloseCircle } from 'react-icons/io';\nimport { AiOutlinePlus } from 'react-icons/ai';\nimport { TiThMenu } from 'react-icons/ti';\nimport { MdRefresh } from 'react-icons/md';\nimport { FaEarlybirds, FaPlusCircle } from 'react-icons/fa';\n\nexport default class Menu extends React.Component<{\n\tsessionID: string\n\tendSession: () => void\n\tsetTournamentID: (id: string) => void\n\ttriggerConfirm: (message: string, resolve: () => void, reject: () => void) => void\n}, {\n\ttournamentDict: StringDictionary,\n\tloading: boolean\n\tloadingOverride: boolean\n\tregister: boolean\n\terrorMessage: string\n\tlines: ReactElement[]\n\tlinesMounted: boolean\n\tlinesAdjusted: boolean\n\tselected: string\n\thovered: string\n}> {\n\n\tpublic state = {\n\t\ttournamentDict: {} as StringDictionary,\n\t\tloading: true,\n\t\tloadingOverride: false,\n\t\tregister: false,\n\t\terrorMessage: '',\n\t\tlines: [] as ReactElement[],\n\t\tlinesMounted: false,\n\t\tlinesAdjusted: false,\n\t\tselected: '',\n\t\thovered: ''\n\t}\n\n\tpublic setTournamentID = (tournamentID: string): Promise<void> => {\n\t\treturn this.validateTournament(tournamentID)\n\t\t\t.then(() => {\n\t\t\t\tcookies.set('tournamentID', tournamentID, { path: '/' }).catch(console.error);\n\t\t\t\tthis.props.setTournamentID(tournamentID);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tcookies.remove('tournamentID').catch(console.error);\n\t\t\t\tthis.props.setTournamentID('');\n\t\t\t});\n\t}\n\n\tpublic validateTournament(tournamentID: string): Promise<void> {\n\t\tif (!tournamentID) return Promise.reject();\n\t\tif (!Object.values(this.state.tournamentDict).length) {\n\t\t\treturn this.updateTournamentDict()\n\t\t\t\t.then((tournamentDict: StringDictionary) => {\n\t\t\t\t\tif (tournamentDict[tournamentID] === undefined) throw new Error();\n\t\t\t\t\treturn;\n\t\t\t\t});\n\t\t} else return tournamentID in this.state.tournamentDict ? Promise.resolve() : Promise.reject();\n\t}\n\n\tpublic updateTournamentDict = (): Promise<StringDictionary> => {\n\t\treturn GET({ url: '/tournaments' })\n\t\t\t.then((tournamentDict: StringDictionary) => {\n\t\t\t\tthis.setState({ tournamentDict });\n\t\t\t\treturn tournamentDict;\n\t\t\t})\n\t\t\t.catch((e: Error) => {\n\t\t\t\tconsole.error(e);\n\t\t\t\tthis.props.endSession();\n\t\t\t\treturn {} as StringDictionary;\n\t\t\t});\n\t}\n\n\tpublic createNewTournament = async (): Promise<void> => {\n\t\ttry {\n\t\t\tlet data = await POST({ url: '/initialise' });\n\t\t\tif (!data) throw new Error();\n\t\t\tthis.props.setTournamentID(data.id);\n\t\t\tawait this.updateTournamentDict();\n\t\t} catch (error) {\n\t\t\tlet e = error as AxiosError;\n\t\t\tif (!e.response || e.response.status === 401) this.props.endSession();\n\t\t}\n\t}\n\n\tpublic removeID = async (id?: string): Promise<void> => {\n\t\tif (!id) {\n\t\t\tawait POST({ url: '/closeAuthorization/all' });\n\t\t\tthis.setState({ tournamentDict: {} });\n\t\t} else {\n\t\t\tlet tournamentDict = this.state.tournamentDict;\n\t\t\tdelete tournamentDict[id];\n\t\t\tawait POST({ url: '/closeAuthorization/' + id });\n\t\t\tthis.setState({ tournamentDict });\t\t\t\n\t\t}\n\t}\n\n\tprivate getElementCentre(elem: HTMLElement): {x: number, y: number} {\n\t\tvar rect = elem.getBoundingClientRect();\n\t\treturn {\n\t\t\tx: (rect.left + rect.right) / 2,\n\t\t\ty: (rect.top + rect.bottom) / 2 - 30 //on account of parent being 30px from top\n\t\t};\n\t}\n\n\trenderLineBetween(id: string, start: {x: number, y: number}, end: {x: number, y: number}, width: number): ReactElement {\n\t\tlet diff = {x: Math.abs(end.x - start.x), y: Math.abs(end.y - start.y)};\n\t\tlet length = calculateHypotenuse(end.x - start.x, end.y - start.y);\n\n\t\tlet sign = Math.sign((end.x - start.x) * (end.y - start.y));\n\t\tlet angle = Math.atan(diff.y / diff.x) * 180 / Math.PI;\n\n\t\treturn <div key={['line', end.x, end.y].join('.')} className={styles.line} style={{\n\t\t\twidth: length + 'px',\n\t\t\theight: width + 'px',\n\t\t\tbackgroundColor: 'white',\n\t\t\tposition: 'absolute',\n\t\t\tleft: !this.state.linesMounted ? start.x - (diff.x / 2) : ((start.x + end.x) / 2) - (diff.x / 2),\n\t\t\ttop: !this.state.linesMounted ? start.y : ((start.y + end.y) / 2),\n\t\t\ttransform: `rotate(${angle * sign}deg) scaleX(${this.state.linesMounted ? 1 : 0}) scaleY(1)`,\n\t\t\topacity: !this.state.linesMounted ? 0 : 1,\n\t\t\ttransition: 'transform 3s, left 3s, top 3s, opacity 3s'\n\t\t}}/>;\n\t}\n\n\tprivate logoRef = React.createRef() as React.RefObject<HTMLDivElement>\n\tprivate drawLines = () => {\n\t\tif (!this.logoRef.current) return;\n\t\tlet startCoords = this.getElementCentre(this.logoRef.current);\n\t\tlet circles = Array.from(document.getElementsByClassName(styles.dot)) as HTMLElement[];\n\t\tlet lines = [] as ReactElement[];\n\t\tfor (let c of circles) {\n\t\t\tif (c.style.opacity === '0') continue;\n\t\t\tlines.push(this.renderLineBetween(c.id, startCoords, this.getElementCentre(c), 2));\n\t\t}\n\t\tthis.setState({ lines, linesMounted: true });\n\t\tsetTimeout(() => this.setState({ linesAdjusted: true }), 3000);\n\t}\n\n\tprivate handleNavData(keys: string[], side: 'left' | 'right'): ReactElement[] {\n\t\tlet navData = this.navData;\n\t\tlet data = keys.reduce((acc: NavData, curr: string) => {\n\t\t\tif (!(curr in navData)) return acc;\n\t\t\tacc[curr] = navData[curr];\n\t\t\treturn acc;\n\t\t}, {});\n\t\treturn Object.entries(data).reduce((acc, [id, meta], i) => {\n\t\t\tlet arr = [\n\t\t\t\t<div className={[styles.dotDescription, this.state.selected === id ? styles.descriptionSelected : ''].join(' ')} key={['navData', side, 'description', i].join('.')}>\n\t\t\t\t\t{meta.description}\n\t\t\t\t</div>,\n\t\t\t\t<Circle\n\t\t\t\t\tkey={['navData', side, 'dot', i].join('.')}\n\t\t\t\t\tradius='50px'\n\t\t\t\t\tclassName={[styles.dot, !this.state.linesAdjusted ? styles.dotUnloaded : ''].join(' ')}\n\t\t\t\t\tid={id}\n\t\t\t\t\tcontent={meta.content}\n\t\t\t\t\tonClick={async (e) => {\t\n\t\t\t\t\t\tif (this.state.selected === id) this.setState({ selected: '' });\n\t\t\t\t\t\telse {\t\t\t\t\n\t\t\t\t\t\t\tawait meta.onClick(e);\n\t\t\t\t\t\t\tif (!meta.noSet) this.setState({ selected: id });\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseEnter={() => this.setState({ hovered: 'back' })}\n\t\t\t\t\tonMouseLeave={() => this.setState({ hovered: '' })}\n\t\t\t\t\tstyle={meta.style}\n\t\t\t\t/>\n\t\t\t];\n\t\t\tif (side === 'right') arr = arr.reverse();\n\t\t\tacc.push(<div className={[styles.dotContainer, this.state.linesAdjusted ? styles.dotContainerLoaded : ''].join(' ')} key={['NavData', side, 'div', i].join('i')}>\n\t\t\t\t{arr}\n\t\t\t</div>);\n\t\t\treturn acc;\n\t\t}, [] as ReactElement[]);\n\t}\n\n\tprivate get navData(): NavData {\n\t\treturn {\n\t\t\tcreate: {\n\t\t\t\tonClick: this.createNewTournament,\n\t\t\t\tcontent: <AiOutlinePlus />,\n\t\t\t\tdescription: 'Create new Swiss tournament'\n\t\t\t},\n\t\t\troundRobin: {\n\t\t\t\tonClick: () => {},\n\t\t\t\tcontent: <FaEarlybirds />,\n\t\t\t\tdescription: 'Create new Round-Robin tournament'\n\t\t\t},\n\t\t\tsettings: {\n\t\t\t\tonClick: () => {},\n\t\t\t\tcontent: <IoIosSettings />,\n\t\t\t\tdescription: 'User settings'\n\t\t\t},\n\t\t\tload: {\n\t\t\t\tonClick: this.updateTournamentDict,\n\t\t\t\tcontent: <TiThMenu />,\n\t\t\t\tdescription: 'Load previous tournaments'\n\t\t\t},\n\t\t\tback: {\n\t\t\t\tonClick: this.props.endSession,\n\t\t\t\tcontent: <IoMdArrowRoundBack />,\n\t\t\t\tdescription: 'Exit to login'\n\t\t\t},\n\t\t\tclose: {\n\t\t\t\tonClick: () => this.props.triggerConfirm('Delete all saved tournaments?', this.removeID, () => {}),\n\t\t\t\tnoSet: true,\n\t\t\t\tcontent: <IoMdClose />,\n\t\t\t\tdescription: 'Close all tournaments',\n\t\t\t\tstyle: {\t\t\t\t\t\n\t\t\t\t\tborder: '8px solid darkred'\n\t\t\t\t}\n\t\t\t},\n\t\t\trefresh: {\n\t\t\t\tonClick: this.updateTournamentDict,\n\t\t\t\tnoSet: true,\n\t\t\t\tcontent: <MdRefresh />,\n\t\t\t\tdescription: 'Refresh tournament list',\n\t\t\t\tstyle: {\t\t\t\t\t\n\t\t\t\t\tborder: '8px solid darkblue'\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t}\n\n\tcomponentDidUpdate(prevProps: {}, prevState: {selected: string}) {\n\t\tif (this.state.selected !== prevState.selected) this.drawLines();\n\t}\n\n\tasync componentDidMount() {\n\t\tlet tournamentID = await cookies.get('tournamentID');\n\t\tif (tournamentID) this.props.setTournamentID(tournamentID);\n\t\telse this.updateTournamentDict();\n\t\twindow.addEventListener('resize', this.drawLines);\n\t\tthis.drawLines();\n\t\tsetImmediate(this.drawLines);\n\t\t//setTimeout(this.drawLines, 2000);\n\t\tsetTimeout(() => this.setState({ loading: false }), 3000);\n\t}\n\n\tcomponentWillUnmount() {\t\t\n\t\twindow.addEventListener('resize', this.drawLines);\n\t}\n\n\trender(): ReactElement {\n\t\treturn (\n\t\t\t<div className={appStyles.canvas}>\n\t\t\t\t{this.state.lines}\n\t\t\t\t<div className={[appStyles.column, styles.leftColumn].join(' ')}>\n\t\t\t\t\t{(() => {\n\t\t\t\t\t\tswitch (this.state.selected) {\n\t\t\t\t\t\tcase 'load':\n\t\t\t\t\t\t\treturn this.handleNavData(['refresh', 'close', 'load'], 'left');\n\t\t\t\t\t\tcase 'settings':\n\t\t\t\t\t\t\treturn this.handleNavData(['create', 'settings', 'load'], 'left');\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn this.handleNavData(['create', 'settings', 'load'], 'left');\n\t\t\t\t\t\t}\n\t\t\t\t\t})()}\n\t\t\t\t</div>\n\t\t\t\t<div ref={this.logoRef} className={[appStyles.column, styles.column].join(' ')}>\n\t\t\t\t\t<Crown setLoading={(loadingOverride: boolean) => this.setState({ loadingOverride })} loading={this.state.loading || this.state.loadingOverride} classNames={{\n\t\t\t\t\t\tlogo: styles.logo\n\t\t\t\t\t}}/>\n\t\t\t\t</div>\n\t\t\t\t<div className={[appStyles.column, styles.rightColumn].join(' ')}>\n\t\t\t\t\t{(() => {\n\t\t\t\t\t\tswitch (this.state.selected) {\n\t\t\t\t\t\tcase 'load':\n\t\t\t\t\t\t\treturn <Listing\n\t\t\t\t\t\t\t\tsetTournamentID={this.props.setTournamentID}\n\t\t\t\t\t\t\t\tcreateNewTournament={this.createNewTournament}\n\t\t\t\t\t\t\t\tremoveID={this.removeID}\n\t\t\t\t\t\t\t\tupdateTournamentSettings={this.updateTournamentDict}\n\t\t\t\t\t\t\t\ttournamentDict={this.state.tournamentDict}\n\t\t\t\t\t\t\t\tcloseListing={() => this.setState({ selected: '' })}\n\t\t\t\t\t\t\t\ttriggerConfirm={this.props.triggerConfirm}\n\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\tcase 'settings':\n\t\t\t\t\t\t\treturn <UserSettings\n\t\t\t\t\t\t\t\tupdateTournamentSettings={() => Promise.resolve()}\n\t\t\t\t\t\t\t\tupdateSetting={() => Promise.resolve()}\n\t\t\t\t\t\t\t\tsettings={{}}\n\t\t\t\t\t\t\t\tcloseListing={() => this.setState({ selected: '' })}\n\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn this.handleNavData(['back'], 'right');\n\t\t\t\t\t\t}\n\t\t\t\t\t})()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\n}\n\nexport class Listing extends React.Component<{\n\tsetTournamentID: (id: string) => void\n\tcreateNewTournament: () => Promise<void>\n\tremoveID: (id: string) => void\n\tcloseListing: () => void\n\tupdateTournamentSettings: () => void\n\ttournamentDict: StringDictionary\n\ttriggerConfirm: (message: string, resolve: () => void, reject: () => void) => void\n}, {\n\theight: number\n}> {\n\n\tpublic state = {\n\t\theight: 0\n\t}\n\n\tgenerateListing(tournamentDict: StringDictionary) {\n\t\tlet titles = Object.keys(tournamentDict).reduce((acc: NumberDictionary, curr: string) => {\n\t\t\tlet title = this.props.tournamentDict[curr];\n\t\t\tif (!title) return acc;\n\t\t\tif (!acc[title]) acc[title] = 0;\n\t\t\tacc[title]++;\n\t\t\treturn acc;\n\t\t}, {});\n\t\tlet buttons = Object.entries(tournamentDict).map(([tournamentID, name], i: number) => {\n\t\t\tlet displayName = titles[name] === undefined ? tournamentID : titles[name] === 1 ? name : name + '\\n' + tournamentID;\n\t\t\treturn (\n\t\t\t\t<div className={[profileStyles.row, styles.row].join(' ')} key={['row', i].join('.')}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={[styles.clickButton, 'fieldBox'].join(' ')}\t\t\t\t\t\t\n\t\t\t\t\t\tonClick={() => this.props.setTournamentID(tournamentID)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{displayName}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={[styles.clickButton, styles.close, 'fieldBox'].join(' ')} onClick={() => {\n\t\t\t\t\t\tthis.props.triggerConfirm('Delete tournament \\'' + displayName + '\\'?', () => this.props.removeID(tournamentID), () => {});\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<IoIosCloseCircle />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}).filter(elem => elem);\n\t\treturn buttons;\n\t}\n\n\tprivate listing = React.createRef() as React.RefObject<HTMLDivElement>\n\tprivate renderHeight = () => {\n\t\tif (this.listing.current) this.setState({ height: this.listing.current.getBoundingClientRect().height });\n\t}\n\n\tcomponentDidMount() {\n\t\tsetTimeout(this.renderHeight, 1000);\n\t}\n\n\trender(): ReactElement {\n\t\treturn (\n\t\t\t<div className={profileStyles.sidebar}>\n\t\t\t\t<div className={profileStyles.profile} >\t\t\t\t\n\t\t\t\t\t<div className='topBanner'>\n\t\t\t\t\t\tLoad Tournament\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.listWrapper} style={{height: this.state.height}}>\n\t\t\t\t\t\t<div ref={this.listing} className={styles.listing}>\n\t\t\t\t\t\t\t{this.generateListing(this.props.tournamentDict)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='bottomBanner'>\n\t\t\t\t\t<div onClick={this.props.createNewTournament} className='button'>\n\t\t\t\t\t\t<FaPlusCircle />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div onClick={this.props.closeListing} className='button'>\n\t\t\t\t\t\t<IoMdArrowRoundBack />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport class UserSettings extends React.Component<{\n\tupdateTournamentSettings: () => Promise<void>\n\tupdateSetting: (k: string, v: any) => Promise<void>\n\tsettings: any\n\tcloseListing: () => void\n}> {\n\n\n\tprivate renderSettings(): ReactElement[] {\n\t\treturn Object.entries(defaultUserSettings).map(([k, def], i): ReactElement => {\n\t\t\tlet v = this.props.settings[k] || def.defaultValue;\n\t\t\tlet locked = false;\n\t\t\tif (def.locked) locked = true;\n\t\t\tlet content = def.convert ? def.convert(v) : v as string;\n\t\t\tlet displayContent = typeof content !== 'undefined' ? content.toString() : '\\u200b';\n\t\t\treturn (\n\t\t\t\t<div className={profileStyles.row} key={['row', i].join('.')}>\n\t\t\t\t\t<div className='fieldBox'>{def.name + ':'}</div>\n\t\t\t\t\t{def.type === 'number' ? <EditableField\n\t\t\t\t\t\thandleSubmit={this.props.updateSetting}\n\t\t\t\t\t\tcontent={displayContent}\n\t\t\t\t\t\turl={url.resolve(server, ['updateUserSetting'].join('/'))}\n\t\t\t\t\t\tinputType='number'\n\t\t\t\t\t\tonSubmitSuccess={(e) => {\n\t\t\t\t\t\t\tthis.props.updateTournamentSettings();\n\t\t\t\t\t\t\treturn e;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tadditionalStyles={{\n\t\t\t\t\t\t\teditableField: profileStyles.editableField,\n\t\t\t\t\t\t\tinput: profileStyles.input\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tname={k}\n\t\t\t\t\t\tadditionalInputProps={{}}\n\t\t\t\t\t\tshow={{\n\t\t\t\t\t\t\tsubmit: true,\n\t\t\t\t\t\t\tincrement: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t/> :\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={['fieldBox', !locked ? profileStyles.editable : profileStyles.locked].join(' ')}\n\t\t\t\t\t\t\tonClick={locked ? () => {} : () => this.props.updateSetting(k, v)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{displayContent}\n\t\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t);\n\t\t});\n\t}\n\n\trender(): ReactElement {\n\t\treturn (\n\t\t\t<div className={profileStyles.sidebar}>\n\t\t\t\t<div className={profileStyles.profile} >\t\t\t\t\n\t\t\t\t\t<div className='topBanner'>\n\t\t\t\t\t\tSettings\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.renderSettings()}\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\tjustifyContent: 'center'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\ttransform: 'rotate(-30deg)'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\tThis feature is in beta\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='bottomBanner'>\n\t\t\t\t\t<div onClick={this.props.closeListing} className='button'>\n\t\t\t\t\t\t<IoMdArrowRoundBack />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { CSSProperties, ReactElement } from 'react';\n\nexport function Circle(props: {\n\tradius: string | number\n\tclassName?: string\n\tid?: string\n\tstyle?: CSSProperties\n\tcontent?: string | ReactElement\n\tonClick?: (e: React.MouseEvent<HTMLSpanElement, MouseEvent>) => void\n\tonMouseEnter?: (e: React.MouseEvent<HTMLSpanElement, MouseEvent>) => void\n\tonMouseLeave?: (e: React.MouseEvent<HTMLSpanElement, MouseEvent>) => void\n}) {\n\t\n\treturn <span\n\t\tid={props.id}\n\t\tclassName={props.className}\n\t\tstyle={{\n\t\t\theight: props.radius,\n\t\t\twidth: props.radius,\n\t\t\tlineHeight: props.radius,\n\t\t\tborderRadius: '50%',\n\t\t\tdisplay: 'inline-block',\n\t\t\tcursor: 'default',\n\t\t\t...props.style\n\t\t}}\n\t\tonClick={props.onClick}\n\t\tonMouseEnter={props.onMouseEnter}\n\t\t//onMouseLeave={props.onMouseLeave}\n\t>{props.content}</span>;\n\n}","import React from 'react';\nimport { win } from './utils/electron';\nimport { FaWindowMaximize, FaWindowRestore, FaWindowMinimize, FaWindowClose } from 'react-icons/fa';\n\nimport styles from './css/statusbar.module.css';\n\nexport default class StatusBar extends React.Component<{}, {\n\tname: string\n}> {\n\n\tpublic state = {\n\t\tname: ''\n\t}\n\n\tprivate get maximised(): boolean {\t\t\n\t\treturn win.isMaximized();\n\t}\n\n\tprivate minimise = () => {\n\t\twin.minimize();\n\t}\n\n\tprivate close = () => {\n\t\twin.close();\n\t}\n\n\tprivate toggleMaximisation = () => {\n\t\tif (this.maximised) {\n\t\t\twin.restore();\n\t\t\tthis.forceUpdate();\n\t\t} else {\n\t\t\twin.maximize();\n\t\t\tthis.forceUpdate();\n\t\t}\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div className={styles.statusBar}>\n\t\t\t\t<div className={styles.title}>\n\t\t\t\t\tTournament by Oxford Chess Development\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.menu}>\n\t\t\t\t\t<div className={styles.favicon}>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\talt='favicon'\n\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\tsrc={process.env.PUBLIC_URL + '/logo192.png'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.exec}>\n\t\t\t\t\t<div onClick={this.minimise}>\n                        <FaWindowMinimize />\n                    </div> \n\t\t\t\t\t<div onClick={this.toggleMaximisation} >\n                        {this.maximised ? \n                            <FaWindowRestore /> :\n                            <FaWindowMaximize />\n                        }\n                    </div> \n\t\t\t\t\t<div onClick={this.close} className={styles.close}>\n                        <FaWindowClose />\n                    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { ReactElement } from 'react';\nimport { server, POST } from '../utils/requests';\nimport url from 'url';\nimport styles from '../css/tournament.module.css';\nimport { TournamentStatus, TournamentSettings } from '../interfaces';\nimport { EditableField } from '../components/';\nimport { MdExitToApp, MdStop } from 'react-icons/md';\nimport { IoMdPlay, IoMdGrid } from 'react-icons/io';\n\nexport default class InfoBar extends React.Component<{\n\tstatus: TournamentStatus\n\tsettings: TournamentSettings\n\tupdateTournamentStatus: () => void\n\twide: boolean\n\twideLeft: boolean\n\tround: number\n\ttotalRounds: number | 'Infinity'\n\tcloseTournament: () => void\n\ttoggleCrossTable: () => void\n\n\tlastRoundOverride: boolean\n\tsetLastRound: (override: boolean) => void\n\ttriggerError: (message: string) => void\n}> {\n\n\trender(): ReactElement {\n\t\t//let i = 0;\n\t\t//if (this.props.wide) i++;\n\t\t//if (this.props.wideLeft) i++;\n\n\t\tlet lastRound = false;\n\t\tif (typeof this.props.lastRoundOverride !== 'undefined') lastRound = this.props.lastRoundOverride;\n\t\telse lastRound = this.props.settings.totalRounds === this.props.status.round;\n\n\t\tlet uri = url.resolve(server, ['tournament', this.props.status.id, 'setName'].join('/'));\n\n\t\treturn (\n\t\t\t<div className={styles.titleBar} style={{\n\t\t\t\tgridColumn: '2 /span 1'//(this.props.wideLeft ? '1' : '2') + ' / span ' + (1 + i).toString()\n\t\t\t}}>\n\t\t\t\t<div className={styles.row}>\n\t\t\t\t\t<div className={['topBanner', styles.header].join(' ')}>\n\t\t\t\t\t\t<EditableField\n\t\t\t\t\t\t\tcontent={this.props.status.name}\n\t\t\t\t\t\t\turl={uri}\n\t\t\t\t\t\t\tinputType='text'\n\t\t\t\t\t\t\thandleSubmit={(k: string, v: any) => POST({\n\t\t\t\t\t\t\t\turl: uri,\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t[k]: v\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tadditionalStyles={styles}\n\t\t\t\t\t\t\tadditionalInputProps={{}}\n\t\t\t\t\t\t\tonSubmitSuccess={(e) => {\n\t\t\t\t\t\t\t\tthis.props.updateTournamentStatus();\n\t\t\t\t\t\t\t\treturn e;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdefaultContent='Unnamed Swiss Tournament'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.row}>\n\t\t\t\t\t<div className={'topBanner ' + styles.header}>\n\t\t\t\t\t\tID: {this.props.status.id}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'topBanner ' + styles.header}>\n\t\t\t\t\t\tRound: {!this.props.status.round ? 'Not yet initialised' : this.props.status.round + ' / ' + (this.props.totalRounds === 'Infinity' ? '∞' : this.props.totalRounds)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.row}>\n\t\t\t\t\t<div className='button' onClick={this.props.closeTournament}>\n\t\t\t\t\t\t<span role='img' aria-label='back'>\n                            <MdExitToApp />\n                        </span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='button' onClick={() => {\n\t\t\t\t\t\tif (this.props.status.round >= this.props.settings.totalRounds) this.props.triggerError('Increase the number of rounds in Settings to continue!')\n\t\t\t\t\t\tthis.props.setLastRound(!lastRound);\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<span role='img' aria-label='decommission'>\n                            {lastRound ? \n                                <IoMdPlay /> :\n                                <MdStop />\n                            }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='button' onClick={this.props.toggleCrossTable}>\n\t\t\t\t\t\t<IoMdGrid />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { ReactElement, useState, useEffect, useCallback, useMemo, useReducer } from 'react';\nimport styles from '../css/pairings.module.css';\nimport { TournamentStatus, TournamentSettings, ID, Player, PairingObject } from '../interfaces';\nimport { SinglePairing } from '../components/';\nimport { GET } from '../utils/requests';\nimport { AiOutlineMinus } from 'react-icons/ai';\nimport { IoIosSettings } from 'react-icons/io';\nimport { TiThMenu } from 'react-icons/ti';\n\ninterface PairingsProps {\n\tstatus: TournamentStatus\n\tplayerDict: Map<ID, Player>\n\tupdatePlayerDict: () => {}\n\tsettings: TournamentSettings\n\n\tid: string\n\tcanTriggerNextRound: boolean\n\tsetDisplayPlayer: (id: string) => void\n\ttoggleSidebar: () => void\n\ttoggleSettings: () => void\n\twide: boolean\n\twideLeft: boolean\n\n\tupdateRound: () => void\n\tsetLastRound: (override: boolean) => void\n\ttoggleCrossTable: () => void\n\tlastRoundOverride: boolean\n}\n\nexport default function Pairings(props: PairingsProps): ReactElement {\n\n    const round = useMemo(() => props.status.round, [props.status.round]);\n    const reduceResults = useCallback((state: Map<string, [number | null, number | null]>, {id, W, B}: {\n        id: string\n        W: Player,\n        B: Player\n    }): Map<string, [number | null, number | null]> => {\n        state.set(id, [\n            W ? W.histories ? W.histories[round][props.settings.displayPoints] : null : 0,\n            B ? B.histories ? B.histories[round][props.settings.displayPoints] : null : 0\n        ]);\n        return state;\n    }, [round, props.settings.displayPoints])\n\n    const [pairingData, setPairings] = useState([] as PairingObject[]);\n    const [results, setResults] = useReducer(reduceResults, new Map() as Map<string, [number | null, number | null]>);\n\n\n    const getPairings = useCallback((): Promise<void> => {\n        if (!round) return;\n\t\treturn GET({ url: '/tournament/' + props.id + '/getPairings'})\n\t\t\t.then((pairings: PairingObject[]) => {\n\t\t\t\tfor (let [w, b] of pairings) setResults({\n                    id: w + '.' + b, \n                    W: props.playerDict.get(w),\n                    B: props.playerDict.get(b)\n                });\n                setPairings(pairings);\n\t\t\t})\n\t\t\t.catch(console.error);\n\t}, [props.id, setPairings, setResults, round, props.playerDict]);\n\n    function getDisplayName(id: ID, player: Player): string {\n\t\tif (!player) return id;\n\t\tif (id === 'bye') return 'BYE';\n\t\tlet displayName: string;\n\t\tif (props.settings.competitors === 'individual') displayName = [player.firstName, player.lastName].join(' ');\n\t\telse displayName = player.firstName;\n\t\treturn `${displayName} [${player.score}]`;\n    }\n    \n    let pending = Array.from(results.values())\n            .filter(arr => arr.every(v => v === null));\n            \n    const triggerNextRound = (): Promise<void> => {\n        return GET({\n            url: '/tournament/' + props.id + '/getNextPairings'\n        })\n            .then((pairings: PairingObject[]) => setPairings(pairings))\n            .then(() => {\n                getPairings();\n                props.updatePlayerDict();\n            })\n            .then(props.updateRound)\n            .catch(console.error);\n    }\n\n\tfunction generateNextButton(): ReactElement {\n\t\tlet lastRound: boolean;\n\t\tif (props.status.round >= props.settings.totalRounds) lastRound = true;\n\t\telse if (typeof props.lastRoundOverride !== 'undefined') lastRound = props.lastRoundOverride;\n\t\telse lastRound = false;\n\n\t\treturn !props.canTriggerNextRound ? (\n\t\t\t<div className={[styles.waitButton].join(' ')}>\n\t\t\t\tTournament must have at least 2 active players\n\t\t\t</div>\n\t\t) : pending.length > 0 ? (\n\t\t\t<div className={[styles.waitButton].join(' ')} >\n\t\t\t\t{`Awaiting ${pending.length} result${pending.length > 1 ? 's' : ''}`}\n\t\t\t</div>\n\t\t) : lastRound ? (\n\t\t\t<div\n\t\t\t\tclassName={[styles.finishButton, 'button'].join(' ')}\n\t\t\t\tonClick={props.toggleCrossTable}\n\t\t\t>\n\t\t\t\tFinal Standings\n\t\t\t</div>\n\t\t) : (\n\t\t\t<div\n\t\t\t\tclassName={[styles.nextButton, 'button'].join(' ')}\n\t\t\t\tonClick={triggerNextRound}\n\t\t\t>\n\t\t\t\tNext Round\n\t\t\t</div>\n\t\t);\n    }\n    \n    function validateForm(form: HTMLFormElement): boolean | string | void {\n        if (form.resultWhite.value === '' && form.resultBlack.value === '') return undefined;\n        if (!Array.from(form).every((input) => (input as HTMLInputElement).validity.valid)) return false;\n        if (!props.settings.gamePointTotal) return true;\n        let nW = Number(form.resultWhite.value);\n        let nB = Number(form.resultBlack.value);\n        let total = props.settings.displayPoints === 'game' ? props.settings.gamePointTotal : 1;\n        if (nW + nB === total) return true;\n        return 'Setting: sum results to ' + props.settings.gamePointTotal;\n    }\n\n    function Listing(): ReactElement[] {\n        let pairings = [] as ReactElement[];\n        let dict = props.playerDict;\n        for (let [w, b] of pairingData) {\n    \n            let [white, black] = [dict.get(w), dict.get(b)];\n            let [wDisplay, bDisplay] = [getDisplayName(w, white), getDisplayName(b, black)];\t\t\t\n            let id = w + '.' + b;\n            let result = results.get(id);\n            if (!result) continue;\n            pairings.push(\n                <div id={id} className={styles.pairing} key={['pairings', w, b].join('.')} >\n                    <div\n                        className={['playerInfo', styles.playerInfo, w === 'bye' ? styles.bye : ''].join(' ')}\n                        id={w}\n                        onClick={(e: React.MouseEvent<HTMLDivElement>) => props.setDisplayPlayer((e.target as HTMLDivElement).id)}\n                    >{wDisplay}</div>\n                    {result[0] !== null || result[1] !== null\n                        ? <div className={styles.resultsBridge}>\n                            <div className={styles.setResult}>{result[0] ?? '\\u200b'}</div>\n                            <div className={styles.neutral}>\n                                <AiOutlineMinus />\n                            </div>\n                            <div className={styles.setResult}>{result[1] ?? '\\u200b'}</div>\n                        </div>\n                        : <SinglePairing\n                            tournamentID={props.id}\n                            className={styles.resultsBridge}\n                            inputClassName={styles.inputResult}\n                            hidden={{\n                                W: w,\n                                B: b\n                            }}\n                            validate={validateForm}\n                            handleSubmit={async (e) => {\n                                await props.updatePlayerDict();\n                                getPairings();\n                                return e;\n                            }}\n                        />}\n                    <div\n                        className={['playerInfo', styles.playerInfo, styles.playerInfo, b === 'bye' ? styles.bye : ''].join(' ')}\n                        id={b}\n                        onClick={(e: React.MouseEvent<HTMLDivElement>) => props.setDisplayPlayer((e.target as HTMLDivElement).id)}\n                    >{bDisplay}</div>\n                </div>\n            );\n        }\n        return pairings;\n    }\n\n    useEffect(() => {\n        getPairings();\n    }, [getPairings, round]);\n\n    return (\n        <div className={styles.pairings}>\n            <div className={['topBanner', styles.topBanner].join(' ')}>\n                Pairings\n            </div>\n            <div className={styles.pairingContainer}>\n                {Listing()}\n            </div>\n            <div className={['bottomBanner', styles.statusBar].join(' ')}>\n                <div className={['button'].join(' ')} onClick={props.toggleSidebar}>\n                    <TiThMenu />\n                </div>\n                {generateNextButton()}\n                <div className={['button'].join(' ')} onClick={props.toggleSettings}>\n                    <IoIosSettings />\n                </div>\n            </div>\n        </div>\n    );\n\n}","import React, { ReactElement } from 'react';\n\nexport function Bottom(...arr: [\n    (() => Promise<void> | void),\n    ReactElement | string,\n    string\n][]): ReactElement[] {\n    let buttons = [] as ReactElement[];\n    for (let item of arr) {\n        if (!item) continue;\n        let [func, icon, name] = item;\n        buttons.push(<div key={['button', name].join('.')} onClick={func} className='button'>\n            {icon}\n        </div>);\n    }\n    return buttons;\n}","import React, { ReactElement, useEffect, CSSProperties, useState } from 'react';\nimport { AiOutlineLeft } from 'react-icons/ai';\nimport styles from '../css/components.module.css';\n\ninterface SectionProps {\n    children?: ReactElement[]\n    header: string | ReactElement\n    useInternalState?: boolean\n    value?: string\n    expanded?: boolean\n    setExpanded?: (state: boolean, action: string) => void\n    style?: CSSProperties\n    id?: string\n}\n\nexport function SectionBreak() {\n\n    return (\n        <div className={styles.sectionContainer}>\n            <div className={[styles.sectionHeader, 'topBanner'].join(' ')}>\n                <div className={styles.sectionHeaderText} />\n            </div>\n        </div>\n    );\n}\n\nexport default function CollapsableSection(props: SectionProps) {\n\n    const [internalExpanded, setExpanded] = useState(props.expanded || true);\n\n    let expanded = props.useInternalState ? internalExpanded : props.expanded;\n\n\tuseEffect((): void => {\n\t\tlet headers = Array.from(document.querySelectorAll('.' + [styles.sectionListWrapper].join('.'))) as HTMLDivElement[];\n\t\tfor (let h of headers) {\n\t\t\tlet list = h.firstElementChild as HTMLDivElement;\n\t\t\th.style.height = h.className.includes(styles.expanded) ? list.getBoundingClientRect().height + 'px' : '0px';\n\t\t}\n\t}, [expanded]);\n\n    return (\n        <div className={styles.sectionContainer} style={props.style}>\n            <div className={[styles.sectionHeader, 'topBanner'].join(' ')}>\n                <div className={styles.sectionHeaderText} onClick={() => props.useInternalState ? setExpanded(!expanded) : props.setExpanded(!expanded, props.value)}>\n                    {props.header}\n                </div>\n                {!props.children.length ?\n                    null : \n                    <div className={styles.sectionToggle} onClick={() => props.useInternalState ? setExpanded(!expanded) : props.setExpanded(!expanded, props.value)}>\n                        <AiOutlineLeft style={{\n                            transform: expanded ? 'rotate(-90deg)' : 'rotate(0deg)'\n                        }}/>\n                    </div>\n                }\n            </div>\n            <div className={[styles.sectionListWrapper, expanded ? styles.expanded : ''].join(' ')} style={{\n                height: '0px'\n            }}>\n                <div className={[styles.sectionList].join(' ')} id={props.id}>\n                    {props.children}\n                </div>\n            </div>\n        </div>\n    )\n}","import React, { ReactElement, FormEvent } from 'react';\nimport { render } from 'react-dom';\nimport CSV from 'papaparse';\nimport url from 'url';\nimport { Player, TournamentPlayers, ID, TournamentStandings, TournamentSettings } from '../interfaces';\nimport { GET, POST, server, FORM} from '../utils/requests';\n\nimport styles from '../css/sidebar.module.css';\nimport { AiFillEdit, AiOutlineClose, AiOutlineCheck } from 'react-icons/ai';\nimport { MdRefresh } from 'react-icons/md';\nimport { IoMdClose } from 'react-icons/io';\nimport { Bottom } from '../components/Buttons';\nimport CollapsableSection, { SectionBreak } from '../components/CollapsableSection';\n\nexport default class Sidebar extends React.Component<{\n\n\tplayerDict: Map<ID, Player>\n\tplayerDictKey: string //required to force a reload\n\tupdatePlayerDict: () => void\n\tmodifyPlayerDict: (p: Player) => void\n\n\tsettings: TournamentSettings\n\tid: string\n\twideLeft: boolean\n\tsetDisplayPlayer: (id: string) => void\n\tcheckIfEnoughPlayers: (reload?: boolean) => void\n}, {\n\tround: number\n\tplayers: TournamentPlayers\n\tlinkedState: TournamentStandings\n}> {\n\n\tpublic state = {\n\t\tround: 0,\n\t\tplayers: {} as TournamentPlayers,\n\t\tlinkedState: {} as TournamentStandings\n\t}\n\n\t/**\n\t * The fundamental method. Called everytime there's a change to the player list. The backbone of this element.\n\t */\n\tpublic updatePlayerList = async (refresh?: boolean | void): Promise<void> => {\n\t\tlet { round, players } = refresh !== false ? await this.updatePlayerState() : {round: this.state.round, players: this.state.linkedState};\n\t\tlet state = {} as TournamentPlayers;\n\t\tfor (let [k, v] of Object.entries(players)) {\n\t\t\tstate[k] = v.map((id: string) => {\n\t\t\t\tlet player = this.props.playerDict.get(id);\n\t\t\t\t//if (!player) console.error('Unmatched ID: ' + id);\n\t\t\t\treturn player;\n\t\t\t}).sort((a: Player, b: Player) => b.rating - a.rating).filter((v) => v);\n\t\t}\n\t\tthis.setState({\n\t\t\tround,\n\t\t\tplayers: state\n\t\t});\n\t\tthis.props.checkIfEnoughPlayers(false);\n\t}\n\n\tprivate updatePlayerState = (): Promise<{round: number, players: TournamentStandings}> => {\n\t\treturn GET({ url: '/tournament/' + this.props.id + '/getState' })\n\t\t\t.then(({round, players}: {round: number, players: TournamentStandings}) => {\n\t\t\t\tthis.setState({ linkedState: players });\n\t\t\t\treturn {round, players};\n\t\t\t});\n\t}\n\n\t/** EDITING SECTION */\n\n\tprivate get requireLastName() {\n\t\treturn this.props.settings.competitors === 'individual';\n\t}\n\n\t/**\n\t * Allows users to press the 'Escape' key to exit editing an existing player\n\t * Returns editing fields back to ReactElement submitted boxes\n\t */\n\tprivate editToDisplay = (child: HTMLDivElement, player: Player): void => {\n\t\tlet parent = child as HTMLDivElement;\n\t\twhile (parent.parentElement) {\n\t\t\tif (parent.id === player.id) break;\n\t\t\telse parent = parent.parentElement as HTMLDivElement;\n\t\t}\n\t\tlet dom = parent.parentElement.cloneNode() as HTMLDivElement;\n\t\trender(this.generateActivePlayer(player, 0), dom);\n\t\tparent.replaceWith(dom.firstChild);\n\t}\n\n\t/**\n\t * Allows users to press the 'Escape' key to exit editing an existing player\n\t */\n\tprivate editEscape = (e: React.KeyboardEvent<HTMLFormElement>, player: Player): void => {\n\t\tconst ESCAPE_KEY = 27;\n\t\tif (e.keyCode !== ESCAPE_KEY) return;\n\t\tthis.editToDisplay(e.target as HTMLDivElement, player);\n\t}\n\n\t/**\n\t * Triggered whenever a user hits the 'edit' key. Creates Form DOM elements that can be used to send off a post request\n\t */\n\tprivate editPlayer = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n\t\tlet button = e.target as HTMLButtonElement;\n\t\tif (button.constructor.name !== 'HTMLButtonElement') return;\n\t\tlet playerLine = button.parentNode as HTMLDivElement;\n\t\tlet id = playerLine.id;\n\t\tlet scoreSection = playerLine.parentNode as HTMLDivElement;\n\t\tlet score = scoreSection.id.split('.').slice(1).join('.');\n\t\tlet player = this.state.players[score.toString()].find(p => p.id === id);\n\t\tplayerLine.innerHTML = '';\n\t\tlet elem = this.generateForm(id, player.firstName, player.lastName, player.rating, player);\n\t\trender(elem, playerLine);\n\t\tlet child = playerLine.firstChild.firstChild.firstChild as HTMLInputElement;\n\t\tchild.focus();\n\t}\n\n\tupdatePlayer(id: ID): Promise<Player> {\n\t\treturn GET({\n\t\t\turl: '/tournament/' + this.props.id + '/fetchPlayer',\n\t\t\tparams: { id }\n\t\t})\n\t\t\t.then((player: Player) => {\n\t\t\t\tthis.props.modifyPlayerDict(player);\n\t\t\t\treturn player;\n\t\t\t});\n\t}\n\t\n\tgenerateForm(id: string, firstName: string, lastName: string, rating: number, player: Player): JSX.Element {\n\t\treturn (\n\t\t\t<div key={['scoreSectionEdited', id].join('.')} className={styles.scoreSection}>\n\t\t\t\t<form\n\t\t\t\t\ttarget='_self'\n\t\t\t\t\tonKeyDown={(e) => this.editEscape(e, player)}\n\t\t\t\t\tonSubmit={async (e: FormEvent<HTMLFormElement>): Promise<void> => FORM(e)\n\t\t\t\t\t\t.then(this.updatePlayerList)\n\t\t\t\t\t\t.then(async () => {\n\t\t\t\t\t\t\tlet newPlayer = await this.updatePlayer(player.id);\n\t\t\t\t\t\t\tthis.editToDisplay(e.target as HTMLDivElement, newPlayer);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tmethod='POST'\n\t\t\t\t\taction={url.resolve(server, ['tournament', this.props.id, 'editPlayer'].join('/'))}\n\t\t\t\t>\n\t\t\t\t\t<input type='text' className={styles.input} name='firstName' defaultValue={firstName} required style={{width: this.requireLastName ? '25%' : '65%'}} />\n\t\t\t\t\t<input type='text' className={styles.input} name='lastName' defaultValue={lastName} required={this.requireLastName} style={{width: '40%', display: this.requireLastName ? 'block' : 'none'}}/>\n\t\t\t\t\t<input type='number' className={styles.input} min={0} max={3200} name='rating' defaultValue={rating} required style={{width: '20%'}}/>\n\t\t\t\t\t<input type='hidden' name='id' value={id} required/>\n\t\t\t\t\t<button tabIndex={-1} className={styles.submit}>\n                        <AiOutlineCheck />\n                    </button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t/** CLEARING SECTION */\n\n\tprivate activatePlayer = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n\t\tlet button = e.target as HTMLButtonElement;\n\t\tif (button.constructor.name !== 'HTMLButtonElement') return;\n\t\tlet id = (button.parentNode as HTMLDivElement).id;\n\t\tGET({\n\t\t\turl: '/tournament/' + this.props.id + '/activatePlayer',\n\t\t\tparams: { id }\n\t\t})\n\t\t\t.then(() => this.updatePlayer(id))\n\t\t\t.catch(console.error);\n\t}\n\n\t/**\n\t * Clears a single page. Called when the 'X' button is hit next to a player\n\t */\n\tprivate clearPlayer = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n\t\tlet button = e.target as HTMLButtonElement;\n\t\tif (button.constructor.name !== 'HTMLButtonElement') return;\n\t\tlet id = (button.parentNode as HTMLDivElement).id;\n\t\tGET({\n\t\t\turl: '/tournament/' + this.props.id + '/clearPlayer',\n\t\t\tparams: { id }\n\t\t})\n\t\t\t.then(() => this.updatePlayer(id))\n\t\t\t.catch(console.error);\n\t}\n\n\t/**\n\t * Clears all players. Called when the 'X' button is pressed at the bottom of the sidebar\n\t */\n\tprivate clearPlayerList = async (): Promise<void> => {\n\t\tawait GET({ url: '/tournament/' + this.props.id + '/clearPlayers' }).catch(console.error);\n\t\tthis.props.checkIfEnoughPlayers();\n\t}\n\n\t/** RENDERING SECTION */\n\n\tprivate handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n\t\tlet text = e.clipboardData.getData('text').toString();\n\t\tif (!text.trim()) return;\n\t\tif (!text.split('\\n').length && text.split(',').length && text.split('\\t').length) return;\n\t\te.preventDefault();\n\t\tlet json = CSV.parse(text, {\n\t\t\tdelimitersToGuess: [',', '\\t'],\n\t\t\tdynamicTyping: true,\n\t\t\tfastMode: true\n\t\t} as CSV.ParseConfig) as CSV.ParseResult;\n\t\tlet data = json.data.map((row) => {\n\t\t\tlet [firstName, lastName, rating]: [string, string, number] = row;\n\t\t\tif (!this.requireLastName) [firstName, rating, lastName] = [...row, ''];\n\t\t\tif (!firstName || (!lastName && this.requireLastName) || rating === null || rating === undefined) return null;\n\t\t\ttry {\n\t\t\t\tif (typeof firstName !== 'string') throw [firstName, 'string'].join(',');\n\t\t\t\tif (typeof lastName !== 'string' && this.requireLastName) throw [lastName, 'string'].join(',');\n\t\t\t\tif (typeof rating !== 'number') throw [rating, 'number'].join(',');\n\t\t\t\treturn {firstName, lastName, rating};\n\t\t\t} catch (error) {\n\t\t\t\tif (!text.split('\\n').length) return null;\n\t\t\t\tlet e = error.split(',');\n\t\t\t\tconsole.error(new TypeError('Bad input on row ' + row.join(',') + '\\n' + e[0] + ' is not type ' + e[1]));\n\t\t\t\treturn null;\n\t\t\t}\n\t\t})\n\t\t\t.filter(r => r);\n\t\tPOST({\n\t\t\turl: 'tournament/' + this.props.id + '/appendPlayers',\n\t\t\tdata\n\t\t})\n\t\t\t.then(() => Promise.all([this.props.updatePlayerDict(), this.updatePlayerList()]));\n\t}\n\n\tgenerateNewForms(max: number): JSX.Element[] {\n\t\tlet inputs = new Array(max) as JSX.Element[];\n\t\tfor (let i = 0; i < max; i++) {\n\t\t\tlet key = ['playerForm', i].join('.');\n\t\t\tinputs[i] = (\n\t\t\t\t<form\n\t\t\t\t\tid={['addPlayerForm', i].join('.')}\n\t\t\t\t\tref={key}\n\t\t\t\t\tkey={key}\n\t\t\t\t\ttarget='_self'\n\t\t\t\t\tonSubmit={(e: FormEvent<HTMLFormElement>): Promise<void> => FORM(e)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tlet form = e.target as HTMLFormElement;\n\t\t\t\t\t\t\tform.reset();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => Promise.all([this.props.updatePlayerDict(), this.updatePlayerList()]))\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tlet first = this.refs['playerForm.0'] as HTMLFormElement;\n\t\t\t\t\t\t\tlet firstInput = first.childNodes[0] as HTMLInputElement;\n\t\t\t\t\t\t\tfirstInput.focus();\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tmethod='POST'\n\t\t\t\t\taction={url.resolve(server, ['tournament', this.props.id, 'appendPlayer'].join('/'))}\n\t\t\t\t>\n\t\t\t\t\t<input type='text' className={styles.input} name='firstName' placeholder={this.requireLastName ? 'First name' : 'Team name'} required style={{width: this.requireLastName ? '25%' : '65%'}} onPaste={this.handlePaste}/>\n\t\t\t\t\t<input type='text' className={styles.input} name='lastName' placeholder='Last name' required={this.requireLastName} style={{width: '40%', display: this.requireLastName ? 'block' : 'none'}}/>\n\t\t\t\t\t<input type='number' className={styles.input} min={0} max={3200} name='rating' placeholder={this.requireLastName ? 'Rating' : 'Av. Rating'} required style={{width: '20%'}}/>\n                    <button tabIndex={-1} className={styles.submit}>\n                        <AiOutlineCheck />\n                    </button>\n\t\t\t\t</form>\n\t\t\t);\n\t\t}\n\t\treturn inputs;\n\t}\n\n\tprivate generateActivePlayer = (player: Player, j: number): ReactElement => {\n\t\tlet displayName = this.requireLastName ? [player.firstName, player.lastName].join(' ') : player.firstName;\n\t\treturn (\n\t\t\t<div key={['playerLine', j].join('.')} id={player.id} className={styles.playerLine}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={['playerInfo', styles.playerInfo, !player.active ? styles.playerInactive : ''].join(' ')}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tgridColumn: this.state.round && !this.props.settings.allowNewPlayers ? '1 / span 3' : undefined\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={(e: React.MouseEvent<HTMLDivElement>) => this.props.setDisplayPlayer((e.target as HTMLDivElement).parentElement.id)}\n\t\t\t\t>\n\t\t\t\t\t{displayName} ({player.rating.toString()}) {this.state.round && (player.played < this.state.round) ? '*' : ''}\n\t\t\t\t</div>\n\t\t\t\t{this.state.round && !this.props.settings.allowNewPlayers ? null : <>\n\t\t\t\t\t<button name='edit' className={styles.edit} onClick={(this.editPlayer)} >\n                        <AiFillEdit />\n                    </button>\n\t\t\t\t\t{player.active ?\n\t\t\t\t\t\t<button name='cancel' className={styles.cancel} onClick={(this.clearPlayer)}>\n                            <AiOutlineClose />\n                        </button> :\n\t\t\t\t\t\t<button name='active' className={styles.activate} onClick={(this.activatePlayer)}>\n                            <AiOutlineCheck />\n                        </button>\n\t\t\t\t\t}\n\t\t\t\t</>}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tgenerateActivePlayerList(): ReactElement[] {\n\t\tlet list = [] as ReactElement[];\n\t\tlet players = this.state.players;\n\t\tfor (let i = this.state.round; i >= 0; i-= 0.5) {\n\t\t\tlet score = i.toString();\n            if (!players[score] || !players[score].length) continue;\n            let section = <CollapsableSection\n                header={score + ' points'}\n                useInternalState={true}\n                id={['container', score].join('.')}\n            >\n                {players[score].map(this.generateActivePlayer)}\t\n            </CollapsableSection>\n            list.push(section);\n\t\t}\n\t\treturn list;\n\t}\n\n\tprivate prevPropsPlayerDict: Map<ID, Player> = new Map();\n\tprivate prevPropsPlayerDictKey: string;\n\tcomponentDidUpdate() {\n\t\tif (!this.props.playerDict.size) return;\n\t\tif (Array.from(this.props.playerDict.keys()).some(k => !this.prevPropsPlayerDict.get(k))) return this.triggerReload();\n\t\tif (this.props.playerDictKey !== this.prevPropsPlayerDictKey) return this.triggerReload();\n\t\tlet currDict = Array.from(this.props.playerDict.values());\n\t\tlet prevDict = Array.from(this.prevPropsPlayerDict.values());\n\t\tif (JSON.stringify(prevDict) !== JSON.stringify(currDict)) return this.triggerReload();\n\t}\n\t\n\tprivate triggerReload() {\n\t\tthis.prevPropsPlayerDictKey = this.props.playerDictKey;\n\t\tthis.updatePlayerList();\n\t\tthis.prevPropsPlayerDict = this.props.playerDict;\n\t}\n\n\tcomponentDidMount(): void {\n\t\tthis.updatePlayerList();\n\t}\n\n\trender(): ReactElement {\n\n\t\tif (this.props.wideLeft) return null;\n\t\tlet players = this.generateActivePlayerList();\n\t\tlet inputs = this.generateNewForms(Math.max(1, 10 - Object.values(this.state.players).reduce((acc: number, curr: Player[]) => acc += curr.length, 0)));\n\n\t\treturn (\t\t\t\t\t\n\t\t\t<div className={styles.sidebar} >\n\t\t\t\t<div className={styles.topBanner}>\n\t\t\t\t\tTournament Players\n\t\t\t\t</div>\t\n\t\t\t\t<div className={styles.playersSection}>\n\t\t\t\t\t{!players.length ? <div className={styles.scoreSection}>\n\t\t\t\t\t\t<div className={styles.playerLine}>\n\t\t\t\t\t\t\t<div className={styles.sectionHeader}>\n\t\t\t\t\t\t\t\t{players.length ? 'Player List' :'No players added yet'}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div> : null}\n\t\t\t\t\t{players}\n\t\t\t\t\t{this.state.round && !this.props.settings.allowNewPlayers ?\n                        <div className={styles.scoreSection}>\n                            {inputs}\n                        </div>\n                    : null}\n\t\t\t\t\t<SectionBreak />\n\t\t\t\t</div>\n\t\t\t\t<div className='bottomBanner'>\n\t\t\t\t\t{Bottom(\n                        [async () => {\n                            this.props.updatePlayerDict();\n                            this.updatePlayerList();\n                        }, <MdRefresh />, 'refresh'],\n                        this.state.round === 0 ? [async () => {\n                            for (let form of Object.values(this.refs)) {\n                                if (form.constructor.name !== 'HTMLFormElement') continue;\n                                (form as HTMLFormElement).reset();\n                            }\n                            if (this.state.round !== 0) return;\n                            await this.clearPlayerList();\n                            //this.props.updatePlayerDict();\n                            this.updatePlayerList();\n                        }, <IoMdClose />, 'close'] : null\n                    )}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { ReactElement } from 'react';\nimport { GET } from '../utils/requests';\nimport { Player, TournamentSettings, ID, History } from '../interfaces';\n\nimport styles from '../css/profile.module.css';\nimport { IoMdClose } from 'react-icons/io';\nimport { Bottom } from '../components/Buttons';\nimport CollapsableSection, { SectionBreak } from '../components/CollapsableSection';\n\nexport default class Profile extends React.Component<{\n\tid: string\n\tplayerID: string\n\tsetDisplayPlayer: (id: string) => void\n\tplayerDict: Map<ID, Player>\n\tmodifyPlayerDict: (p: Player, hash: string) => void\n\tsettings: TournamentSettings\n\tplayerDictKey?: string\n}, {\n\tplayerID: string\n\tplayer: Player\n}> {\n\n\tpublic state = {\n\t\tplayerID: '',\n\t\tplayer: null as Player\n\t}\n\n\tupdatePlayerFromProps(refetch?: boolean) {\n\t\tthis.setState({ playerID: this.props.playerID });\t\t\n\t\tif (!this.props.playerID) {\n\t\t\tthis.setState({player: null as Player});\n\t\t\treturn;\n\t\t}\n\t\tif (refetch === false) {\n\t\t\tlet player = this.props.playerDict.get(this.props.playerID);\n\t\t\tthis.setState({ player });\n\t\t} else {\n\t\t\treturn GET({\n\t\t\t\turl: '/tournament/' + this.props.id + '/fetchPlayer',\n\t\t\t\tparams: {\n\t\t\t\t\tid: this.props.playerID\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then((player: Player) => {\n\t\t\t\t\tif (!player.histories[0]) player.histories[0] = null;\n\t\t\t\t\tthis.setState({ player });\n\t\t\t\t});\n\t\t}\n\t}\n\n\tprivate getNameFromPlayer(player: Player): string {\n\t\tif (!player) return '\\u200b';\n\t\tif (this.props.settings.competitors === 'individual') return [player.firstName, player.lastName].join(' ');\n\t\telse return player.firstName;\n\t}\n\n\tcomponentDidUpdate(prevProps: { dataHash?: string, playerDictKey?: string }) {\n\t\tif (this.state.playerID !== this.props.playerID) this.updatePlayerFromProps(false);\n\t\telse if (this.props.playerDictKey !== prevProps.playerDictKey) this.updatePlayerFromProps(false);\n\t}\n\n\tprivate getDisplayName(id: ID): string {\n        if (!id) return undefined;\n\t\tif (id === 'bye') return 'BYE';\n\t\tlet player = this.props.playerDict.get(id);\n\t\tif (!player) return id;\n\t\tlet displayName: string;\n\t\tif (this.props.settings.competitors === 'individual') displayName = [player.firstName, player.lastName].join(' ');\n\t\telse displayName = player.firstName;\n\t\treturn displayName;\n    }\n    \n    renderEntry([k, v]: [string, any], i: number): ReactElement {\n        if (k === 'Playing' && v) {\n            return (\n                <div className={styles.row} key={['row', i].join('.')}>\n                    <div className='fieldBox'>{k + ':'}</div>\n                    <div\n                        className='playerInfo'\n                        id={v as string}\n                        onClick={(e: React.MouseEvent<HTMLDivElement>) => this.props.setDisplayPlayer((e.target as HTMLDivElement).id)}\n                    >{v}</div>\n                </div>\n            );\n        } else {\n            return (\n                <div className={styles.row} key={['row', i].join('.')}>\n                    <div className='fieldBox'>{k + ':'}</div>\n                    <div className='fieldBox'>{v ?? '\\u200b'}</div>\n                </div>\n            );\n        }\n    }\n\n\trender(): ReactElement {\n        if (!this.state.player) return null;\n        let player = this.state.player;\n        let Name = this.getNameFromPlayer(player);\n\t\tconst profile = !player ? {} : {\n            'Unique ID': player.id,\n            Status: player.active !== false ? 'Active' : 'Inactive',\n\t\t\tRating: player.rating,\n\t\t\t'Performance rating': player.performanceRating,\n\t\t\tPlaying: this.getDisplayName(player.isPlaying)\n\t\t};\n        \n\n\t\tconst total = (Math.max(player.histories.length, 1) - 1 - (player.isPlaying ? 1 : 0)).toString();\n\t\tconst totalGames = player.histories.slice(1).reduce((acc, curr) => acc += curr.played, 0);\n\t\tconst scores = !player ? {} : {\n\t\t\tScore: player.score.toString() + ' / ' + total,\n\t\t\t'Game score': player.gamePoints.toString() + ' / ' + totalGames.toString(),\n\t\t\t'Expected score': player.expectedScore.toFixed(2),\n\t\t\t'Expected game score': player.expectedGameScore.toFixed(2) + ' / ' + totalGames,\n\t\t};\n\t\tif (!this.props.settings.displayPoints) {\n\t\t\tdelete scores['Game score'];\n\t\t\tdelete scores['Expected game score'];\n\t\t}\n\t\tlet history = player.histories;\n\n\t\treturn (\n\t\t\t<div className={styles.sidebar}>\n\t\t\t\t<div className={styles.profile}>\t\t\n\t\t\t\t\t<div className='topBanner'>\n\t\t\t\t\t\t{Name}\n\t\t\t\t\t</div>\t\n\t\t\t\t\t{Object.entries(profile).map(this.renderEntry)}\n                    <CollapsableSection\n                        header='Score'\n                        useInternalState={true}\n                        style={{ gridColumn: '1 / span 2' }}\n                    >\n\t\t\t\t\t    {Object.entries(scores).map(this.renderEntry)}\n                    </CollapsableSection>\n                    <CollapsableSection\n                        header='Results'\n                        useInternalState={true}\n                        style={{ gridColumn: '1 / span 2' }}\n                    >\n                        {history.map((minPlayer: History, i: number): ReactElement => {\n                            if (i === 0 || !minPlayer) return null;\n                            let { id, colour } = minPlayer;\n                            let result = minPlayer[this.props.settings.displayPoints];\n                            return (\n                                <div className={styles.resultsRow} key={['row', 'history', i].join('.')}>\n                                    <div className='fieldBox'>{i}</div>\n                                    <div\n                                        className='playerInfo'\n                                        id={id}\n                                        onClick={(e: React.MouseEvent<HTMLDivElement>) => this.props.setDisplayPlayer((e.target as HTMLDivElement).id)}\n                                    >{this.getDisplayName(id)}</div>\n                                    <div className='fieldBox'>{colour || '\\u200b'}</div>\n                                    <div className='fieldBox'>{typeof result !== 'undefined' && result !== null ? result : '\\u200b'}</div>\n                                </div>\n                            );\n                        })}\n                    </CollapsableSection>\n                    <SectionBreak />\n\t\t\t\t</div>\n\t\t\t\t<div className='bottomBanner'>\n\t\t\t\t\t{Bottom([() => this.props.setDisplayPlayer(''), <IoMdClose />, 'close'])}\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { ReactElement } from 'react';\nimport { EditableField } from '../components/';\nimport { TournamentSettings, TournamentStatus, Player } from '../interfaces';\nimport url from 'url';\n\nimport styles from '../css/profile.module.css';\nimport { server } from '../utils/requests';\nimport { defaultSettings, TournamentSetting } from '../assets/settings';\nimport { capitalise } from '../utils/prototype';\nimport { Bottom } from '../components/Buttons';\nimport { IoMdClose } from 'react-icons/io';\nimport CollapsableSection, { SectionBreak } from '../components/CollapsableSection';\n\nexport default class Settings extends React.Component<{\n\tupdateTournamentSettings: () => Promise<void>\n\tupdateSetting: (k: string, v: any) => Promise<void>\n\tupdateRounds: () => Promise<void>\n\tstatus: TournamentStatus\n\tsettings: TournamentSettings\n\ttoggleSettings: () => void\n\tsetLastRound: (override: boolean) => void // need to include a method to cancel a last round token when the total rounds is incremented\n\ttriggerError: (message: string) => void\n\tplayers: Player[]\n\trounds: Date[]\n}, {\n\tsectionExpando: string;\n}> {\n\n\tpublic state = {\n\t\tsectionExpando: 'general'\n\t}\n\n\thandleToggle = (k: string, v: any, def: {\n\t\tname?: string,\n\t\tenum?: string[],\n\t\tconvert?: (v: any) => string,\n\t\ttype?: string,\n\t\tlocked?: boolean,\n\t\tlockOnInit?: boolean\n\t}) => {\n\t\ttry {\n\t\t\tlet value: any;\n\t\t\tif (def.enum) {\n\t\t\t\tlet index = def.enum.indexOf(v);\n\t\t\t\tif (index === -1) console.error('Invalid setting value ' + k + ': ' + v);\n\t\t\t\tlet setIndex = (index + 1) % def.enum.length;\n\t\t\t\tvalue = def.enum[setIndex];\n\t\t\t} else\n\t\t\tif (def.type === 'boolean') {\n\t\t\t\tvalue = !v;\n\t\t\t} else\n\t\t\tif (def.type === 'number') {\n\n\t\t\t\tif (v === 'Infinity') value = Infinity as number;\n\t\t\t\telse if (v === '∞') value = Infinity as number;\n\t\t\t\telse v = Number(v) as number;\n\n\t\t\t\tif (k === 'totalRounds') {\n\t\t\t\t\tif (v <= this.props.status.round) throw new Error('Can\\'t make total number of rounds less than current round number');\n\t\t\t\t\tif (v !== Infinity && v >= 100) throw new Error('Can\\'t make total number of rounds more than 100');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn v;\n\t\t\t}\n\t\t\tthis.props.updateSetting(k, value);\n\t\t} catch (e) {\n\t\t\tif (e && e.message) this.props.triggerError(e.message);\n\t\t}\n\t}\n\n\tprivate modifyHeightValues = (): void => {\n\t\tlet headers = Array.from(document.querySelectorAll('.' + [styles.sectionListWrapper].join('.'))) as HTMLDivElement[];\n\t\tfor (let h of headers) {\n\t\t\tlet list = h.firstElementChild as HTMLDivElement;\n\t\t\th.style.height = h.className.includes(styles.expanded) ? list.getBoundingClientRect().height + 'px' : '0px';\n\t\t}\n\t}\n\n\tprivate watchProps = Object.values(defaultSettings).reduce((acc, curr) => {\n\t\tfor (let def of Object.values(curr)) {\n\t\t\tif (def.show) acc.push(...Object.keys(def.show));\n\t\t}\n\t\treturn acc;\n\t}, []) as (keyof TournamentSettings)[];\n\tcomponentDidUpdate(prevProps: { settings: TournamentSettings}, prevState: { sectionExpando: string }) {\n\t\tfor (let k of this.watchProps) {\n\t\t\tif (prevProps.settings[k] !== this.props.settings[k]) this.modifyHeightValues();\n\t\t}\n\t}\n    \n    renderRound = (i: number) => {\n        return (\n            <div className={[styles.row, styles.roundRow].join(' ')} key={['row', i].join('.')}>\n                <div className='fieldBox'>\n                    {`Round ${i}:`}\n                </div>\n                <EditableField\n                    handleSubmit={this.props.updateSetting}\n                    content={this.props.rounds[i] ? this.props.rounds[i].toString() : ''}\n                    defaultEditContent={new Date(Date.now()).toISOString()}\n                    url={url.resolve(server, ['tournament', this.props.status.id, 'updateRound'].join('/'))}\n                    inputType='datetime-local'\n                    onSubmitSuccess={(e) => {\n                        this.props.updateRounds();\n                        return e;\n                    }}\n                    additionalStyles={{\n                        editableField: styles.editableField,\n                        input: styles.input,\n                    }}\n                    additionalInputProps={{}}\n                    name={i.toString()}\n                    show={{\n                        submit: true,\n                        increment: true\n                    }}\n                />\n            </div>\n        );\n    }\n\n\trenderEntry = (([k, def]: [keyof TournamentSettings, TournamentSetting], i: number): ReactElement => {\n        let hidden = false;\n        if (def.show) {\n            for (let [k, v] of Object.entries(def.show)) {\n                let value = this.props.settings[k as keyof TournamentSettings];\n                if (value !== v) hidden = true;\n            }\n        }\n        \n\t\tlet locked = false;\n\t\tif (def.locked) locked = true;\n        else if (def.lockOnInit && this.props.status.round) locked = true;\n        \n        let v = this.props.settings[k as keyof TournamentSettings] ?? def.defaultValue;\n\t\tlet content = def.convert && !def.value ? def.convert(v) : v as string;\n\t\tlet displayContent = typeof content !== 'undefined' ? content.toString() : '\\u200b';\n\t\treturn (\n\t\t\t<div className={styles.row} key={['row', i].join('.')} style={{\n\t\t\t\theight: def.show ? hidden ? '0px' : '29px' : undefined\n\t\t\t}}>\n\t\t\t\t<div className={['fieldBox', def.show ? styles.semiPresent : ''].join(' ')}>\n\t\t\t\t\t{def.name}\n\t\t\t\t\t{def.name.endsWith('?') ? '' : ':'}\n\t\t\t\t</div>\n\t\t\t\t{(() => {\n\t\t\t\t\tif (locked || def.value) {\n\t\t\t\t\t\treturn <div className={['fieldBox', styles.locked].join(' ')}>\n\t\t\t\t\t\t\t{def.value ?def.convert(def.value(this.props.status, this.props.players)) : displayContent}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t} else\n\t\t\t\t\tif (def.type === 'number') {\n\t\t\t\t\t\treturn <EditableField\n\t\t\t\t\t\t\thandleSubmit={this.props.updateSetting}\n\t\t\t\t\t\t\tcontent={displayContent}\n\t\t\t\t\t\t\turl={url.resolve(server, ['tournament', this.props.status.id, 'updateSetting'].join('/'))}\n\t\t\t\t\t\t\tinputType='number'\n\t\t\t\t\t\t\tonSubmitSuccess={(e) => {\n\t\t\t\t\t\t\t\tthis.props.updateTournamentSettings();\n\t\t\t\t\t\t\t\treturn e;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tadditionalStyles={{\n\t\t\t\t\t\t\t\teditableField: styles.editableField,\n\t\t\t\t\t\t\t\tinput: styles.input\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tname={k}\n\t\t\t\t\t\t\tadditionalInputProps={def.nb}\n\t\t\t\t\t\t\tshow={{\n\t\t\t\t\t\t\t\tsubmit: true,\n\t\t\t\t\t\t\t\tincrement: true,\n\t\t\t\t\t\t\t\t...def.allow\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\tclassName={['fieldBox', styles.editable].join(' ')}\n\t\t\t\t\t\t\tonClick={() => this.handleToggle(k, v, def)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{displayContent}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t})()}\n\t\t\t</div>\n\t\t);\n\t});\n\n\trender(): ReactElement {\n\t\treturn (\n\t\t\t<div className={styles.sidebar}>\n\t\t\t\t<div className={styles.profile} >\t\t\t\t\n\t\t\t\t\t<div className='topBanner'>\n\t\t\t\t\t\tSettings\n\t\t\t\t\t</div>\n\t\t\t\t\t{Object.entries(defaultSettings).map(([section, data], i): ReactElement => {\n                        return (\n                            <CollapsableSection\n                                key={section}\n                                value={section}\n                                header={capitalise(section)}\n                                expanded={this.state.sectionExpando === section}\n                                setExpanded={(state: boolean, action: string) => this.setState({\n                                    sectionExpando: state ? action : ''\n                                })}\n                            >\n                                {(Object.entries(data) as [keyof TournamentSettings, TournamentSetting][])\n                                    .map(this.renderEntry)}\n                            </CollapsableSection>\n                        )\n\t\t\t\t\t})}\n\t\t\t\t\t{(() => {\n\t\t\t\t\t\tlet entries = [];\n\t\t\t\t\t\tlet length = this.props.settings.totalRounds === Infinity || this.props.settings.totalRounds === 'Infinity' ? Math.max(this.props.rounds.length, 1) : this.props.settings.totalRounds;\n\t\t\t\t\t\tfor (let i = 1; i <= length; i++) entries.push(i);\n\n                        return <CollapsableSection\n                            key={'rounds'}\n                            value={'rounds'}\n                            header={'Rounds'}\n                            expanded={this.state.sectionExpando === 'rounds'}\n                            setExpanded={(state: boolean, action: string) => this.setState({\n                                sectionExpando: state ? action : ''\n                            })}\n                        >\n                           {entries.map(this.renderRound)}\n                        </CollapsableSection>\t\t\t\t\t\t\n\t\t\t\t\t})()}\n\t\t\t\t\t<SectionBreak />\n\t\t\t\t</div>\n\t\t\t\t<div className='bottomBanner'>\n\t\t\t\t\t{Bottom([\n                        this.props.toggleSettings,\n                        <IoMdClose />,\n                        'close'\n                    ])}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}","import React, { ReactElement } from 'react';\nimport Grid from '../components/Grid';\nimport { TournamentStatus, Player, TournamentSettings } from '../interfaces';\n\nimport styles from '../css/crosstable.module.css';\nimport { MdExitToApp } from 'react-icons/md';\n\nexport default class CrossTable extends React.Component<{\n\tsetDisplayPlayer: (id: string) => void\n\twide: boolean\n\tshow: () => void\n\tstatus: TournamentStatus\n\tplayers: Player[]\n\tsettings: TournamentSettings\n}, {\n\tsortValue: string,\n\tbyRounds: boolean\n}> {\n\n\tpublic state = {\n\t\tsortValue: 'score',\n\t\tbyRounds: true\n\t}\n\n\tget bodyByRobin(): JSX.Element[][] {\n\t\treturn [[]];\n\t}\n\n\tget totalRounds():number {\n\t\tlet totalRounds: number;\n\t\tif (this.props.status.round > this.props.settings.totalRounds) totalRounds = this.props.status.round;\n\t\telse if (this.props.settings.totalRounds === 'Infinity') totalRounds = this.props.status.round;\n\t\telse totalRounds = this.props.settings.totalRounds;\n\t\treturn totalRounds;\n\t}\n\n\theader(): {[key: string]: string} {\n\t\tlet rounds = [] as string[];\n\t\t\n\t\tfor (let i = 1; i <= this.totalRounds; i++) {\n\t\t\trounds.push((i).toString());\n\t\t}\n\t\treturn {\n\t\t\tid: '',\n\t\t\tname: 'Name',\n\t\t\trating: 'Rating',\n\t\t\t...Object.entries(rounds).reduce((acc, [k, v]) => { acc['score.' + k] = v; return acc;}, {} as {[key: string]: string}),\n\t\t\tprettyScore: 'Score',\n\t\t\twinPercentage: 'TB',\n\t\t\tperformanceRating: 'Perf',\n\t\t\tratingDifference: 'P. +/-',\n\t\t\texpectedScore: 'Expected',\n\t\t\texpectedDifference: 'E. +/-'\n\t\t}; //{[key: string]: {name: string, sortable: boolean, headerClass: string, bodyClass: string}}\n\t}\n\n\tpublic handleHeaderClick = (sortValue: string): void => {\n\t\tif (sortValue.startsWith('score.')) return;\n\t\tif (sortValue === 'expectedScore') return;\n\t\tif (sortValue === 'prettyScore') sortValue = 'score';\n\t\tthis.setState({ sortValue });\n\t}\n\n\tprivate calcLength = 6;\n\n\tclassNames(): string[] {\n\t\tlet rounds = [] as string[];\n\t\tfor (let i = 1; i <= this.totalRounds; i++) {\n\t\t\trounds.push(styles.resultsCell);\n\t\t}\n\t\treturn [\n\t\t\t'',\n\t\t\t'',\n\t\t\t...rounds,\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t''\n\t\t];\n\t}\n\n\tbodyByRounds(state: { sortValue: string }): JSX.Element[][] {\n\t\treturn this.props.players\n\t\t\t.map((p) => {\n\t\t\t\tlet scores = [] as string[];\n\t\t\t\tfor (let j = 1; j <= this.totalRounds; j++) {\n\t\t\t\t\tlet minPlayer = p.histories[j];\n\t\t\t\t\tif (!j) continue;\n\t\t\t\t\telse if (!minPlayer) scores.push('');\n\t\t\t\t\telse if (typeof minPlayer.match !== 'number') scores.push('*');\n\t\t\t\t\telse if (minPlayer.match === 0.5) scores.push('½');\n\t\t\t\t\telse if (minPlayer.oppRating === undefined) scores.push(minPlayer.match.toString() + ('b'));\n\t\t\t\t\telse scores.push(minPlayer.match.toString());\n\t\t\t\t}\n\t\t\t\tlet ratingDifference = p.performanceRating - p.rating;\n\t\t\t\tlet expectedDifference = p.score - p.expectedScore;\n\t\t\t\treturn {\n\t\t\t\t\tid: p.id,\n\t\t\t\t\tname: this.props.settings.competitors === 'individual' ? [p.firstName, p.lastName].join(' ') : p.firstName,\n\t\t\t\t\trating: p.rating,\n\t\t\t\t\t...Object.entries(scores).reduce((acc, [k, v]) => { acc['score.' + k] = v; return acc;}, {} as {[key: string]: string}),\n\t\t\t\t\tscore: p.score,\n\t\t\t\t\tprettyScore: p.score.toFixed(1) + ' / ' + p.played,\n\t\t\t\t\twinPercentage: p.played === 0 ? '-' : (p.score * 100 / p.played).toFixed(2),\n\t\t\t\t\tperformanceRating: p.performanceRating ? p.performanceRating.toFixed() : '',\n\t\t\t\t\tratingDifference: p.performanceRating ? ratingDifference > 0 ? '+' + ratingDifference.toString() : ratingDifference.toString() : '',\n\t\t\t\t\texpectedScore: p.expectedScore.toFixed(2) + ' / ' + p.played,\n\t\t\t\t\texpectedDifference: expectedDifference > 0 ? '+' + expectedDifference.toFixed(2) : expectedDifference.toFixed(2)\n\t\t\t\t};\n\t\t\t})\n\t\t\t.sort((a, b) => {\n\t\t\t\tif (!(state.sortValue in a)) return 0;\n\t\t\t\tlet x: any, y: any;\n\t\t\t\tif (state.sortValue !== 'name') {\n\t\t\t\t\tx = Number((a as {[key: string]: string | number})[state.sortValue]);\n\t\t\t\t\ty = Number((b as {[key: string]: string | number})[state.sortValue]);\n\t\t\t\t} else {\n\t\t\t\t\tx = a[state.sortValue];\n\t\t\t\t\ty = b[state.sortValue];\n\t\t\t\t}\n\t\t\t\tif (x !== y) return y - x;\n\t\t\t\treturn (b.rating as number) - (a.rating as number);\n\t\t\t})\n\t\t\t.map((p, i) => {\n\t\t\t\tlet rows = [\n\t\t\t\t\t['Ranking', i.toString()],\n\t\t\t\t\t...Object.entries(p)\n\t\t\t\t];\n\t\t\t\treturn rows.filter(([k]) => {\n\t\t\t\t\tif (k === 'id') return false;\n\t\t\t\t\tif (k === 'score') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t}).map(([key, value], j) => {\n\t\t\t\t\tlet isPlayer = j === 1;\n\t\t\t\t\tlet isScore = j > 2 && j < rows.length - this.calcLength;\n\t\t\t\t\treturn (\t\t\t\t\t\t\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tid={isPlayer ? p.id : [value, j].join('.')}\n\t\t\t\t\t\t\tkey={[value, j].join('.')}\n\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\tstyles.cell,\n\t\t\t\t\t\t\t\tisScore ? styles.resultsCell : '',\n\t\t\t\t\t\t\t\tisPlayer ? styles.playerBox : '',\n\t\t\t\t\t\t\t\tj === 0 ? styles.firstColumn : ''\n\t\t\t\t\t\t\t].join(' ')}\n\t\t\t\t\t\t\tonClick={!isPlayer ? () => {} : (e: React.MouseEvent<HTMLDivElement>) => this.props.setDisplayPlayer((e.target as HTMLDivElement).id)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{value || '\\u200b'}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\t\t\n\t}\n\n\trender(): ReactElement {\n\t\t//styles.cell.height = `calc(100vh - ${body.length + 1})`;\n\t\t\n\t\tlet body = this.state.byRounds ? this.bodyByRounds(this.state) : this.bodyByRobin;\n\t\tlet title = `Tournament '${this.props.status.name || this.props.status.id}' results after ${this.props.status.round} rounds`;\n\t\tlet subtitle = '';\n\t\treturn (\n\t\t\t<>\t\t\t\t\n\t\t\t\t<div className={styles.titles}>\n\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t<div>{subtitle}</div>\n\t\t\t\t\t<div className={['button', styles.closeButton].join(' ')} onClick={this.props.show}>\n                        <MdExitToApp />\n                    </div>\n\t\t\t\t</div>\n\t\t\t\t<Grid\n\t\t\t\t\theader={this.header()}\n\t\t\t\t\tbody={body}\n\t\t\t\t\tstyles={styles}\n\t\t\t\t\tbodyClassNames={this.classNames()}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tgridColumn: '1 / span ' + (2 + (this.props.wide ? 1 : 0))\n\t\t\t\t\t}}\n\t\t\t\t\thandleHeaderClick={this.handleHeaderClick}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\t\n\t}\n}","import React, { ReactElement, useState, useEffect, Dispatch, SetStateAction, CSSProperties, useCallback, useReducer, useMemo } from 'react';\nimport { InfoBar, Pairings, Sidebar, Profile, Settings, CrossTable } from './tournament';\nimport { Player, TournamentSettings, ID, TournamentStatus } from './interfaces';\nimport { GET, POST } from './utils/requests';\n\nimport styles from './css/tournament.module.css';\n\nconst defaultColumns = [30.8, 38.4, 30.8];\n\ninterface TournamentProps {\n\tid: string\n\tcloseTournament: () => void\n\ttriggerError: (message: string) => void\n}\n\nfunction dispatchEvent(eventName: string): void {\n\tlet event = document.createEvent('HTMLEvents') as Event & { eventName: string };\n\tevent.initEvent(eventName, true, true);\n\tevent.eventName = eventName;\n\tdocument.dispatchEvent(event);\n}\n\nfunction MouseEvents({ columns, boundaries, resize, setColumns, setResize, toggleSidebar, toggleSettings, setDisplayPlayerRaw }: {\n\tcolumns: number[],\n\tboundaries: number[],\n\tresize: number,\n\tsetColumns: (columns: number[]) => void\n\tsetResize: Dispatch<SetStateAction<number>>,\n\ttoggleSidebar: ({set}: { set?: boolean }) => void\n\ttoggleSettings: ({set}: { set?: boolean }) => void\n\tsetDisplayPlayerRaw: Dispatch<SetStateAction<string>>\n}): void {\n\n\tconst [mouseClick, setMouseClick] = useState(0);\n\n\tconst handleMouseMove = useCallback((e: MouseEvent) => {\n\t\tlet percentX = e.x / window.innerWidth * 100;\n\t\tif (mouseClick) {\n\t\t\tlet prev = (columns.slice(0, mouseClick - 1).reduce((acc, curr) => acc += curr, 0));\n\t\t\tlet sum = prev + columns[mouseClick - 1] + columns[mouseClick];\n\t\t\tlet left = percentX - prev;\n\t\t\tlet right = sum - percentX;\n\t\t\tlet threshold = 2;\n\t\t\tif (left < threshold) {\n\t\t\t\tright += left;\n\t\t\t\tleft = 0;\n\t\t\t\tif (mouseClick === 1) toggleSidebar({set: false});\n\t\t\t\tdispatchEvent('mouseup');\n\t\t\t} else\n\t\t\tif (right < threshold) {\n\t\t\t\tleft += right;\n\t\t\t\tright = 0;\n\t\t\t\tif (mouseClick === columns.length - 1) {\n\t\t\t\t\tsetDisplayPlayerRaw('');\n\t\t\t\t\ttoggleSettings({set: false});\n\t\t\t\t\tdispatchEvent('mouseup');\n\t\t\t\t}\n\t\t\t}\n\t\t\tcolumns[mouseClick - 1] = left\n\t\t\tcolumns[mouseClick] = right;\n\t\t\tsetColumns(columns.slice(0));\n\t\t} else {\n\t\t\tlet threshold = 1;\n\t\t\tlet index = boundaries.findIndex(b => Math.abs(b - percentX) < threshold);\n\t\t\tif (index === 0 && boundaries[0] === 0) index = -1;\n\t\t\telse if (index === boundaries.length - 1 && boundaries[boundaries.length - 1] === 100) index = -1;\n\t\t\tsetResize(index + 1);\n\t\t}\n\t}, [mouseClick, columns, setDisplayPlayerRaw, toggleSettings, setResize, setColumns, boundaries, toggleSidebar]);\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('mousemove', handleMouseMove);\n\t\treturn () => document.removeEventListener('mousemove', handleMouseMove);\n\t}, [mouseClick, handleMouseMove]);\n\tuseEffect(() => {\n\t\tif (!resize) return;\n\t\tlet callback = () => setMouseClick(resize);\n\t\tdocument.addEventListener('mousedown', callback);\n\t\treturn () => document.removeEventListener('mousedown', callback);\n\t}, [resize, setMouseClick]);\n\tuseEffect(() => {\n\t\tlet callback = () => setMouseClick(0);\n\t\tdocument.addEventListener('mouseup', callback);\n\t\treturn () => document.removeEventListener('mouseup', callback);\n\t}, [resize, setMouseClick]);\n}\n\nexport default function Tournament(props: TournamentProps): ReactElement {\n\n\tconst [columns, setColumns] = useState(defaultColumns);\n\tconst [resize, setResize] = useState(0);\n\tconst boundaries = useMemo(() => \tcolumns.reduce((acc, curr) => {\n\t\tacc.push((acc[acc.length - 1] ?? 0) + curr);\n\t\treturn acc;\n\t}, [] as number[]).slice(0, -1), [columns]);\n\n\tconst [displayPlayer, setDisplayPlayerRaw] = useState('');\n\tconst [crossTable, setCrossTable] = useState(false);\n\tconst [lastRoundOverride, setLastRound] = useState(undefined) as [boolean | undefined, Dispatch<SetStateAction<boolean | undefined>>];\n\tconst [nextRound, toggleNextRound] = useState(false);\n\tconst toggleCrossTable = () => setCrossTable(!crossTable);\n\n\tconst reduceSidebar = useCallback((state: boolean, { set }: { set?: boolean }): boolean => {\n\t\tif (columns[0] === 0) {\n\t\t\tlet _columns = columns.slice(0);\n\t\t\t_columns[0] = defaultColumns[0];\n\t\t\tif (_columns[1] < defaultColumns[0]) _columns = defaultColumns as [number, number, number];\n\t\t\telse _columns[1] = _columns[1] - defaultColumns[0];\n\t\t\tsetColumns(_columns);\n\t\t\treturn true;\n\t\t} else return typeof set === 'boolean' ? set : !state;\n\t}, [columns, setColumns]);\n\n\tconst reduceSettings = useCallback((state: boolean, { set }: { set?: boolean }): boolean => {\n\t\tif (set !== false && boundaries[boundaries.length - 1] === 100) {\n\t\t\tlet _columns = columns.slice(0);\n\t\t\t_columns[_columns.length - 1] = defaultColumns[_columns.length - 1];\n\t\t\tif (_columns[_columns.length - 2] < defaultColumns[_columns.length - 2]) _columns = defaultColumns as [number, number, number];\n\t\t\telse _columns[_columns.length - 2] = _columns[_columns.length - 2] - defaultColumns[_columns.length - 1];\n\t\t\tsetColumns(_columns);\n\t\t\treturn true;\n\t\t} else {\n\t\t\tif (!state) setDisplayPlayerRaw('');\n\t\t\treturn typeof set === 'boolean' ? set : !state;\n\t\t};\n\t}, [columns, setDisplayPlayerRaw, boundaries]);\n\n\tasync function checkIfEnoughPlayers (): Promise<void>\n\tasync function checkIfEnoughPlayers (reload: boolean): Promise<void>\n\tasync function checkIfEnoughPlayers (reload?: boolean): Promise<void> {\n\t\tif (reload !== false) await updatePlayerDict()\n\t\t\t.catch(() => toggleNextRound(false));\n\t\ttoggleNextRound(players.filter(p => p.active !== false).length >= 2);\n\t}\n\t\n\tconst [sidebar, toggleSidebar] = useReducer(reduceSidebar, true);\n\tconst [showSettings, toggleSettings] = useReducer(reduceSettings, true);\n\n\tconst setDisplayPlayer = useCallback((id: string) => {\n\t\tif (columns[0] === 0) {\n\t\t\tlet _columns = columns.slice(0);\n\t\t\t_columns[0] = defaultColumns[0];\n\t\t\tif (_columns[1] < defaultColumns[0]) _columns = defaultColumns as [number, number, number];\n\t\t\telse _columns[1] = _columns[1] - defaultColumns[0];\n\t\t\tsetColumns(_columns);\n\t\t} else if (id && showSettings) toggleSettings({ set: false });\n\t\tsetDisplayPlayerRaw(id);\n\t}, [setColumns, setDisplayPlayerRaw, toggleSettings, columns, showSettings]);\n\n\tconst [playerDictKey, setPlayerDictKey] = useState(Math.random().toString(16).slice(2, 9));\n\tconst reducePlayerDict = useCallback((state: Map<ID, Player>, action: {\n\t\tid?: ID,\n\t\tplayer?: Player,\n\t\tplayers?: Player[],\n\t\thash?: string\n\t}) => {\n\t\tif (action.id) {\n\t\t\tstate.delete(action.id);\n\t\t\tif (action.id === displayPlayer) setDisplayPlayer('');\n\t\t\treturn state;\n\t\t}\n\t\tlet players: Player[];\n\t\tif (action.players) players = action.players;\n\t\telse players = [action.player];\n\t\tfor (let p of players) state.set(p.id, p);\n\t\tsetPlayerDictKey(action.hash || Math.random().toString(16).slice(2, 9));\n\t\treturn state;\n\t}, [setDisplayPlayer, setPlayerDictKey, displayPlayer])\n\n\tconst [status, setStatus] = useState({} as TournamentStatus);\n\tconst [settings, setSettings] = useState({} as TournamentSettings);\n\tconst [rounds, setRounds] = useState([] as Date[]);\n\tconst [players, setPlayers] = useState([] as Player[]);\n\tconst [playerDict, setPlayerDict] = useReducer(reducePlayerDict, new Map() as Map<ID, Player>);\n\n\tMouseEvents({ columns, boundaries, resize, setColumns, setResize, toggleSidebar, toggleSettings, setDisplayPlayerRaw });\n\n\t/* Fetch Data */\n\n\tconst updatePlayerDict = useCallback((): Promise<void> => GET({ url: '/tournament/' + props.id + '/fetchPlayers'})\n\t\t.then((players: Player[]) => {\n\t\t\tsetPlayers(players);\n\t\t\tsetPlayerDictKey(Math.random().toString(16).slice(2, 9));\n\t\t\tsetPlayerDict({ players });\n\t\t}), [props.id, setPlayers, setPlayerDictKey, setPlayerDict]);\n\n\tconst updateTournamentStatus = useCallback((): Promise<void> => GET({ url: '/tournament/' + props.id + '/getStatus'})\n\t\t.then(setStatus), [props.id, setStatus]);\n\n\tconst updateTournamentSettings = useCallback((): Promise<void> => GET({ url: '/tournament/' + props.id + '/getSettings'})\n\t\t.then(setSettings), [props.id, setSettings]);\n\n\tconst updateSetting = useCallback((k: string, v: any): Promise<void> => POST({\n\t\turl: 'tournament/' + props.id + '/updateSetting',\n\t\tdata: {\n\t\t\t[k]: v\n\t\t}\n\t}).then(updateTournamentSettings), [props.id, updateTournamentSettings]);\n\n\tconst updateRounds = useCallback((): Promise<void> => GET({ url: '/tournament/' + props.id + '/fetchRounds'})\n\t\t.then(setRounds), [props.id, setRounds]);\n\t\n\tuseEffect(() => {\n\t\tif (!props.id) return null;\n\t\tupdateRounds();\n\t\tupdateTournamentStatus();\n\t\tupdateTournamentSettings();\n\t\tupdatePlayerDict();\n\t}, [props.id, updateRounds, updateTournamentStatus, updateTournamentSettings, updatePlayerDict]);//, updateRounds, updateTournamentStatus, updateTournamentSettings, updatePlayerDict]);\n\n\tif (!props.id) return null;\n\n\tif (crossTable) return (\n\t\t<div className={styles.tournament}>\n\t\t\t<CrossTable\n\t\t\t\tshow={toggleCrossTable}\n\t\t\t\tsetDisplayPlayer={setDisplayPlayer}\n\t\t\t\twide={!displayPlayer && !showSettings}\n\t\t\t\tstatus={status}\n\t\t\t\tplayers={players}\n\t\t\t\tsettings={settings}\n\t\t\t/>\n\t\t\t<Profile\n\t\t\t\tid={props.id}\n\t\t\t\tplayerID={displayPlayer}\n\t\t\t\tsetDisplayPlayer={setDisplayPlayer}\n\t\t\t\tplayerDict={playerDict}\n\t\t\t\tmodifyPlayerDict={(player: Player, hash: string) => setPlayerDict({ player, hash })}\n\t\t\t\tsettings={settings}\n\t\t\t/>\n\t\t</div>\t\t\n\t);\n\n\tlet style: CSSProperties = {};\n\tif (resize) style.cursor = 'ew-resize';\n\n\treturn (\n\t\t<div className={styles.tournament} style={{\n\t\t\tgridTemplateColumns: columns.join('% ') + '%',\n\t\t\t...style\n\t\t}}>\n\t\t\t<Sidebar\n\t\t\t\tplayerDict={playerDict}\n\t\t\t\tplayerDictKey={playerDictKey}\n\t\t\t\tupdatePlayerDict={updatePlayerDict}\n\t\t\t\tmodifyPlayerDict={(player: Player) => setPlayerDict({ player })}\n\t\t\t\t\n\t\t\t\tsettings={settings}\n\t\t\t\tid={props.id}\n\t\t\t\tsetDisplayPlayer={setDisplayPlayer}\n\t\t\t\tcheckIfEnoughPlayers={checkIfEnoughPlayers}\n\t\t\t\twideLeft={!sidebar}\n\t\t\t/>\n\t\t\t<InfoBar\n\t\t\t\tstatus={status}\n\t\t\t\tsettings={settings}\n\t\t\t\tupdateTournamentStatus={updateTournamentStatus}\n\t\t\t\twide={!displayPlayer && !showSettings}\n\t\t\t\twideLeft={!sidebar}\n\t\t\t\tround={status.round}\n\t\t\t\ttotalRounds={settings.totalRounds}\n\t\t\t\tcloseTournament={props.closeTournament}\n\t\t\t\ttoggleCrossTable={toggleCrossTable}\n\n\t\t\t\tsetLastRound={setLastRound}\n\t\t\t\tlastRoundOverride={lastRoundOverride}\n\t\t\t\ttriggerError={props.triggerError}\n\t\t\t/>\n\t\t\t<Pairings\n\t\t\t\tstatus={status}\n\t\t\t\tplayerDict={playerDict}\n\t\t\t\tupdatePlayerDict={updatePlayerDict}\n\t\t\t\t\n\t\t\t\tsettings={settings}\n\n\t\t\t\tid={props.id}\n\t\t\t\tcanTriggerNextRound={nextRound}\n\t\t\t\ttoggleSidebar={() => toggleSidebar({})}\n\t\t\t\ttoggleSettings={() => toggleSettings({})}\n\t\t\t\tsetDisplayPlayer={setDisplayPlayer}\n\t\t\t\twide={!displayPlayer && !showSettings}\n\t\t\t\twideLeft={!sidebar}\n\t\t\t\tupdateRound={updateTournamentStatus}\n\t\t\t\tsetLastRound={setLastRound}\n\t\t\t\tlastRoundOverride={lastRoundOverride}\n\t\t\t\ttoggleCrossTable={toggleCrossTable}\n\t\t\t/>\n\t\t\t<Profile\n\t\t\t\tid={props.id}\n\t\t\t\tplayerID={displayPlayer}\n\t\t\t\tsetDisplayPlayer={setDisplayPlayer}\n\t\t\t\tplayerDict={playerDict}\n\t\t\t\tmodifyPlayerDict={(player: Player, hash: string) => setPlayerDict({ player, hash })}\n\t\t\t\tsettings={settings}\n\t\t\t\tplayerDictKey={playerDictKey}\n\t\t\t/>\n\t\t\t{!showSettings ? null : <Settings\n\t\t\t\tupdateTournamentSettings={updateTournamentSettings}\n\t\t\t\tupdateSetting={updateSetting}\n\t\t\t\tstatus={status}\n\t\t\t\tsettings={settings}\n\t\t\t\ttoggleSettings={() => toggleSettings({})}\n\t\t\t\tsetLastRound={setLastRound}\n\t\t\t\ttriggerError={props.triggerError}\n\t\t\t\tplayers={players}\n\t\t\t\tupdateRounds={updateRounds}\n\t\t\t\trounds={rounds}\n\t\t\t/>}\n\t\t</div>\n\t);\n\n}","import React, { ReactElement } from 'react';\nimport styles from '../css/alert.module.css';\n\nexport default class Alert extends React.Component<{\n\tmessage: string\n\ttitle?: string\n\tconfirm?: boolean\n\tresolve?: () => void\n\treject?: () => void\n\tclose: () => void\n}> {\n\t\n\trender(): ReactElement {\n\t\tif (!this.props.message) return null;\n\t\tlet message = typeof this.props.message === 'string' ? this.props.message : JSON.stringify(this.props.message, null, 4);\n\t\tif (message.length < 10) return null;\n\t\treturn (\n\t\t\t<div className={styles.alertBox}>\n\t\t\t\t{this.props.title ? <div>{this.props.title}</div> : null}\n\t\t\t\t<div className={[styles.textBox].join(' ')}>\n\t\t\t\t\t{message}\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.response}>\n\t\t\t\t\t{\n\t\t\t\t\t\t!this.props.confirm ?\n\t\t\t\t\t\t\t<div className={[styles.NO, 'button'].join(' ')} onClick={this.props.close}>\n\t\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t\t</div> :\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className={[styles.NO, 'button'].join(' ')} onClick={() => {\n\t\t\t\t\t\t\t\t\tthis.props.reject();\n\t\t\t\t\t\t\t\t\tthis.props.close();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t✗\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={[styles.YES, 'button'].join(' ')} onClick={() => {\n\t\t\t\t\t\t\t\t\tthis.props.resolve();\n\t\t\t\t\t\t\t\t\tthis.props.close();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t✔\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}","import React, { ReactElement } from 'react';\nimport './App.css';\nimport Login from './tournament/Login';\nimport StatusBar from './StatusBar';\nimport Tournament from './Tournament';\nimport { POST, cookies, setErrorCallback } from './utils/requests';\n//import { isElectron, isDev, isProd } from './utils/electron';\n\nimport Menu from './tournament/Menu';\nimport Alert from './tournament/Alert';\n\nexport default class App extends React.Component<{}, {\n\tsessionID: string,\n\ttournamentID: string,\n\n\tmode: 'login' | 'menu' | 'tournament' | 'grid'\n\n\talertBox: {\n\t\tmessage: string\n\t\ttitle?: string\n\t\tconfirm?: boolean\n\t\tresolve?: () => void\n\t\treject?: () => void\n\t}\n}> {\n\n\tpublic state = {\n\t\tsessionID: '',\n\t\ttournamentID: '',\n\t\tmode: 'login' as 'login' | 'menu' | 'tournament' | 'grid',\n\n\t\talertBox: { message: '', error: true, confirm: false }\n\t}\n\n\tpublic closeAlertBox = (): void => this.setState({ alertBox: { message: '' }});\n\tpublic triggerConfirm = (message: string, resolve: () => void, reject: () => void) => this.setState({ alertBox: {message, title: 'CONFIRM ACTION', confirm: true, resolve, reject }});\n\tpublic triggerError = (message: string) => this.setState({ alertBox: {message, title: 'ERROR', confirm: false }});\n\n\tpublic setTournamentID = async (tournamentID: string): Promise<void> => {\n\t\tawait cookies.set('tournamentID', tournamentID, { path: '/' });\n\t\tthis.setState({\n\t\t\ttournamentID,\n\t\t\tmode: tournamentID ? 'tournament' : 'menu'\n\t\t});\n\t}\n\n\tpublic hasLoggedIn = async (sessionID: string): Promise<void> => {\n\t\tawait cookies.set('sessionID', sessionID, { path: '/' });\n\t\tthis.setState({ sessionID, mode: 'menu' });\n\t}\n\n\tpublic closeTournament = async (): Promise<void> => {\n\t\tawait cookies.set('tournamentID', '', { path: '/' });\n\t\tthis.setState({ tournamentID: '', mode: 'menu' });\n\t}\n\n\tprivate endSession = async (): Promise<void> => {\n\t\ttry {\n\t\t\tawait cookies.set('sessionID', '', { path: '/' });\n\t\t\tawait POST({ url: '/endSession' });\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t} finally {\n\t\t\tthis.setState({ sessionID: '', mode: 'login' });\n\t\t}\n\t}\n\n\tasync componentDidMount(): Promise<void> {\n\t\tsetErrorCallback((errorMessage: string) => this.triggerError(errorMessage));\n\t\tlet sessionID = await cookies.get('sessionID');\n\t\tif (sessionID) this.setState({ sessionID, mode: 'menu' });\n\t}\n\n\tcomponentWillUnmount() {\n\t\tsetErrorCallback(() => {});\n\t}\n\n\n\trender(): ReactElement {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<StatusBar/>\n\t\t\t\t<div className='stage' style={{\n\t\t\t\t\tbackgroundImage: `url(${process.env.PUBLIC_URL}/images/leaves-texture.png)`\n\t\t\t\t}}>\n\t\t\t\t\t{(() => {\n\t\t\t\t\t\tswitch (this.state.mode) {\n\t\t\t\t\t\tcase 'login': {\n\t\t\t\t\t\t\treturn <Login login={this.hasLoggedIn}/>;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'menu': {\n\t\t\t\t\t\t\treturn <Menu\n\t\t\t\t\t\t\t\tsessionID={this.state.sessionID}\n\t\t\t\t\t\t\t\tendSession={this.endSession}\n\t\t\t\t\t\t\t\tsetTournamentID={this.setTournamentID}\n\t\t\t\t\t\t\t\ttriggerConfirm={this.triggerConfirm}\n\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'tournament': {\n\t\t\t\t\t\t\treturn <Tournament\n\t\t\t\t\t\t\t\tid={this.state.tournamentID}\n\t\t\t\t\t\t\t\tcloseTournament={this.closeTournament}\n\t\t\t\t\t\t\t\ttriggerError={this.triggerError}\n\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tconsole.error('invalid mode');\n\t\t\t\t\t\t\tthis.setState({ mode: 'login' });\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})()}\n\t\t\t\t\t<Alert\n\t\t\t\t\t\t{...this.state.alertBox}\n\t\t\t\t\t\tclose={this.closeAlertBox}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t);\n\t\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport './index.css';\nimport App from './App.tsx';\nimport * as serviceWorker from './serviceWorker';\n\nrender(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}