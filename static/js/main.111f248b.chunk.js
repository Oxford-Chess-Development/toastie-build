(this.webpackJsonpScorchApp=this.webpackJsonpScorchApp||[]).push([[0],{1100:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(471),o=(n(485),n(6)),s=n.n(o),l=n(12),c=n(2),u=n(7),m=n.n(u),d="function"===typeof window.require,p="function"===typeof window.require&&!window.require("electron-is-dev"),f=d?window.require("electron").remote:null,b=(d&&f.session,d?f.getCurrentWindow():{minimize:function(){},maximize:function(){},restore:function(){},close:function(){},isMaximized:function(){return!0}}),g=d?b.webContents.session.cookies:null;console.log("isDev",!1),console.log("isElectron",d),console.log("isProd",p);n(472);n(487);var A=n(13),v=n.n(A),h=n(39),y=n(128),E=n.n(y),j=n(87),O=n(473),k=n(474),_=new(n(479).a),N=function(){},S=new(function(){function e(){Object(O.a)(this,e)}return Object(k.a)(e,[{key:"getAll",value:function(){return d||p?g.get({}).then((function(e){return e.reduce((function(e,t){return e[t.name]=t.value,e}),{})})).catch((function(e){return console.log(e),{}})):Promise.resolve(_.getAll()||{})}},{key:"get",value:function(e){return d||p?g.get({name:e}).then((function(e){return e.map((function(e){return e.value}))})).then((function(e){return e[0]||""})).catch((function(e){return console.log(e),""})):Promise.resolve(_.get(e)||"")}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({},n);if(d||p){var r=new Date(Date.now());return a=Object.assign(a,{name:e,value:t,url:w,expirationDate:r.setFullYear(r.getFullYear()+1)}),g.set(a).then((function(){return g.get({})})).then((function(e){return e.map((function(e){return{name:e.name,value:e.value}}))})).catch(console.error)}return Promise.resolve(_.set(e,t,n))}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d||p?g.remove(w,e):_.get(e)?Promise.resolve(_.remove(e,t)):Promise.reject("Couldn't remove cookie")}}]),e}()),w=j.prodServer,C=j.prodResultsServer,J=E.a.create({baseURL:w});function x(e){return e=Object.assign(e,{method:"GET"}),J(e).then((function(e){return e.data})).catch((function(e){throw console.error(e),e.response&&N("".concat(e.response.status," ").concat(e.response.statusText,": /").concat(e.response.config.url.split("/").pop()),e.response.data),e}))}function D(e){return e=Object.assign(e,{method:"POST",headers:{"Content-Type":"application/json"}}),J(e).then((function(e){return e.data})).catch((function(e){throw e.response&&N("".concat(e.response.status," ").concat(e.response.statusText,": /").concat(e.response.config.url.split("/").pop()),e.response.data),e}))}function R(e){e.preventDefault&&e.preventDefault(),e.persist&&e.persist();for(var t=e.target;"HTMLFormElement"!==t.constructor.name&&t.parentElement;)t=t.parentElement;if("HTMLFormElement"!==t.constructor.name)throw new Error("Couldn't find valid form");return D({data:Array.from(t).reduce((function(e,t){return t.name?("submit"===t.name||("number"===t.type?e[t.name]=Number(t.value):e[t.name]=t.value),e):e}),{}),url:t.action})}function B(e){N=e}J.interceptors.request.use(function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h.a,e.t1={},e.t2=t,e.t3=h.a,e.t4={},e.t5=t.headers,e.t6=JSON,e.next=9,S.getAll();case 9:return e.t7=e.sent,e.t8=e.t6.stringify.call(e.t6,e.t7),e.t9={Authorization:e.t8},e.t10=(0,e.t3)(e.t4,e.t5,e.t9),e.t11={headers:e.t10},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t11));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var I=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i,P=/chess\.com\/(?:live(?:\?\w+)?#tm=|club\/matches\/live\/(?:[a-z-]+\/)?)([0-9]+)/,T=/^(y(es)?|true|on)?$/i,M=/^(n(?:o)?|false|off)?$/i,F=/\s+/g,L=/^[a-z][\w-]{0,28}[a-z0-9]$/i,H=n(40),U=n.n(H),Q=n(16),G=n.n(Q),K=n(3);function V(e){var t=e.values,n=e.children;return t.reduce((function(e,t){var n=Object(c.a)(t,2),a=n[0],i=n[1];return r.a.createElement(a.Provider,{value:i},e)}),n)}var Y=Object(a.createContext)({});Y.displayName="SettingsContext",Object(a.createContext)(new Map).displayName="PlayerDictContext";var W=Object(a.createContext)((function(){return""}));W.displayName="DisplayNameContext";var z=Object(a.createContext)({setAlert:function(e){},closeAlert:function(){},startLoading:function(){},stopLoading:function(){}});z.displayName="AlertContext";var q=Object(a.createContext)(!1);q.displayName="LoadedContext";var X=Object(a.createContext)((function(e){}));X.displayName="SetModeContext";var Z=Object(a.createContext)({nextButton:"skeleton",setNextButton:function(e){}});Z.displayName="NextButtonContext";var $=n(46),ee=n.n($),te=["eboard","ing system","e manager"],ne=[r.a.createElement(K.n,{key:"chess"}),r.a.createElement(K.o,{key:"board",id:"chessBoard"}),r.a.createElement(K.K,{key:"list"})];function ae(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(0),s=Object(c.a)(o,2),l=s[0],u=s[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){i(!n),u((l+1)%te.length)}),6e3);return function(){return clearTimeout(e)}}),[n,i]),r.a.createElement("div",{className:ee.a.text},r.a.createElement("div",{className:[ee.a.your].join(" ")},r.a.createElement("div",{className:[n?ee.a.slideLeft:ee.a.slideRight].join(" ")},"your \u200b")),r.a.createElement("div",{className:"highlighted"},"scor"),r.a.createElement("div",{className:[ee.a.board,n?ee.a.expand:ee.a.contract].join(" ")},r.a.createElement("div",null,te[l],"\u200b"," of ","\u200b")),r.a.createElement("div",{className:"highlighted"},"ch"),r.a.createElement("div",{className:[ee.a.oice,n?ee.a.expand:ee.a.contract].join(" ")},r.a.createElement("div",null,"oice")),n?null:r.a.createElement("div",{className:[ee.a.fadeIn].join(" ")},r.a.createElement("div",null,"chess")),n?null:r.a.createElement("div",{className:[ee.a.fade2xIn].join(" ")},r.a.createElement("div",null,ne[l])))}var re=n(270),ie=n.n(re),oe=n(271),se=n.n(oe),le=n(272),ce=n.n(le),ue=n(273),me=n.n(ue);function de(e){var t;return r.a.createElement("div",{className:[U.a.logo,null===(t=e.classNames)||void 0===t?void 0:t.logo].join(" ")},r.a.createElement("img",{style:{visibility:e.loading?"hidden":"visible"},className:U.a.staticLogo,src:se.a,alt:"swiss-logo.png"}),r.a.createElement("img",{style:{visibility:e.loading?"visible":"hidden"},className:U.a.staticLogo,src:ce.a,alt:"swiss-logo.png"}),r.a.createElement("img",{style:{visibility:e.loading?"visible":"hidden"},className:U.a.crownOutline,src:ie.a,alt:"outline-gif"}),r.a.createElement("img",{style:{visibility:e.loading?"visible":"hidden"},className:U.a.loadingGif,src:me.a,alt:"loading-gif"}))}function pe(e){var t=Object(a.useState)(e.mode),n=Object(c.a)(t,2),i=n[0],o=n[1],s=Object(a.useState)(!1),l=Object(c.a)(s,2),u=l[0],m=l[1],d=Object(a.useState)(!1),p=Object(c.a)(d,2),f=(p[0],p[1],Object(a.useState)("")),b=Object(c.a)(f,2),g=b[0],A=b[1],h=Object(a.useCallback)((function(t){m(!1),R(t).then((function(t){return e.login(t)})).catch((function(e){e&&e.response&&e.response.data&&A(e.response.data),console.error(e)})).finally((function(){m(!1)}))}),[m,A,e.login]),y=Object(a.useContext)(z).setAlert,E=Object(a.useCallback)((function(e){var t=e.style;return r.a.createElement("div",{className:G.a.forgottenContainer,style:t},r.a.createElement("div",{className:[G.a.forgotten].join(" "),onClick:function(){return o("reminder")}},"username reminder"),r.a.createElement("div",{className:[G.a.forgotten].join(" "),onClick:function(){return o("reset")}},"password reset"))}),[o]),j=Object(a.useMemo)((function(){return r.a.createElement("form",{className:G.a.form,method:"POST",action:v.a.resolve(w,"requestPasswordReset"),onSubmit:function(e){return R(e).then((function(){return y({title:"Password reset",message:"Successfully sent a password reset link to the email on file. Check your inbox!"})}))}},r.a.createElement("div",{className:[G.a.input,G.a.back].join(" "),onClick:function(){return o("login")}},"BACK"),r.a.createElement("input",{type:"text",name:"username",autoComplete:"username",required:!0,placeholder:"username",className:[G.a.input].join(" ")}),r.a.createElement(E,null),r.a.createElement("button",{type:"submit",className:[G.a.submit].join(" ")},"REQUEST PASSWORD RESET"))}),[o,y]),O=Object(a.useMemo)((function(){return r.a.createElement("form",{className:G.a.form,method:"POST",action:v.a.resolve(w,"requestUsernameReminder"),onSubmit:function(e){return R(e).then((function(){return y({title:"Username reminder",message:"Successfully sent a username reminder. Check your inbox!"})}))}},r.a.createElement("div",{className:[G.a.input,G.a.back].join(" "),onClick:function(){return o("login")}},"BACK"),r.a.createElement("input",{type:"email",name:"email",autoComplete:"email",required:!0,placeholder:"email",className:[G.a.input].join(" ")}),r.a.createElement(E,null),r.a.createElement("button",{type:"submit",className:[G.a.submit].join(" ")},"REQUEST USERNAME REMINDER"))}),[o,y]),k=Object(a.useCallback)((function(){D({url:"/login",data:{username:"guest"}}).then(h)}),[h]),_=Object(a.useMemo)((function(){return r.a.createElement("form",{className:G.a.form,method:"POST",onSubmit:h,action:v.a.resolve(w,"login")},r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"username",className:[G.a.input].join(" ")}),r.a.createElement("input",{type:"password",name:"password",required:!0,placeholder:"password",className:[G.a.input].join(" ")}),r.a.createElement(E,null),r.a.createElement("input",{type:"submit",value:"LOGIN",className:[G.a.submit].join(" ")}))}),[h]),N=Object(a.useMemo)((function(){return r.a.createElement("form",{className:G.a.form,method:"POST",onSubmit:h,action:v.a.resolve(w,"register")},r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"username",className:[G.a.input].join(" ")}),r.a.createElement("input",{type:"password",name:"password",required:!0,placeholder:"password",minLength:8,className:[G.a.input].join(" ")}),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"email",className:[G.a.input].join(" "),pattern:I.source}),r.a.createElement("input",{type:"submit",value:"REGISTER",className:[G.a.submit].join(" ")}))}),[h]),S=Object(a.useMemo)((function(){return r.a.createElement(de,{setLoading:function(e){return m(e)},loading:u})}),[m,u]),C=Object(a.useMemo)((function(){return r.a.createElement("div",{className:[G.a.loginSection,G.a.initialiseButton].join(" ")},r.a.createElement("div",{className:G.a.loginBackground},r.a.createElement("div",{className:[G.a.flip,"button",G.a.loginButton,"login"===i?G.a.hidden:""].join(" "),onClick:function(){o("login"),A(""),setTimeout((function(){return m(!1)}),500)}},r.a.createElement("div",null,"LOGIN"),r.a.createElement("div",null,r.a.createElement(K.c,null))),r.a.createElement("div",null),r.a.createElement("div",{className:[G.a.flip,"button",G.a.registerButton,"register"===i?G.a.hidden:""].join(" "),onClick:function(){o("register"),A(""),setTimeout((function(){return m(!1)}),500)}},r.a.createElement("div",null,"REGISTER"),r.a.createElement("div",null,r.a.createElement(K.d,null)),r.a.createElement("div",{className:[G.a.guest,"button"].join(" "),onClick:function(e){k(),e.stopPropagation()}},"USE AS GUEST"))),r.a.createElement("div",{className:["container",G.a.foreground,"register"===i?G.a.registerForeground:G.a.loginForeground].join(" ")},"register"===i?N:"login"===i?_:"reminder"===i?O:"reset"===i?j:null))}),[i,o,A,_,N,O,j,S,e.mode]);return r.a.createElement("div",{className:U.a.canvas},r.a.createElement("div",{className:U.a.column}),r.a.createElement("div",{className:[U.a.column,G.a.column].join(" ")},S,r.a.createElement("div",{className:G.a.nameContainer},r.a.createElement(ae,null)),r.a.createElement("div",{className:["container",G.a.container].join(" ")},C),r.a.createElement("div",{className:G.a.messageBar},g||"\u200b")),r.a.createElement("div",{className:U.a.column}))}var fe=n(88),be=n.n(fe),ge=n(274);function Ae(){b.isMaximized()?b.restore():b.maximize()}function ve(){var e=["ScorchApp","v."+ge.version].join(" ");return r.a.createElement("div",{className:be.a.statusBar},r.a.createElement("div",{className:be.a.title},e),r.a.createElement("div",{className:be.a.menu},r.a.createElement("div",{className:be.a.favicon},r.a.createElement("img",{alt:"favicon",draggable:!1,src:"./logo192.png"}))),r.a.createElement("div",{className:be.a.exec},r.a.createElement("div",{onClick:function(){return b.minimize()}},r.a.createElement(K.nb,null)),r.a.createElement("div",{onClick:Ae},b.isMaximized()?r.a.createElement(K.ob,null):r.a.createElement(K.mb,null)),r.a.createElement("div",{onClick:function(){return b.close()},className:be.a.close},r.a.createElement(K.lb,null))))}var he=n(10),ye=n(17),Ee=n.n(ye),je=n(36),Oe=n(4),ke=n.n(Oe),_e=n(5),Ne=n.n(_e),Se=n(26);function we(e){var t,n=Object(a.useState)(!1),i=Object(c.a)(n,2),o=i[0],u=i[1],d=Object(a.useState)(null),p=Object(c.a)(d,2),f=p[0],b=p[1],g=Object(a.useState)([]),A=Object(c.a)(g,2),v=A[0],h=A[1],y=Object(a.useState)([null,"",""]),E=Object(c.a)(y,2),j=E[0],O=E[1],k=Object(a.useRef)(null),_=e.limit||5,N=e.timeout||500,w=Object(a.useCallback)((function(t,n){var a=t.slice(0);if(!n)return a;var r=a.findIndex((function(e){return e.id===n.id}));return r>=0&&a.splice(r,1),a.unshift(n),e.onSubmit(n.id),b(null),h([]),k.current.value="",O([null,"",""]),e.cacheHistory&&S.set("searchHistory",JSON.stringify(a.map((function(e){return e.id})))),a}),[e.onSubmit,b,h,k,e.cacheHistory]),C=Object(a.useReducer)(w,[]),J=Object(c.a)(C,2),x=J[0],D=J[1];Object(a.useEffect)((function(){e.cacheHistory&&Object(l.a)(s.a.mark((function t(){var n,a,r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.get("searchHistory");case 2:n=t.sent,a=Object(Se.a)(n),t.prev=4,i=function(){var t=r.value,n=e.options.find((function(e){return e.id===t}));if(!n)return"continue";x.push(n)},a.s();case 7:if((r=a.n()).done){t.next=13;break}if("continue"!==i()){t.next=11;break}return t.abrupt("continue",11);case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),a.e(t.t0);case 18:return t.prev=18,a.f(),t.finish(18);case 21:D(null);case 22:case"end":return t.stop()}}),t,null,[[4,15,18,21]])})))()}),[e.cacheHistory]);var R=Object(a.useCallback)((function(e){e.nativeEvent.data||b(null),O([e.target,e.target.value,e.nativeEvent.data])}),[O,b]),B=Object(a.useCallback)(function(){var t=Object(l.a)(s.a.mark((function t(n){var a,r,i,o,l,m,d,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object(c.a)(n,3),r=a[0],a[1],i=a[2],o=r.value,l=o.length,!e.onInput){t.next=10;break}return u(!0),t.next=7,e.onInput(o).finally((function(){return u(!1)}));case 7:m=t.sent,t.next=11;break;case 10:m=(e.options||[]).filter((function(t){return e.getName(t).toLowerCase().startsWith(o.toLowerCase())}));case 11:if(e.onChange&&e.onChange(m.map((function(e){return e.id}))),h(m),(d=m[0])&&i){t.next=16;break}return t.abrupt("return");case 16:p=e.getName(d),r.value+=p.slice(l),r.select(),r.setSelectionRange(l,p.length,"forward"),b(d);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.options,e.getName,e.onChange,e.onInput,u,h,b]);Object(a.useEffect)((function(){if(j[0]){if(e.onInput){var t=setTimeout((function(){return B(j)}),N);return function(){return clearTimeout(t)}}B(j)}}),[j,e.onInput,B]);var I=Object(a.useCallback)((function(e){(null===e||void 0===e?void 0:e.target)&&(e.target.value=""),k.current&&(k.current.value=""),b(null),h([])}),[b,h,k]);Object(a.useEffect)((function(){I()}),[I,e.onInput,e.onChange,e.getName]);var P=Object(a.useCallback)((function(t){switch(t.keyCode){case 27:I(),e.onCancel&&e.onCancel();break;case 13:f&&(t.target.value="",D(f))}}),[I,f,e.onCancel]),T=Object(a.useMemo)((function(){for(var t=Object.assign({},e.styles),n=0,a=Object.entries(Object.assign({},ke.a));n<a.length;n++){var r=Object(c.a)(a[n],2),i=r[0],o=r[1];t[i]?t[i]+=" "+o:t[i]=o}return t}),[e.styles]);return r.a.createElement("div",{className:m()(T.infoBox,e.className)},r.a.createElement("div",{className:m()("button",T.searchBar,Object(he.a)({},T.thin,e.thin)),tabIndex:1},!1!==e.showIcon?r.a.createElement(K.X,null):null,r.a.createElement("input",{onKeyDown:P,onInput:R,placeholder:null!==(t=e.placeholder)&&void 0!==t?t:"Search",ref:k})),!1!==e.showChoices?r.a.createElement("div",{className:[T.searchResults,"scrollable"].join(" ")},o?r.a.createElement("div",{className:"loading"},r.a.createElement(K.bb,null)):v.length||!j[1]?v.slice(0,_).concat(!1!==e.showHistory?x:[]).map((function(t,n){return r.a.createElement("div",{tabIndex:0,onKeyDown:P,onFocus:function(){return b(t)},onClick:function(){return D(t)},key:["history",n].join(".")},e.getName(t))})):r.a.createElement("div",null,"No players found.")):null)}var Ce=n(260),Je=n.n(Ce),xe=n(60),De=["BGD","BLZ","GBR","GIB","FJI"];function Re(){if(!d){var e="";return navigator.appVersion.includes("Win")&&(e="windows"),navigator.appVersion.includes("Mac")&&(e="mac"),navigator.appVersion.includes("X11")&&(e=""),navigator.appVersion.includes("Linux")&&(e="ubuntu"),e}switch(Je.a.platform()){case"aix":case"android":return"";case"darwin":return"mac";case"freebsd":case"linux":case"openbsd":case"sunos":return"";case"win32":return"windows";case"cygwin":case"netbsd":return""}}function Be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[""].concat(t).join("/")}function Ie(e){return e?e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase().replace(" id"," ID"):e}function Pe(e,t){var n=Object(a.useState)(e),r=Object(c.a)(n,2),i=r[0],o=r[1];return Object(a.useDebugValue)("".concat(t,": ").concat(i)),[i,o]}function Te(e,t){return isNaN(e)?"":0===t?function(e){var t=e-1;return String.fromCharCode(65+t%26).repeat(Math.floor(t/26)+1)}(e):1===t?e.toString():2===t?function(e){if(isNaN(e))return"";var t=e.toString().split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],a="",r=3;for(;r--;){var i=parseInt(t.pop());a=(n[i+10*r]||"")+a}return Array(+t.join("")+1).join("M")+a}(e):e.toString()}var Me={gamePoint:{name:"By game point total",func:function(e,t){return t.gamePoints-e.gamePoints}},rating:{name:"By rating",func:function(e,t){return t.rating-e.rating}},null:null,h2h:{name:"By head-to-head score",func:function(e,t){return t.scoreAgainst(e.id)-e.scoreAgainst(e.id)}},gamePointDiff:{name:"By net game points",func:function(e,t){return t.netGamePoint-e.netGamePoint}},whites:{name:"By times played black",func:function(e,t){return e.whiteTotal-t.whiteTotal}},progScore:{name:"By progressive score",func:function(e,t){return t.progressiveScore-e.progressiveScore}},wins:{name:"By most wins",func:function(e,t){return t.histories&&e.histories?t.histories.filter((function(e){return 1===e.match})).length-e.histories.filter((function(e){return 1===e.match})).length:0}},gameh2h:{name:"By head-to-head of game points",func:function(e,t){return t.gameScoreAgainst(e.id)-e.gameScoreAgainst(e.id)}},perfRating:{name:"By performance rating",func:function(e,t){return t.performanceRating-e.performanceRating}},oppRating:{name:"By average rating cut",func:function(e,t){var n,a;if(t.oppRatingSum!==e.oppRatingSum)return t.oppRatingSum-e.oppRatingSum;var r=null===(n=e.histories)||void 0===n?void 0:n.filter((function(e){return e})),i=null===(a=t.histories)||void 0===a?void 0:a.filter((function(e){return e}));if(!r||!i||!r.length||!i.length)return 0;for(var o=r.sort((function(e,t){return e.oppRating-t.oppRating})),s=i.sort((function(e,t){return e.oppRating-t.oppRating}));;){var l=[o.shift(),s.shift()],c=l[0],u=l[1];if(void 0==c||void 0===u)break;if(c||u){var m=o.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/o.length,d=s.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/s.length;if(m!==d)return d-m}}return 0}},alphabetical:{name:"Alphabetical",func:function(e,t){return t.firstName>e.firstName?-1:e.firstName>t.firstName?1:0}}};function Fe(e){return e?"On":!1===e?"Off":""}var Le={core:{tournamentId:{name:"Unique ID",type:"string",locked:!0,primaryKey:!0},status:{name:"Status",enum:["uninitialised","active","finished"],convert:Ie,defaultValue:"uninitialised",value:function(e,t,n){return e.round?e.active?"active":e.round!==n.totalRounds?"inactive":"finished":"uninitialised"},locked:!0},pairingSystem:{name:"Pairing system",enum:["swiss","round-robin","knockout"],convert:Ie,lockOnInit:!0,defaultValue:"swiss",description:'Do you want a <span id="swiss" className="switcher">Swiss</span> tournament (players play opponents on the same number of points as themselves with a set number of rounds) or a <span id="round-robin" className="switcher">Round-Robin</span> tournament (everyone players everyone)? Future support for Stable Marriage and Knockout planned. [Message the developers](https://scorchapp.co.uk/about#contact) if you have any requests.'},competitors:{name:"Tournament type",enum:["individual","team"],convert:Ie,lockOnInit:!0,defaultValue:"individual",description:"If your pairings are organised around teams, change this option to 'teams'."},media:{name:"Online?",enum:["online","otb"],convert:function(e){return"otb"===e?"Over-the-board":Ie(e)},defaultValue:"online",description:'Is your tournament online? <span id="online" className="switcher">Online</span> tournaments have a large number of additional settings to automate actions, such as automatic results, downloading games, and dates and times. <span id="otb" className="switcher">Over-the-board (OTB)</span> are played in classical in-person tournament settings.'},totalRounds:{name:"Total rounds",convert:function(e){return"Infinity"===e?"\u221e":e.toString()},type:"number",defaultValue:1/0,lockWhen:{pairingSystem:"round-robin"},nb:{min:1,max:100},allow:{infinity:!0}},ratingSystem:{name:"Rating system",enum:["ECF","FIDE","USCF"],lockOnInit:!0,defaultValue:"ECF",description:'What scale of ratings do you want to use? If the numbers are roughly 0-260, use <span id="ECF" className="switcher">ECF</span>. If the numbers are 0-2600 use <span id="FIDE" className="switcher">FIDE</span>.'},displayPoints:{name:"Games per pairing",convert:function(e){return"match"===e?"Just One":"Multiple"},enum:["match","game"],defaultValue:"match",description:"If your players are playing multiple games in every pairing, you need to change this to <span id='game' className='switcher'>Multiple</span>. Otherwise, if all your pairings are single games, i.e. the result is always 1-0, \xbd-\xbd, or 0-1, then change it to <span id='match' className='switcher'>Just One</span>."},gamePointTotal:{name:"Number of games per pairing",type:"number",defaultValue:1,show:{displayPoints:"game"},lockOnInit:!0,nb:{step:1,min:1},allow:{any:!0},highlight:!0,linked:"byeGameReward",convert:function(e){return e?e.toString():"Any"},description:"How many games are there for every pairing? If it's a fixed number, such as all games are 4-0, 2-2, or 3\xbd-\xbd, then write in that fixed number. Otherwise, click <span id='0' className='switcher'>Any</span>."},usingPools:{name:"Pair players in pools?",description:"This setting is for if you're using a pool structure for your pairings. That means that a subset of players can only be paired with a subset of others, for instance, 'Pool A' players can only play those in 'Pool A', 'Pool B in Pool B' and so on. You can switch off this setting at any time. <div id='poolButton' />",type:"boolean",defaultValue:!1,convert:Fe},public:{name:"Public",convert:Fe,lockOnInit:!1,type:"boolean",defaultValue:!1,level:1},tieBreaks:{name:"Tie Breaks",convert:function(){return""},type:"string",defaultValue:null,validate:function(e){var t,n=e.split(","),a=Object(Se.a)(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(!(r in Me))throw"Invalid tiebreak '".concat(r,"'")}}catch(i){a.e(i)}finally{a.f()}return!0},hidden:!0}},permissions:{allowNewPlayers:{name:"Mid-way joining?",convert:Fe,lockOnInit:!1,type:"boolean",defaultValue:!0,hidden:!0},isPublished:{name:"Round is published?",convert:Fe,type:"boolean",defaultValue:!0,hidden:!0},checkForDuplicatePlayers:{name:"Check for duplicate players?",convert:Fe,lockOnInit:!1,type:"boolean",defaultValue:!0,show:{allowNewPlayers:!0,pairingSystem:"swiss"},highlight:!0,description:"If this setting is on, ScorchChess will automatically check that any new player you enter in the New Player dialogue doesn't have the same name as an existing player"},allowClashes:{name:"Forbid certain pairings?",convert:Fe,lockOnInit:!1,type:"boolean",defaultValue:!0,show:{pairingSystem:"swiss"},description:"Switch this setting on to enable the 'Forbidden Pairings' feature. Forbid a player from playing another by clicking on any player and adding a new forbidden opponent in the Player dialogue. Also known as: clashes, banned pairings."},allowBonuses:{name:"Input score bonuses for players?",convert:Fe,lockOnInit:!1,type:"boolean",defaultValue:!0,description:"Switch this setting on to enable the 'Score bonuses' feature. This allows you to arbitarily add bonus points to players. Also known as: half-point byes, handicaps, bonuses."},poolDisplay:{name:"Pool numbering",enum:[0,1,2],type:"number",defaultValue:0,convert:function(e){return 0===e?"Letters":1===e?"Numbers":2===e?"Roman Numerals":void 0},show:{usingPools:!0}}},points:{lossReward:{name:"Points on loss",lockOnInit:!0,type:"number",defaultValue:0,nb:{step:.1}},drawReward:{name:"Points on draw",lockOnInit:!0,type:"number",defaultValue:.5,nb:{step:.1}},winReward:{name:"Points on win",lockOnInit:!0,type:"number",defaultValue:1,nb:{step:.1}},byeReward:{name:"Bye reward",enum:["win","draw","loss"],lockOnInit:!0,defaultValue:"win",convert:Ie,description:'How many match points should be granted to players receiving a bye? It can either be the same number of points as is granted when a player <span id="win" className="switcher">Wins</span>, <span id="draw" className="switcher">Draws</span>, or <span id="loss" className="switcher">Loses</span>.'},byeGameReward:{name:"Bye reward in game points",type:"number",lockOnInit:!1,defaultValue:1,show:{displayPoints:"game"},nb:{min:0},highlight:!0,description:"How many game points should be granted to players receiving a bye? This can be any arbitary number."},performanceSystem:{name:"Performance rating",enum:["ELO","FIDE"],lockOnInit:!1,defaultValue:"ELO",description:'This setting refers to the performance rating **algorithm** used. There are two performance rating options:  <span id="ELO" className="switcher">ELO</span> and  <span id="FIDE" className="switcher">FIDE</span>.\n\t\t\t- The ELO performance rating system refers to the average of an opponent\'s player\'s player ratings, buffed by 400 for each win and subtracted by 400 for every loss.\n\t\t\t- The FIDE formula calculates a rating difference factor dp using a lookup table from the player\'s percentage score. That difference factor is then summed to the average rating of all opponents played. For instance, if the average opponent rating is 1400 and the player has won 2 out of 3 games, their dp factor will be +125 and so their performance rating will be 1525.\n\t\t\tThis feature is only important if you are interested in calculating performance ratings and expected scores.'}},stats:{nbPlayers:{name:"Number of players",type:"number",defaultValue:0,value:function(e,t){return t.length},convert:function(e){return e.toString()}},activePlayers:{name:"Active players",type:"number",defaultValue:0,value:function(e,t){return t.filter((function(e){return e.active})).length},convert:function(e){return e.toString()}},matchesPlayed:{name:"Matches played",type:"number",defaultValue:0,value:function(e,t){return t.reduce((function(e,t){return e+t.played}),0)/2},convert:function(e){return e.toString()}},gamesPlayed:{name:"Games played",type:"number",defaultValue:0,value:function(e,t){return Math.ceil(t.reduce((function(e,t){return e+t.histories.reduce((function(e,t){return t?e+=t.played:e}),0)}),0)/2)},convert:function(e){return e.toString()}},averageRating:{name:"Average rating",type:"number",defaultValue:1200,value:function(e,t){if(!t.length)return 0;var n=t.reduce((function(e,t){return e+t.rating}),0);return Math.round(n/t.length)},convert:function(e){return e?e.toString():"-"}},createdAt:{name:"Created at",convert:function(e){return new Date(e).toString().slice(0,24)},locked:!0},updatedAt:{name:"Last updated",convert:function(e){return new Date(e).toString().slice(0,24)},locked:!0}},public:{vanityURL:{name:"Custom ID",type:"string",defaultValue:"",action:"updateVanityURL",level:2,description:"Create a custom URL for your tournament! The ID is the end part of the URL. It should not have any spaces or slashes."},url:{name:"URL",type:"link",defaultValue:"",value:function(e,t,n){return"".concat(C,"t/").concat(n.vanityURL||e.id).trim()},level:2,showOnIntro:{vanityURL:function(e){return e}}},timeControl:{name:"Time control",type:"string",defaultValue:"",level:1},location:{name:"Location",type:"string",defaultValue:"",level:1},profileURL:{name:"Link to website",type:"string",level:1},rulesURL:{name:"Link to rules",type:"string",level:1},logoURL:{name:"Link to profile picture",type:"string",level:1},streamURL:{name:"Stream link",type:"string",level:1}},public_permissions:{showRatings:{name:"Show ratings",convert:Fe,type:"boolean",defaultValue:!0,level:1},roundTimes:{name:"Show round times",convert:Fe,type:"boolean",defaultValue:!0,locked:!1,level:1},publishPairings:{name:"Ask me before publishing pairings",convert:Fe,type:"boolean",defaultValue:!1,level:1,description:"Enable a convenience feature that allows you to say when your pairings after a draw are viewable by the public on ScorchResults. This extra step is useful for changing any pairings to suit your preferences before publishing."}},public_hidden:{description:{name:"Description",type:"string",level:1},prizes:{name:"Prizes",type:"string",level:1}},automation:{source:{name:"Source",enum:["","lichess","chessCom"],convert:function(e){return"lichess"===e?"Lichess.org":"chessCom"===e?"Chess.com":"None"},show:{media:"online"},defaultValue:"",level:1,description:'This setting enables ScorchChess\' state-of-the-art integration features. Select a website where games will be played to begin. ScorchChess currently has support for  <span id="lichess" className="switcher">Lichess.org</span> and  <span id="chessCom" className="switcher">Chess.com</span>. This setting controls your ability to submit game links.'},pullResults:{name:"Pull results",show:{source:["lichess","chessCom"]},enum:[0,1,2],type:"number",highlight:!0,level:1,convert:function(e){return 0===e?"Off":1===e?"Ask me first":"Pull and save all"},defaultValue:1,description:'This setting enables ScorchChess\' state-of-the-art integration features. This setting enables ScorchChess to sync the results with the results found on Lichess.org or Chess.com. There are 3 settings:\n\t\t\t\t- <span id="0" className="switcher">Off</span>: Don\'t sync. Let me submit the results myself manually.\n\t\t\t\t- <span id="1" className="switcher">Ask me first</span>: Sync, but don\'t confirm any results. Make all synced results provisional and I\'ll confirm them.\n\t\t\t\t- <span id="2" className="switcher">Pull and save all</span>: Sync and save all the results. If there any results that need correcting, you can edit results by clicking on the _Dropdown_ for a pairing and _Undo result_.'},allowSelfLinks:{name:"Let users submit links?",lockOnInit:!1,enum:[0,1,2,3],type:"number",defaultValue:1,highlight:!0,level:1,show:{source:["lichess","chessCom"]},convert:function(e){return 0===e?"Off":1===e?"Ask me first":2===e?"Save if both players confirm":"Save if either player confirms"},description:'This setting lets users submit game links to either Lichess.org or Chess.com. If running a team tournament, team admins are allowed to do this. There are 4 options with this setting:\n\t\t\t\t- <span id="0" className="switcher">Off</span>: Don\'t allow users to submit game links. You can add a game link to any pairing yourself by clicking on the _Pairing Dropdown_.\n\t\t\t\t- <span id="1" className="switcher">Ask me first</span>: Provisionally add links. I will then confirm them using the _Pairing Dropdown_.\n\t\t\t\t- <span id="2" className="switcher">Save if both players confirm</span>: If any player adds a link, make it provisional. Show a confirmation dialogue to the the player and save it if they accept.\n\t\t\t\t- <span id="3" className="switcher">Save if either player confirms</span>: If any player adds a link, save it to the pairing.'},allowSelfSubmissions:{name:"Let users submit results?",convert:Fe,locked:!0,lockOnInit:!1,type:"boolean",defaultValue:!1},allowRegistration:{name:"Let users register online?",convert:Ie,enum:["closed","approve","open"],onInit:!1,locked:!0,defaultValue:"closed"}}},He=n(164),Ue=n.n(He),Qe=d?window.require("electron").shell:null;function Ge(e){return d?r.a.createElement("div",{onClick:function(){return Qe.openExternal(e.to)}},e.children):r.a.createElement("a",Object.assign({href:e.to,target:"_blank",rel:"noopener noreferrer"},e),e.children)}var Ke=n(475),Ve=n.n(Ke),Ye=n(261),We=new(n.n(Ye).a.ProcessNodeDefinitions)(r.a),ze=Ve()({isValidNode:function(e){return"script"!==e.type},processingInstructions:[{shouldProcessNode:function(e){return!0},processNode:We.processDefaultNode}]});function qe(e){return r.a.createElement(Ge,Object.assign({to:e.href},e))}function Xe(e){var t=e.content,n=e.onMount,i=e.handleToggle,o=e.className,s=Object(a.useMemo)((function(){if("string"!==typeof t)return"25em";var e=null===t||void 0===t?void 0:t.split(F).length;return(e?e/6+2:25)+"em"}),[t]),l=r.a.createRef(),u=Object(a.useCallback)((function(e){return t&&"0em"===e?s:"0em"}),[t,s]),m=Object(a.useReducer)(u,"0em"),d=Object(c.a)(m,2),p=d[0],f=d[1],b=Object(a.useState)(!1),g=Object(c.a)(b,2),A=g[0],v=g[1];return Object(a.useEffect)((function(){if(!p.startsWith("0"))return v(!0),void(n&&n());var e=setTimeout((function(){return v(!1)}),750);return function(){return clearTimeout(e)}}),[p,n,v]),Object(a.useEffect)((function(){if(l.current&&i)for(var e=Array.from(l.current.querySelectorAll("span.switcher")),t=function(){var e=a[n];e.onclick=function(){return i(e.id)}},n=0,a=e;n<a.length;n++)t()}),[i,l]),Object(a.useEffect)((function(){setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),250)}),[p]),{toggleHeight:f,description:Object(a.useMemo)((function(){return A?r.a.createElement("div",{ref:l,className:o,style:{maxHeight:p}},"string"===typeof t?r.a.createElement(Ue.a,{source:null===t||void 0===t?void 0:t.split("\n").map((function(e){return e.trim()})).join("\n"),escapeHtml:!1,astPlugins:[ze],renderers:{link:qe}}):t):null}),[A,t,o,p])}}function Ze(e){var t,n,i,o=Object(a.useState)(e.content),s=Object(c.a)(o,2),l=s[0],u=s[1],m=Object(a.useState)(e.alwaysEnabled||!1),d=Object(c.a)(m,2),p=d[0],f=d[1];Object(a.useEffect)((function(){void 0!==typeof e.content&&null!==e.content||u(""),u(e.content)}),[e,e.content,u]);var b=Object(a.useCallback)((function(t){t.preventDefault();var n=t.target;"HTMLButtonElement"===n.constructor.name&&n.parentNode[e.name||"name"].stepDown()}),[e.name]),g=Object(a.useCallback)((function(t){t.preventDefault();var n=t.target;"HTMLButtonElement"===n.constructor.name&&n.parentNode[e.name||"name"].stepUp()}),[e.name]),A=Object(a.useCallback)((function(t){if(t.preventDefault(),e.handleClear)e.handleClear().then((function(){f(e.alwaysEnabled||!1),u("")}));else{var n=t.target.parentElement;if("HTMLFormElement"!==n.constructor.name)return Promise.resolve(f(e.alwaysEnabled||!1));var a=n[e.name||"name"];if("HTMLInputElement"!==a.constructor.name)return Promise.resolve(f(e.alwaysEnabled||!1));u(null),a.value=null,n[e.name||"name"]=null,t.target=n,E({target:n})}}),[e.handleClear,f,u,e.alwaysEnabled]),v=Object(a.useCallback)((function(t){return t.preventDefault(),e.handleSubmit(e.name||"name",0).then((function(){f(e.alwaysEnabled||!1),u("0")}))}),[e.handleSubmit,f,u,e.name]),y=Object(a.useCallback)((function(t){return t.preventDefault(),e.handleSubmit(e.name||"name","Infinity").then((function(){f(e.alwaysEnabled||!1),u("\u221e")}))}),[e.handleSubmit,f,u,e.alwaysEnabled,e.name]),E=Object(a.useCallback)((function(t){if(t.preventDefault&&t.preventDefault(),e.useHandleSubmit){var n,a,r=t.target;if("HTMLFormElement"===r.constructor.name)a=r[e.name||"name"];else{if("HTMLInputElement"!==r.constructor.name)return Promise.resolve(f(e.alwaysEnabled||!1));a=r}return e.handleSubmit(e.name||"name",a.value).then((function(){return f(e.alwaysEnabled||!1),t})).then(null!==(n=e.onSubmitSuccess)&&void 0!==n?n:function(){}).then((function(){return u(a.value)})).catch((function(e){e&&console.error(e)}))}return R(t).then((function(){return f(e.alwaysEnabled||!1),t})).then((function(t){return e.onSubmitSuccess&&e.onSubmitSuccess(t),t})).then((function(e){for(var t=e.target;"HTMLFormElement"!==t.constructor.name&&t.parentElement;)t=t.parentElement;if("HTMLFormElement"!==t.constructor.name)throw new Error("Couldn't find valid form");var n=t.firstChild.value;u(n)})).catch((function(e){e&&console.error(e)}))}),[e.useHandleSubmit,e.handleSubmit,e.name,f,e.onSubmitSuccess,e.alwaysEnabled,f,u]),j=Object(a.useCallback)((function(t){switch(t.keyCode){case 27:return f(e.alwaysEnabled||!1),t;case 13:return E(t),t;default:return t}}),[f,E,e.alwaysEnabled]);function O(t){var n,a,i,o,s,l,c,m,d,p,O,k,_,N,S,w,C,J,x=t.name;J="datetime-local"===e.inputType?x?function(e){if(isNaN(e.valueOf()))return"";var t=6e4*e.getTimezoneOffset();return new Date(e.valueOf()-t).toISOString().slice(0,16)}(new Date(x)):function(e){var t=new Date(e.setUTCHours(e.getUTCHours()+1));return t.getUTCMinutes()<30?new Date(t.setUTCMinutes(30)):new Date(new Date(t.setUTCMinutes(0)).setUTCHours(t.getUTCHours()+1))}(new Date(e.defaultEditContent)).toString():x,(null===(n=e.show)||void 0===n?void 0:n.any)&&"0"===J&&(J="");var R=e.name||"name";return e.search?r.a.createElement(we,{onSubmit:function(t){return D({url:e.url,data:Object(h.a)(Object(he.a)({},R,t),e.additionalInputProps||{})}).then((function(){f(e.alwaysEnabled||!1),u(t)}))},options:e.search.options,getName:e.search.getName,placeholder:null!==(a=J)&&void 0!==a?a:"",showChoices:!1,showIcon:!1,styles:ke.a}):r.a.createElement("form",{ref:e.formRef,className:[ke.a.form,null===(i=e.classNames)||void 0===i?void 0:i.form].join(" "),target:"_self",onKeyDown:j,onSubmit:E,method:"POST",action:e.url},"textarea"!==e.inputType?r.a.createElement("input",Object.assign({type:e.inputType,className:[ke.a.input,null===(o=e.classNames)||void 0===o?void 0:o.input].join(" "),name:e.name||"name",defaultValue:J,placeholder:" ",required:!0,autoFocus:!0},e.additionalInputProps||{})):r.a.createElement("textarea",Object.assign({className:[ke.a.input,null===(s=e.classNames)||void 0===s?void 0:s.input].join(" "),name:e.name||"name",defaultValue:J,placeholder:"No "+e.name+" set",required:!0},e.additionalInputProps||{})),r.a.createElement("button",{className:[ke.a.button,!(null===(l=e.show)||void 0===l?void 0:l.submit)||(null===(c=e.show)||void 0===c?void 0:c.infinity)||(null===(m=e.show)||void 0===m?void 0:m.any)||(null===(d=e.show)||void 0===d?void 0:d.clear)||(null===(p=e.show)||void 0===p?void 0:p.reset)?ke.a.submitHidden:"",ke.a.cancel].join(" "),onClick:function(){return f(e.alwaysEnabled||!1)},title:"Cancel"},r.a.createElement(K.fb,null)),r.a.createElement("button",{className:[ke.a.button,(null===(O=e.show)||void 0===O?void 0:O.clear)?"":ke.a.submitHidden,ke.a.cancel].join(" "),onClick:A,title:"Clear"},r.a.createElement(K.fb,null)),r.a.createElement("button",{className:[ke.a.button,(null===(k=e.show)||void 0===k?void 0:k.any)?"":ke.a.submitHidden,ke.a.any].join(" "),onClick:v,title:"Any"},"Any"),r.a.createElement("button",{className:[ke.a.button,(null===(_=e.show)||void 0===_?void 0:_.infinity)?"":ke.a.submitHidden,ke.a.infinity].join(" "),onClick:y,title:"Infinity"},"\u221e"),r.a.createElement("button",{type:"button",value:"\u25bc",className:[ke.a.button,(null===(N=e.show)||void 0===N?void 0:N.increment)?"":ke.a.submitHidden,ke.a.increment].join(" "),onClick:b,title:"Decrement"},r.a.createElement(K.j,null)),r.a.createElement("button",{className:[ke.a.button,(null===(S=e.show)||void 0===S?void 0:S.increment)?"":ke.a.submitHidden,ke.a.increment].join(" "),onClick:g,title:"Increment"},r.a.createElement(K.k,null)),r.a.createElement("button",{type:"submit",className:[ke.a.button,(null===(w=e.show)||void 0===w?void 0:w.reset)?"":ke.a.submitHidden,ke.a.reset,"textarea"===e.inputType?"reset":""].join(" "),title:"History"},r.a.createElement(K.I,null)),r.a.createElement("button",{type:"submit",className:[ke.a.button,(null===(C=e.show)||void 0===C?void 0:C.submit)?"":ke.a.submitHidden,ke.a.submit,"textarea"===e.inputType?"submit":""].join(" "),title:"Submit"},r.a.createElement(K.l,null)),e.children)}var k,_=l;return _&&"datetime-local"===e.inputType?(k=new Date(l),_=isNaN(k.valueOf())?"":k.toLocaleString("en-GB").slice(0,-3)):(null===(t=e.show)||void 0===t?void 0:t.any)&&"0"===_&&(_="Any"),r.a.createElement("div",{className:[ke.a.container,null===(n=e.classNames)||void 0===n?void 0:n.container].join(" ")},p?r.a.createElement(O,{name:l}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[ke.a.editableField,(null===(i=e.classNames)||void 0===i?void 0:i.editableField)||""].join(" "),onClick:function(){return f(!0)}},_||e.defaultContent||"\u200b"),e.children))}var $e=Object.values(Le).reduce((function(e,t){for(var n=0,a=Object.values(t);n<a.length;n++){var r=a[n];r.show&&e.push.apply(e,Object(je.a)(Object.keys(r.show)))}return e}),[]);function et(e){var t=Object(a.useCallback)((function(t,n,a){try{var r;if(null===a||void 0===a?void 0:a.enum){var i=a.enum.indexOf(n);-1===i&&console.error("Invalid setting value "+t+": "+n);var o=(i+1)%a.enum.length;r=a.enum[o]}else if("boolean"===(null===a||void 0===a?void 0:a.type))r=!n;else{if("number"===(null===a||void 0===a?void 0:a.type)){if("Infinity"===n||"\u221e"===n?r=1/0:n=Number(n),"totalRounds"===t){if(n<=e.status.round)throw new Error("Can't make total number of rounds less than current round number");if(n!==1/0&&n>=100)throw new Error("Can't make total number of rounds more than 100")}return n}r=n}e.updateSetting(t,r,a)}catch(s){s&&s.message&&e.triggerError(s.message)}}),[e.status.round,e.updateSetting,e.triggerError]),n=Object(a.useMemo)((function(){return Object.entries(e.settings).filter((function(e){var t=Object(c.a)(e,1)[0];return $e.includes(t)}))}),[e.settings]);Object(a.useEffect)((function(){!function(){for(var e=0,t=Array.from(document.querySelectorAll("."+[Ne.a.sectionListWrapper].join(".")));e<t.length;e++){var n=t[e],a=n.firstElementChild,r=n.className.includes(Ne.a.expanded)?a.getBoundingClientRect().height+"px":"0px";n.style.height=r}}()}),[JSON.stringify(n)]);var i=Object(a.useContext)(z),o=i.setAlert,s=i.closeAlert,l=Object(a.useCallback)((function(){o({message:r.a.createElement(r.a.Fragment,null,"How many pools should there be? ",r.a.createElement("br",null),r.a.createElement("div",{style:{height:20,margin:"1em 0"}},r.a.createElement(Ze,{content:"2",url:w+["tournament",e.status.id,"randomlyPoolAll"].join("/"),name:"pools",alwaysEnabled:!0,inputType:"number",show:{increment:!0,submit:!0,clear:!1,reset:!1},additionalInputProps:{min:1,max:e.players.length},onSubmitSuccess:function(){s(),e.updatePlayerDict(),e.settings.usingPools||e.updateTournamentSettings()}}))),title:"Randomly assign pools",type:"action"})}),[o,e.updatePlayerDict,e.status,s,e.players]),u=Object(a.useCallback)((function(n){var i,o=n.k,s=n.def,u=n.i,d=Xe({content:s.description,handleToggle:function(e){return t(o,e)},className:m()(Ne.a.desc,"scrollable")}),p=d.toggleHeight,f=d.description;Object(a.useEffect)((function(){var e=document.getElementById("poolButton");if(e)return e.innerHTML="Randomly assign pools",e.addEventListener("click",l),function(){return e.removeEventListener("click",l)}}));var b=!1;if(s.hidden)b=!0;else if(s.show)for(var g=function(){var t=Object(c.a)(y[A],2),n=t[0],a=t[1],r=e.settings[n];if(Array.isArray(a)){if(a.every((function(e){return e!==r})))return b=!0,"break"}else if(r!==a)return b=!0,"break"},A=0,y=Object.entries(s.show);A<y.length;A++){if("break"===g())break}if(b)return null;if(!1===e.mount)return r.a.createElement("div",{className:Ne.a.row,key:["row",u].join(".")},r.a.createElement("div",{className:["fieldBox","keyField"].join(" ")},s.name,s.name.endsWith("?")?"":":"));var E=!1;if(s.locked)E=!0;else if(s.lockOnInit&&e.status.round)E=!0;else if(s.lockWhen)for(var j=0,O=Object.entries(s.lockWhen);j<O.length;j++){var k=Object(c.a)(O[j],2),_=k[0],N=k[1];if(e.settings[_]===N){E=!0;break}}var S=null!==(i=e.settings[o])&&void 0!==i?i:s.defaultValue;s.value&&(S=s.value(e.status,e.players,e.settings));var C=s.convert?s.convert(S):"number"===s.type?S.toString():S;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ne.a.row,key:["row",u].join(".")},r.a.createElement("div",{className:["fieldBox","keyField",s.description?Ne.a.toggleKey:"",e.status.active&&s.highlight?Ne.a.semiPresent:""].join(" "),onClick:p},s.name,s.name.endsWith("?")?"":":",s.description?r.a.createElement("div",{className:["triangle",Ne.a.help].join(" ")},r.a.createElement(K.T,null)):null),E||!e.status.active||s.value?r.a.createElement("div",{style:{cursor:"link"===s.type?"copy":"default"},className:["fieldBox",Ne.a.locked].join(" "),onClick:"link"!==s.type?null:function(){return navigator.clipboard.writeText(C)}},"undefined"!==typeof C?C.toString():"\u200b"):s.enum||"string"!==s.type?s.enum||"number"!==s.type?r.a.createElement("div",{className:["fieldBox",Ne.a.editable,"boolean"===s.type?S?Ne.a.true:Ne.a.false:""].join(" "),onClick:function(){return t(o,S,s)}},"undefined"!==typeof C?C.toString():"\u200b"):r.a.createElement(Ze,{handleSubmit:function(t,n){return e.updateSetting(t,n,s)},content:C,url:["tournament",e.status.id,"updateSetting"].join("/"),inputType:"number",classNames:{editableField:Ne.a.editableField,input:Ne.a.input},name:o,additionalInputProps:s.nb,show:Object(h.a)({submit:!0,increment:!0},s.allow),useHandleSubmit:!0}):r.a.createElement(Ze,{handleSubmit:function(t,n){return e.updateSetting(t,n,s)},content:C,url:v.a.resolve(w,["tournament",e.status.id,s.action||"updateSetting"].join("/")),inputType:"text",classNames:{editableField:Ne.a.editableField,input:Ne.a.input},name:o,additionalInputProps:{},show:Object(h.a)({submit:!0},s.allow),useHandleSubmit:!0})),f)}),[e.settings,e.status,e.players,e.updateSetting,e.status.id,e.updateTournamentSettings,l,e.resize]);return{handleToggle:t,renderEntry:u,SettingsRow:u,watchedSettings:n}}var tt=n(9),nt=n.n(tt),at=n(299),rt=n.n(at),it=n(300),ot=n.n(it),st=n(301),lt=n.n(st),ct=n(302),ut=n.n(ct),mt=n(303),dt=n.n(mt);function pt(e){var t,n,i,o,s,l,u=e.result[0]||e.result[1]?[e.result[0],e.result[1]]:(null===(t=e.result[3])||void 0===t?void 0:t.scores)||[null,null],m=null!==e.result[0]||null!==e.result[1],d=u.some((function(e){return null!==e&&void 0!==e}))&&(null===(n=e.result[3])||void 0===n?void 0:n.endTime),p=Object(a.useState)(void 0),f=Object(c.a)(p,2),b=f[0],g=f[1],A=Object(a.useState)(d?"1 results submission to confirm":""),h=Object(c.a)(A,2),y=h[0],E=h[1],j=Object(a.useState)(!1),O=Object(c.a)(j,2),k=O[0],_=O[1],N=function(t){var n=t.target.parentElement,a=e.validate(n);E("string"===typeof a?a:""),g("boolean"===typeof a?a:"string"!==typeof a&&void 0);for(var r=0,i=Array.from(n.children);r<i.length;r++){var o=i[r];if("HTMLInputElement"===o.constructor.name&&("hidden"!==o.getAttribute("type")&&o.value.toString()))return void _(!0)}_(!1)},S=Object(a.useCallback)((function(e){var t=e.target,n=t.parentElement;switch(e.keyCode){case 27:n.reset(),g(void 0),E(void 0),t.blur();break;case 13:n.requestSubmit()}}),[N]),C=Object(a.useMemo)((function(){return Object.values(e.gameLinks).some((function(e){return e}))}),[e.gameLinks]),J=Object(a.useRef)(),x=Object(a.useRef)();return m?r.a.createElement("div",{className:ke.a.resultsBridge},r.a.createElement("div",{className:[ke.a.setResult,C?ke.a.linked:""].join(" ")},null!==(i=u[0])&&void 0!==i?i:"\u200b"),r.a.createElement("div",{className:ke.a.neutral,title:"Show details",onClick:function(){return e.expand(!e.expanded)},style:{transform:e.expanded?"rotate(540deg)":"rotate(0deg)"}},r.a.createElement(K.p,null)),r.a.createElement("div",{className:[m?ke.a.setResult:"",C?ke.a.linked:""].join(" ")},null!==(o=u[1])&&void 0!==o?o:"\u200b")):r.a.createElement("form",{className:ke.a.resultsBridge,target:"_self",onSubmit:function(t){t.preventDefault();var n=e.validate(t.target);"string"!==typeof n&&n&&R(t).then((function(){return e.handleSubmit(t)}))},onKeyDown:S,method:"POST",action:v.a.resolve(w,["tournament",e.tournamentID,"addResult"].join("/"))},r.a.createElement("input",{type:"number",min:0,step:null!==(s=e.step)&&void 0!==s?s:.5,name:"resultWhite",required:!0,className:[e.inputClassName,C?ke.a.linked:"",k||C?ke.a.alwaysVisible:"",C?ke.a.hasLink:""].join(" "),onChange:N,defaultValue:u[0],ref:J}),r.a.createElement("div",{className:ke.a.centre},y?r.a.createElement("span",{className:"tooltip"},y):null,b?r.a.createElement("button",{tabIndex:-1,className:ke.a.resolve,onClick:function(e){e.preventDefault(),e.target.parentElement.parentElement.requestSubmit()}},r.a.createElement(K.l,null)):!1===b?r.a.createElement("button",{tabIndex:-1,className:ke.a.reject,onClick:function(e){e.preventDefault(),e.target.parentElement.parentElement.reset(),E(""),g(void 0)}},r.a.createElement(K.fb,null)):r.a.createElement("div",{className:ke.a.neutral,title:"Show details",onClick:function(){return e.expand(!e.expanded)},style:{transform:e.expanded?"rotate(540deg)":"rotate(0deg)"}},r.a.createElement(K.p,null))),r.a.createElement("input",{type:"number",min:0,step:null!==(l=e.step)&&void 0!==l?l:.5,name:"resultBlack",required:!0,className:[e.inputClassName,C?ke.a.linked:"",k||C?ke.a.alwaysVisible:"",C?ke.a.hasLink:""].join(" "),onChange:N,defaultValue:u[1],ref:x}),Object.entries(e.hidden).map((function(e,t){var n=Object(c.a)(e,2),a=n[0],i=n[1];return r.a.createElement("input",{key:["hiddenInput",t].join("."),type:"hidden",name:a,value:i,required:!0})})))}function ft(e){var t,n,i=Object(a.useState)("0px"),o=Object(c.a)(i,2),s=o[0],l=o[1],u=e.result[0]||e.result[1]?[e.result[0],e.result[1]]:(null===(t=e.result[3])||void 0===t?void 0:t.scores)||[null,null],m=null!=e.result[0]||null!=e.result[1],d=u.some((function(e){return null!==e&&void 0!==e}))&&(null===(n=e.result[3])||void 0===n?void 0:n.endTime),p=Object(a.useState)(!1),f=Object(c.a)(p,2),b=f[0],g=f[1];Object(a.useEffect)((function(){if(!e.expanded){var t=setTimeout((function(){return g(!1)}),750);return function(){return clearTimeout(t)}}g(!0)}),[e.expanded,g]);var A=Object(a.useRef)(null),y=Object(a.useRef)(null),E=Object(a.useCallback)((function(){A.current&&l(e.expanded?A.current.getBoundingClientRect().height+"px":"0px")}),[l,e.expanded,A.current]);Object(a.useEffect)((function(){return window.addEventListener("resize",E),function(){return window.removeEventListener("resize",E)}}),[E]),Object(a.useEffect)((function(){e.expanded&&A.current&&E()}),[A.current,E,e.expanded]),Object(a.useEffect)((function(){window.dispatchEvent(new Event("resize"))}),[e.expanded,b]);var j=Object(a.useCallback)((function(){A.current&&A.current.parentElement.previousElementSibling.querySelector("form").requestSubmit()}),[A.current]),O=Object(a.useCallback)((function(t,n){var a,r=n;if(!e.individual){var i=n.match(P);if(!i)return console.error("Invalid syntax on tournament: "+n),Promise.resolve();r="https://chess.com/club/matches/live/"+i[1]}return D({url:v.a.resolve(w,["tournament",e.tournamentID,"updateResultLink"].join("/")),data:(a={id:e.id},Object(he.a)(a,t,r),Object(he.a)(a,"type",e.individual?"individual":"team"),Object(he.a)(a,"round",e.round),a)})}),[e.id,e.individual,e.tournamentID]),k=Object(a.useCallback)((function(t){return D({url:v.a.resolve(w,["tournament",e.tournamentID,"clearResultLink"].join("/")),data:{id:e.id,site:t,type:e.individual?"individual":"team",round:e.round}}).then(e.update)}),[e.id,e.individual,e.tournamentID,e.update]),_=Object(a.useCallback)((function(){return D({url:v.a.resolve(w,["tournament",e.tournamentID,"undoResult"].join("/")),data:{id:e.id,round:e.round}}).then(e.updatePlayerDict)}),[e.id,e.individual,e.tournamentID]),N=Object(a.useMemo)((function(){return[{k:"Results ".concat(d?"received":"not yet received"," from ").concat(Le.automation.source.convert(e.settings.source)),v:d,hide:!e.settings.source},{k:"Confirmation received by ".concat("White player"),v:!1,hide:e.settings.allowSelfLinks<1||e.settings.allowSelfLinks>2},{k:"Confirmation received by ".concat("Black player"),v:!1,hide:e.settings.allowSelfLinks<1||e.settings.allowSelfLinks>2}].filter((function(e){return e}))}),[e.settings.source,e.result,e.settings.allowSelfLinks]);return Object(a.useEffect)((function(){var e=function(){return window.dispatchEvent(new Event("resize"))};e();var t=setTimeout(e,200);return function(){return clearTimeout(t)}}),[b]),b?r.a.createElement("div",{className:[e.className,ke.a.details].join(" "),style:Object(h.a)({height:s},e.style)},r.a.createElement("div",{ref:A,className:[ke.a.detailsContent].join(" ")},r.a.createElement("div",{className:[ke.a.row,"topBanner",ke.a.topBanner].join(" ")},"Board: ",e.board,"\n"),r.a.createElement("div",{className:[ke.a.buttonRow].join(" ")},m?r.a.createElement("button",{className:[ke.a.button,ke.a.infinity,ke.a.undoPairing].join(" "),onClick:function(){return e.triggerConfirm("Really undo result? This action cannot be undone",_,(function(){}))}},r.a.createElement(K.ib,null),"Undo result"):d?r.a.createElement("button",{className:[ke.a.button,ke.a.submit].join(" "),onClick:j},r.a.createElement(K.l,null),"Confirm automation"):null),r.a.createElement("div",null,r.a.createElement("div",{className:ke.a.row},"Enter link to online ",e.individual?"game":"team match"," below:"),"chessCom"!==e.settings.source?null:r.a.createElement("div",{className:[ke.a.row,ke.a.linkRow].join(" ")},r.a.createElement("button",{className:[ke.a.submit,ke.a.linkSubmit].join(" ")},r.a.createElement("img",{src:rt.a,alt:"chess.com"})),r.a.createElement(Ze,{content:"chessCom"===e.gameLinks.source?e.gameLinks.link:"",url:v.a.resolve(w,["tournament",e.tournamentID,"updateResultLink"].join("/")),onSubmitSuccess:e.update,handleSubmit:function(e,t){return O("chessCom",t)},name:"link",additionalInputProps:{},classNames:{input:ke.a.inputURL,editableField:ke.a.editableField},formRef:y,useHandleSubmit:!0,handleClear:function(){return k("chessCom")},show:{submit:!0,clear:!0}})),"lichess"!==e.settings.source?null:r.a.createElement("div",{className:[ke.a.row,ke.a.linkRow].join(" ")},r.a.createElement("button",{className:[ke.a.increment,ke.a.linkSubmit].join(" ")},r.a.createElement("img",{src:ot.a,alt:"lichess"})),r.a.createElement(Ze,{content:"lichess"===e.gameLinks.source?e.gameLinks.link:"",url:v.a.resolve(w,["tournament",e.tournamentID,"updateResultLink"].join("/")),onSubmitSuccess:e.update,handleSubmit:function(e,t){return O("lichess",t)},name:"link",additionalInputProps:{},classNames:{input:ke.a.inputURL,editableField:ke.a.editableField},formRef:y,useHandleSubmit:!0,handleClear:function(){return k("lichess")},show:{submit:!0,clear:!0}}))),r.a.createElement("div",{className:ke.a.validationTable},N.map((function(e){var t=e.k,n=e.v;return e.hide?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,t),r.a.createElement("div",null,n?r.a.createElement(K.m,null):r.a.createElement(K.gb,null)))}))))):null}function bt(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),i=n[0],o=n[1],s=Object(a.useState)(null),l=Object(c.a)(s,2),u=l[0],m=l[1],d=Object(a.useState)(!1),p=Object(c.a)(d,2),f=p[0],b=p[1],g=Object(a.useState)(""),A=Object(c.a)(g,2),h=A[0],y=A[1],E=Object(a.useRef)(null),j=Object(a.useCallback)((function(t){if(!t)return"\u200b";if("bye"===t)return"BYE";var n=e.playerDict.get(t);return n?"individual"===e.settings.competitors?[n.firstName,n.lastName].join(" "):n.firstName:t}),[e.playerDict,"individual"===e.settings.competitors]);Object(a.useEffect)((function(){if(b(!1),i&&u){if("bye"===i.id&&"bye"===u.id)return y("Cannot pair BYE with BYE");if(i.histories&&i.histories[e.round]&&!i.histories[e.round].match)return y(j(i.id)+" is already paired");if(u.histories&&u.histories[e.round]&&!u.histories[e.round].match)return y(j(u.id)+" is already paired");y(""),b(!0)}}),[i,u]);var O=Object(a.useCallback)((function(t){var n=t.target;if(t.nativeEvent.data){var a=n.value;if(a.trim()){var r=a.length,i=[{id:"bye"}].concat(Object(je.a)(Array.from(e.playerDict.values()))).filter((function(e){return j(e.id).toLowerCase().startsWith(a.toLowerCase())}))[0];if(i){var s=j(i.id);n.value=s,n.select(),n.setSelectionRange(r,s.length,"forward"),"idW"===n.name?o(i):m(i)}}}else"idW"===n.name?o(null):m(null)}),[e.playerDict]),k=Object(a.useCallback)((function(t){switch(t.keyCode){case 27:return e.close();case 13:var n=E.current;if(!n)return;n.requestSubmit(),t.preventDefault()}}),[e.close]);return r.a.createElement("form",{ref:E,target:"_self",onKeyDown:k,onSubmit:function(t){t.preventDefault(),D({url:v.a.resolve(w,["tournament",e.tournamentID,"manualPairing"].join("/")),data:{idW:i.id,idB:u.id,round:e.round}}).then((function(){return e.handleSubmit(t)}))},method:"POST",action:v.a.resolve(w,["tournament",e.tournamentID,"manualPairing"].join("/"))},r.a.createElement("div",{className:nt.a.manualResultsBridge},r.a.createElement("input",{onInput:O,autoComplete:"off",placeholder:"White",className:["playerInfo",nt.a.playerInfo].join(" "),name:"idW",style:{gridArea:"white"}}),r.a.createElement("div",{className:nt.a.scoreSpacer,style:{gridArea:"wR"}}),r.a.createElement("div",{className:nt.a.centre,style:{gridArea:"dash"}},h?r.a.createElement("span",{className:"tooltip"},h):null,f?r.a.createElement("button",{tabIndex:-1,className:ke.a.resolve},r.a.createElement(K.l,null)):r.a.createElement("button",{tabIndex:-1,className:ke.a.reject,onClick:e.close},r.a.createElement(K.fb,null))),r.a.createElement("div",{className:nt.a.scoreSpacer,style:{gridArea:"bR"}}),r.a.createElement("input",{onInput:O,autoComplete:"off",placeholder:"Black",className:["playerInfo",nt.a.playerInfo].join(" "),name:"idB",style:{gridArea:"black"}})))}function gt(e){var t=!1;t="undefined"!==typeof e.lastRoundOverride?e.lastRoundOverride:!e.status.active;var n=v.a.resolve(w,["tournament",e.status.id,"setName"].join("/")),i=Object(a.useMemo)((function(){return e.userRound||e.status.round}),[e.userRound,e.status.round]),o=Object(a.useCallback)((function(){i>1&&(e.setRound(i-1),e.switchPairings(!1))}),[i,e.setRound,e.switchPairings]),s=Object(a.useContext)(W),l=Object(a.useCallback)((function(){i<e.status.round&&(e.setRound(i+1),e.switchPairings(!1))}),[i,e.setRound,e.switchPairings]),u=Object(a.useContext)(q),m=Object(a.useState)(!1),d=Object(c.a)(m,2),p=d[0],f=d[1],b="";return b=e.status.round?t&&!e.status.active?Ee.a.finished:e.status.active?Ee.a.active:Ee.a.paused:Ee.a.pending,r.a.createElement("div",{className:Ee.a.titleBar},r.a.createElement("div",{className:Ee.a.stage},r.a.createElement("div",{className:[Ee.a.row,Ee.a.headerBar,p?Ee.a.expanded:""].join(" ")},r.a.createElement("div",{className:[Ee.a.header].join(" "),onClick:function(){return p?f(!1):null}},r.a.createElement(Ze,{content:e.status.name,url:n,inputType:"text",handleSubmit:function(e,t){return D({url:n,data:Object(he.a)({},e,t)})},classNames:Ee.a,additionalInputProps:{},onSubmitSuccess:e.updateTournamentStatus,defaultContent:u?"Unnamed ".concat(Ie(e.settings.pairingSystem)," Tournament"):"",show:{submit:!0}})),e.status.round?p?r.a.createElement("div",{className:["button",Ee.a.searchButton].join(" ")},r.a.createElement(we,{onSubmit:function(t){f(!1),e.search(t)},onCancel:function(){return f(!1)},onChange:e.filterPairings,options:e.players,getName:s,styles:Ee.a,placeholder:"Search All Players",showHistory:!1,showChoices:!1,cacheHistory:!1,preserveLastSearch:!0})):r.a.createElement("div",{className:["button",Ee.a.button].join(" "),onClick:function(){return f(!0)}},r.a.createElement(K.X,null)):null),r.a.createElement("div",{className:[Ee.a.row,Ee.a.statusBar].join(" ")},r.a.createElement("div",{id:Ee.a.previous,className:[i>1?"button":Ee.a.fixed].join(" "),onClick:o},u?r.a.createElement(K.c,null):null),r.a.createElement("div",{className:[Ee.a.fixed,Ee.a.round,b].join(" ")},u?r.a.createElement(r.a.Fragment,null,"Round: ",i?i+" / "+("Infinity"===e.totalRounds?"\u221e":e.totalRounds):"Not yet initialised"):null),r.a.createElement("div",{id:Ee.a.next,className:[i<e.status.round?"button":Ee.a.fixed].join(" "),onClick:l},u?r.a.createElement(K.d,null):null))))}var At=n(47),vt=n.n(At),ht=n(52),yt=n(165),Et=n(170),jt=n.n(Et);function Ot(e){var t=e.defaultValue,n=e.isTernary,i=Object(a.useState)(t),o=Object(c.a)(i,2),s=o[0],l=o[1];return Object(a.useEffect)((function(){l(t)}),[t]),!0===s?r.a.createElement(K.m,{className:jt.a.check,onClick:function(){l(!1),e.setValue(!1)}}):!1===s&&n?r.a.createElement(K.f,{className:jt.a.ban,onClick:function(){var t=!n||void 0;l(t),e.setValue(t)}}):r.a.createElement(K.q,{className:jt.a.blank,onClick:function(){l(!0),e.setValue(!0)}})}var kt=n(53),_t=n.n(kt),Nt=n(99),St=n.n(Nt);function wt(e){var t=Object(a.useReducer)((function(e,t){return null!==t&&void 0!==t?t:!e}),!!e.expanded),n=Object(c.a)(t,2),i=n[0],o=n[1],s=Object(a.useState)(0),l=Object(c.a)(s,2),u=l[0],d=l[1],p=Object(a.useRef)(),f=Object(a.useRef)(),b=Object(a.useCallback)((function(){f.current&&d(i?f.current.getBoundingClientRect().height:0)}),[d,i,f]);Object(a.useEffect)((function(){b()}),[b]);var g=Object(a.useCallback)((function(e){p.current&&(p.current===e.target||p.current.contains(e.target)||o(!1))}),[p,o]);Object(a.useEffect)((function(){return document.addEventListener("click",g),function(){return document.removeEventListener("click",g)}}),[g]);var A=Object(a.useMemo)((function(){if(Array.isArray(e.options))return{name:Ie(e.current)};var t=e.options[e.current];return"string"===typeof t?{name:t}:t}),[e.options,e.current]);return r.a.createElement("div",{className:m()(St.a.container),ref:p},r.a.createElement("div",{className:m()("button",St.a.header,e.className),onClick:function(){return o()}},e.headerIcon,e.title||A.name,r.a.createElement(K.c,{className:St.a.toggle,style:{transform:i?"rotate(-90deg)":"rotate(0deg)"}})),r.a.createElement("div",{className:St.a.wrapper,style:{height:u}},r.a.createElement("ul",{className:St.a.list,ref:f},Object.entries(e.options).map((function(t,n){var a=Object(c.a)(t,2),i=a[0],s=a[1];if(!s)return null;var l=s;return"object"===typeof l&&l.hide?null:r.a.createElement("li",{key:[l,n].join("."),onClick:function(t){Array.isArray(e.options)?e.resolve(s):e.resolve(i),o(),t.stopPropagation()}},"string"===typeof l?Array.isArray(e.options)?Ie(l):l:l.name)})))))}function Ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{baseColors:[]},t=e.baseColors,n=e.hasLoaded;function a(e){var a;if(!1===n)return null;var i=t[null!==(a=e.container)&&void 0!==a?a:0];return e.color&&(i=e.color),r.a.isValidElement(e.icon)?r.a.cloneElement(e.icon,Object(h.a)({id:e.icon.type,className:e.className},e.icon.props,{style:Object(h.a)({},e.icon.props.style,{},e.style,{color:i})})):r.a.createElement(e.icon,{id:e.icon.name,className:e.className,style:Object(h.a)({},e.style,{color:i})})}return{Icon:a}}function Jt(e){var t,n=Object(a.useContext)(X),i=Object(a.useContext)(Y),o=Object(a.useMemo)((function(){return{pasteInput:{name:"Smart Input mode"},export:{name:"Export mode",hide:!0},settings:{name:"Detailed settings view"},crossTable:{name:"Cross-table"},announcements:{name:"Announcements",hide:!i.public},knockout:{name:"Knockout pairing view",hide:"knockout"!==i.pairingSystem},sort:{name:"Quick Drag & Drop"}}}),[i]),s=Ct().Icon;return r.a.createElement("div",{className:m()(_t.a.stage,Object(he.a)({},_t.a.short,e.short),e.className),ref:e.ref},r.a.createElement("div",{className:_t.a.titleContainer},r.a.createElement("div",{className:_t.a.titleWrapper},r.a.createElement("div",{className:_t.a.titles},r.a.createElement(wt,{current:e.id,options:o,title:e.title,resolve:n,className:m()("button",_t.a.button)}),null===(t=e.buttons)||void 0===t?void 0:t.map((function(e,t){return"dropdown"in e?r.a.createElement(wt,Object.assign({},e,{className:m()("button",_t.a.button)})):e.href?r.a.createElement(Ge,{to:e.href,key:m()(e.name,t),className:m()("button",_t.a.button)},r.a.createElement(s,e),e.name):r.a.createElement("div",{key:m()(e.name,t),className:m()("button",_t.a.button),onClick:e.onClick},r.a.createElement(s,e),e.name)})),r.a.createElement("div",{className:m()("button",_t.a.closeButton),onClick:function(){return n("")}},r.a.createElement(ht.b,{style:{color:"indianred"}}),"Back to tournament")))),r.a.createElement("div",{ref:e.childRef,className:m()(_t.a.body,e.childClass,{scrollable:!1!==e.scrollable,"scrollable-x":!0})},e.children))}var xt=n(30),Dt=n.n(xt),Rt="\nALA\nALA\nASM\nASM\nAIA\nAIA\nATA\nATA\nATG\nATG\nABW\nABW\nBHR\nBHR\nBRB\nBRB\nBEN\nBEN\nBTN\nBTN\nBWA\nBWA\nBVT\nBVT\nVGB\nVGB\nIOT\nIOT\nBFA\nBFA\nKHM\nKHM\nCYM\nCYM\nCAF\nCAF\nTCD\nTCD\nCXR\nCXR\nCCK\nCCK\nCOG\nCOG\nCOK\nCOK\nCRI\nCRI\nHRV\nHRV\nDNK\nDNK\nDMA\nDMA\nSLV\nSLV\nGNQ\nGNQ\nFLK\nFLK\nGUF\nGUF\nPYF\nPYF\nATF\nATF\nGMB\nGMB\nGRL\nGRL\nGRD\nGRD\nGLP\nGLP\nGTM\nGTM\nGGY\nGGY\nGIN\nGIN\nGNB\nGNB\nHTI\nHTI\nHMD\nHMD\nVAT\nVAT\nHND\nHND\nIDN\nIDN\nIRN\nIRN\nIMN\nIMN\nJEY\nJEY\nKIR\nKIR\nPRK\nPRK\nKWT\nKWT\nLVA\nLVA\nLSO\nLSO\nLBY\nLBY\nMDG\nMDG\nMWI\nMWI\nMHL\nMHL\nMTQ\nMTQ\nMRT\nMRT\nMUS\nMUS\nMYT\nMYT\nFSM\nFSM\nMCO\nMCO\nMNG\nMNG\nMSR\nMSR\nMMR\nMMR\nNPL\nNPL\nNLD\nNLD\nNCL\nNCL\nNIC\nNIC\nNER\nNER\nNGA\nNGA\nNIU\nNIU\nNFK\nNFK\nMNP\nMNP\nOMN\nOMN\nPSE\nPSE\nPRY\nPRY\nPCN\nPCN\nPRI\nPRI\nREU\nREU\nBLM\nBLM\nSHN\nSHN\nMAF\nMAF\nKNA\nKNA\nSPM\nSPM\nVCT\nVCT\nSAU\nSAU\nWSM\nWSM\nSLB\nSLB\nSYC\nSYC\nSGS\nSGS\nLKA\nLKA\nSDN\nSDN\nSJM\nSJM\nCHE\nCHE\nTWN\nTWN\nTZA\nTZA\nTGO\nTGO\nTKL\nTKL\nTON\nTON\nTCA\nTCA\nTUV\nTUV\nARE\nARE\nUMI\nUMI\nURY\nURY\nVUT\nVUT\nVNM\nVNM\nVIR\nVIR\nWLF\nWLF\nESH\n",Bt=n(61),It=n.n(Bt),Pt=n(476);function Tt(e){var t=Object(a.useState)(-2),n=Object(c.a)(t,2),i=n[0],o=n[1],s=Object(a.useState)(-2),l=Object(c.a)(s,2),u=l[0],d=l[1],p=Object(a.useState)(43),f=Object(c.a)(p,2),b=f[0],g=f[1],A=Object(a.useState)(e.children),v=Object(c.a)(A,2),h=v[0],y=v[1],E=Object(a.useMemo)((function(){return e.children.map((function(e){return e.props.id}))}),[e.children]),j=Object(a.useMemo)((function(){return E.indexOf("null")}),[E]),O=Object(a.useMemo)((function(){return h.map((function(e){return e.props.id}))}),[h]),k=Object(a.useMemo)((function(){for(var e=0;e<E.length;e++)if(E[e]!==O[e])return!0;return!1}),[E,O]),_=Object(a.useState)(!0),N=Object(c.a)(_,2),S=N[0],w=N[1];Object(a.useEffect)((function(){y(e.children),d(-2)}),[e.children,d]);var C=Object(a.useCallback)((function(e){var t=e.target;t&&(o(O.indexOf(t.id)),g(t.getBoundingClientRect().height))}),[O,o,e.onDrag,g]),J=Object(a.useCallback)((function(t){var n=t.target;e.onDragOver&&e.onDragOver(n.id),"last"===n.id?d(O.length):i<0?d(O.indexOf(n.id)):O.indexOf(n.id)===i+1||O.indexOf(n.id)===i?d(-2):d(O.indexOf(n.id))}),[O,d,i,e.onDragOver]),x=Object(a.useCallback)((function(t){if(!(i<=-2)){var n=h[i];if(e.onDragEnd&&e.onDragEnd(n.props.id),!(u<=-2)){var a=h[u],r=h.slice(0);n&&r.splice(i,1),a&&r.splice(u===h.length?r.length:r.indexOf(a),0,n),y(r),o(-2),d(-2)}}}),[d,o,i,u,h,y,e.onDragEnd]),D=Object(a.useCallback)((function(){e.onReset&&e.onReset(),y(e.children)}),[y,e.children,e.onReset]),R=Object(a.useCallback)((function(){e.onSubmit(O)}),[e.onSubmit,O]);return Object(a.useEffect)((function(){var e=function(){return w(!0)},t=function(){return w(!1)};return document.addEventListener("mousedown",e),document.addEventListener("mouseup",t),document.addEventListener("dragend",t),function(){document.removeEventListener("mousedown",e),document.removeEventListener("mouseup",t),document.removeEventListener("dragend",t)}}),[w]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:m()(It.a.wrapper,"scrollable")},r.a.createElement("div",{className:m()(e.className)},h.map((function(t,n){return e.filter&&!e.filter(t,n)?null:r.a.createElement("div",{key:m()("draggable","div",n),id:t.props.id,className:m()(It.a.listElement,Object(he.a)({},It.a.columns,e.numbers)),draggable:!0,onDragStart:C,onDragEnd:x,onDragOver:J,style:{marginTop:u===O.indexOf(t.props.id)&&b?b+10+"px":0}},"null"!==t.props.id&&e.numbers?r.a.createElement("div",{className:m()(It.a.number,"fieldBox",Object(he.a)({},It.a.ignored,E.indexOf(t.props.id)>j))},r.a.createElement(r.a.Fragment,null,"#",E.indexOf(t.props.id)+1)):null,r.a.cloneElement(t,{}))}))),r.a.createElement("div",{id:"last",onDragOver:J,className:m()(It.a.spacer,Object(he.a)({},It.a.highlighted,S))})),r.a.createElement("div",{className:It.a.buttonContainer,onDragOver:J,style:{marginTop:u===h.length&&b?b+10+"px":0}},r.a.createElement("div",{className:m()("fieldBox",It.a.tbReset),id:"last",onDragOver:J,onClick:D,style:{opacity:"alwaysShowButtons"in e?+e.alwaysShowButtons:+k}},r.a.createElement(Pt.a,null),"RESET"),r.a.createElement("div",{className:m()("fieldBox",It.a.tbSubmit),id:"last",onClick:R,style:{opacity:"alwaysShowButtons"in e?+e.alwaysShowButtons:+k}},r.a.createElement(K.W,null),"SAVE")))}function Mt(e){return r.a.createElement("div",{className:ke.a.tabSection,style:{gridAutoColumns:e.static?"1fr":void 0}},Object.entries(e.nameDict).map((function(t,n,a){var i,o=Object(c.a)(t,2),s=o[0],l=o[1];return l?r.a.createElement("div",{key:[s,n].join("."),onClick:function(){return e.setName(s)},className:m()(ke.a.tab,(i={},Object(he.a)(i,ke.a.alone,1===a.filter((function(e){return e[1]})).length),Object(he.a)(i,ke.a.active,s===e.name),i))},l&&!1!==e.hasLoaded?l:"\u200b"):null})))}var Ft=Rt.split("\n").filter((function(e){return e}));function Lt(e){var t=Object(a.useContext)(Y),n=Object(a.useContext)(z).setAlert,i=Object(a.useReducer)((function(e,t){var n=Object.assign({},e);return n[t.id]=t,n}),{}),o=Object(c.a)(i,2),s=o[0],l=o[1],u=Object(a.useReducer)((function(e,t){if(Array.isArray(t))return t;var n=e.findIndex((function(e){return e.id===t.id})),a=e.slice(0);return a.splice(n,1,t),l(t),a}),e.players),d=Object(c.a)(u,2),p=d[0],f=d[1];Object(a.useEffect)((function(){e.setPlayers&&e.setPlayers(Object.values(s))}),[e.setPlayers,s]);var b=Object(a.useCallback)((function(){f(e.players)}),[f,e.players]);Object(a.useEffect)((function(){b(),window.handleReset=b}),[b]);var g=Object(a.useState)(e.mode||"nationality"),A=Object(c.a)(g,2),v=A[0],h=A[1],y=Object(a.useState)([]),E=Object(c.a)(y,2),j=E[0],O=E[1],k=Object(a.useCallback)((function(){return x({url:Be("tournament",t.tournamentId,"getTeams")}).then(O)}),[t,O]);Object(a.useEffect)((function(){"teams"===v&&k()}),[v,k]);var _=Object(a.useMemo)((function(){return{nationality:{options:Object.keys(xe).filter((function(e){return!Ft.includes(e)})).map((function(e){return{id:e}})),name:function(e){return xe[e.id]},filter:function(e,t){return e?t.nationality===e:!t.nationality},modify:function(e,t){return Object.assign({},e,{nationality:t})}},teams:{options:j,name:function(e){var t,n=e.id;return null===(t=j.find((function(e){return e.id===n})))||void 0===t?void 0:t.name},filter:function(e,t){return e?t.teamId===e:!t.teamId},modify:function(e,t){return Object.assign({},e,{teamId:t})}},pools:{options:p.reduce((function(e,t){if(t.pool+1<e.length)return e;for(var n=e.length;n<=t.pool+1;n++)e[n]={id:n.toString()};return e}),[]),name:function(e){return Te(parseInt(e.id),t.poolDisplay)},filter:function(e,t){return e?t.pool===parseInt(e):!t.pool},modify:function(e,t){return Object.assign({},e,{pool:parseInt(t)})}},active:{options:[{id:"active"},{id:"inactive"}],name:function(e){return Ie(e.id)},filter:function(e,t){return"active"===e&&t.active||"inactive"===e&&!t.active},modify:function(e,t){return Object.assign({},e,{active:"active"===t})}}}}),[p,j,t]),N=Object(a.useMemo)((function(){return _[v]}),[_,v]),S=Object(a.useState)(!1),w=Object(c.a)(S,2),C=w[0],J=w[1],R=Object(a.useState)([]),B=Object(c.a)(R,2),I=B[0],P=B[1],T=Object(a.useReducer)((function(e,t){return e===t?"":t}),e.startTo||""),M=Object(c.a)(T,2),F=M[0],L=M[1],H=Object(a.useState)("all"),U=Object(c.a)(H,2),Q=U[0],G=U[1],V=Object(a.useMemo)((function(){return r.a.createElement("div",{className:m()(Dt.a.templates,"scrollable")},N.options.map((function(e,t){var n,a=e.id,i=a,o=N.name({id:a});return"pools"===v&&"0"==a?null:o?r.a.createElement("div",{key:m()("template",t),onClick:function(){return L(i)},className:m()("button",(n={hidden:I.length&&!I.includes(i)},Object(he.a)(n,Dt.a.large,"nationality"!==v),Object(he.a)(n,Dt.a.unrepresented,p.every((function(e){return!N.filter(i,e)}))),Object(he.a)(n,Dt.a.selected,F===i),n))},"nationality"===v?r.a.createElement(r.a.Fragment,null,function(e){if(!e)return null;var t=xe[e],n="https://ratings.fide.com/svg/|.svg".replace("|",e),a=De.includes(e);return a&&(n="/flags/|.svg".replace("|",e)),r.a.createElement("img",{src:n,alt:e,title:t,"data-custom-flag":!!a||void 0})}(i),o):o):null})))}),[v,N,p,I,F]),W=Object(a.useState)(""),q=Object(c.a)(W,2),X=q[0],Z=q[1],$=Object(a.useCallback)((function(e){var t=p.find((function(t){return t.id===e})),n="";if("from"===X){if("all"===Q)return;n=""}else n=F;var a=N.modify(t,n);f(a)}),[X,f,N]),ee=Object(a.useCallback)((function(){D({url:Be("tournament",t.tournamentId,"quickSort"),data:{mode:v,players:s}}).then(e.updatePlayerDict).then((function(){return n({type:"info",message:r.a.createElement(r.a.Fragment,null,"Updated ",v," for the following ","individual"===t.competitors?"players":"teams",":",r.a.createElement("ul",null,Object.values(s).map((function(e){return r.a.createElement("li",{key:e.id},e.name)}))))})}))}),[t,s,e.updatePlayerDict]);return r.a.createElement(Jt,{id:"sort",className:e.className,scrollable:!1,buttons:[{dropdown:!0,resolve:h,current:v,options:["nationality","individual"===t.competitors?"teams":null,t.usingPools?"pools":null,"active"]}]},r.a.createElement("div",{className:Dt.a.description},e.description),r.a.createElement("div",{className:Dt.a.stage},r.a.createElement("div",{className:m()(Dt.a.col1)},r.a.createElement("div",{className:m()(Dt.a.row,Object(he.a)({},Dt.a.expanded,C))},r.a.createElement("div",{className:Dt.a.header,onClick:function(){return C?J(!1):null}},Ie("pools"===v&&e.poolName?e.poolName+"s":v)),C?r.a.createElement("div",{className:["button",Dt.a.searchButton].join(" ")},r.a.createElement(we,{onSubmit:function(){return J(!1)},onCancel:function(){return J(!1)},onChange:P,options:N.options,getName:N.name,styles:Dt.a,placeholder:"Search All "+Ie(v),showHistory:!1,showChoices:!1,cacheHistory:!1,preserveLastSearch:!0})):r.a.createElement("div",{className:m()("button",Dt.a.button),onClick:function(){return J(!0)}},r.a.createElement(K.X,null))),V,I.length?r.a.createElement("div",{onClick:function(){return P([])},className:m()("button",Dt.a.clear)},"Clear Search Parameters"):null),r.a.createElement("div",{className:Dt.a.col2},r.a.createElement(Ht,Object.assign({type:"to",category:F},{players:p,rightFilter:Q,setRightFilter:G,poolName:e.poolName,meta:N,mode:v,setToType:Z,handleDragEnd:$,handleSubmit:ee,handleReset:b,showSave:e.showSave}))),r.a.createElement("div",{className:Dt.a.col3},r.a.createElement(Ht,Object.assign({type:"from",category:""},{players:p,rightFilter:Q,setRightFilter:G,poolName:e.poolName,meta:N,mode:v,setToType:Z,handleDragEnd:$,handleSubmit:ee})))))}function Ht(e){var t=e.type,n=e.category,i=e.players,o=e.rightFilter,s=e.setRightFilter,l=e.poolName,u=e.meta,d=e.mode,p=e.setToType,f=e.handleDragEnd,b=e.handleSubmit,g=e.handleReset,A=e.showSave,v=Object(a.useState)("active"),h=Object(c.a)(v,2),y=h[0],E=h[1],j=[i.filter((function(e){return u.filter("active",e)})),i.filter((function(e){return u.filter("inactive",e)}))],O=j[0],k=j[1],_=u.name({id:n}),N=_?i.filter((function(e){return u.filter(n,e)})):i,S=i.filter((function(e){return u.filter(null,e)}));"from"===t&&"uncategorised"===o&&(N=S),"active"===d&&"from"===t&&(N=i.filter((function(e){return u.filter(y,e)})));return r.a.createElement(r.a.Fragment,null,"active"===d&&"from"===t?r.a.createElement(Mt,{name:y,setName:E,nameDict:{active:r.a.createElement(r.a.Fragment,null,"Active (",O.length,")"),inactive:r.a.createElement(r.a.Fragment,null,"Inactive (",k.length,")")}}):r.a.createElement(Mt,{name:o,setName:s,nameDict:{all:r.a.createElement(r.a.Fragment,null,_?"pools"===d?(l||"Pool")+" "+_:_:"All"," (","from"===t?i.length:N.length,")"),uncategorised:"from"===t?r.a.createElement(r.a.Fragment,null,"Uncategorised (",S.length,")"):null}}),r.a.createElement(Tt,{className:m()(Dt.a.list,"scrollable"),onSubmit:b,onReset:g,onDragOver:function(){return p(t)},onDragEnd:function(e){return f(e)},alwaysShowButtons:"to"===t&&!1!==A},N.sort((function(e,t){return t.score-e.score})).map((function(e,n){return r.a.createElement("div",{key:m()(e.id,n),id:e.id,draggable:!0,className:m()("fieldBox",Dt.a.player),"data-drag-id":t},e.name)}))))}var Ut=[{key:"link",name:"Link",func:function(e){return!!e.link},show:function(e){return!!e.source}},{key:"started",name:"Started",func:function(e){var t;return!!(null===(t=e.fetched)||void 0===t?void 0:t.startTime)},show:function(e){return!!e.pullResults}},{key:"unfinished",name:"Unfinished",func:function(e,t){return null==t[0]&&null==t[1]}}],Qt=["rgb(150, 150, 255)","yellow","indianred"];function Gt(e){Object(a.useMemo)((function(){return e.userRound||e.status.round}),[e.userRound,e.status.round]);var t=!1;t="undefined"!==typeof e.lastRoundOverride?e.lastRoundOverride:!e.status.active;var n=Object(a.useContext)(q),i=Object(a.useContext)(z),o=i.setAlert,s=i.closeAlert,l=i.startLoading,u=i.stopLoading,p=Object(a.useCallback)((function(){o({type:"confirm",message:"Really undo all pairings for this round?",resolve:function(){return D({url:["tournament",e.status.id,"undoRoundPairings"].join("/"),data:{round:e.status.round}}).then(s).then(e.load)}})}),[e.status.id,e.status.round,e.load,e.switchPairings,o]),f=Object(a.useCallback)((function(){var t=e.status.name||e.status.id;o({type:"confirm",message:"Delete tournament '"+t+"'?\nPlease note this action cannot be undone.",resolve:function(){return D({url:["tournament",e.status.id,"closeAuthorization"].join("/"),data:{round:e.status.round}}).then(e.closeTournament)}})}),[e.status.id,e.status.round,e.closeTournament,e.status.name,o]),b=Object(a.useReducer)((function(e,t){return e===t?"":t}),""),g=Object(c.a)(b,2),A=g[0],v=g[1],h=Object(a.useState)([]),y=Object(c.a)(h,2),E=y[0],j=y[1],O=Object(a.useCallback)((function(){return D({url:Be("tournament",e.status.id,"startKnockout"),data:{players:E}}).then(s).then(e.load)}),[e.load,e.status.id,E,e.load]),k=Object(a.useMemo)((function(){return r.a.createElement(Lt,{className:vt.a.sort,updatePlayerDict:e.updatePlayerDict,mode:"pools",poolName:"Bracket",players:e.players.map((function(e){return e.pool=null,e})),setPlayers:j,showSave:!1,startTo:"1",description:r.a.createElement(r.a.Fragment,null,"Please select which ","individual"===e.settings.competitors?"players":"teams"," you would like to take through to the next stage of the tournament.",r.a.createElement("br",null),"You can also group your ","individual"===e.settings.competitors?"players":"teams"," into brackets.")})}),[e.updatePlayerDict,e.players,j]),_=Object(a.useReducer)((function(){return Math.random().toString(16).slice(2,8)}),""),N=Object(c.a)(_,2),S=N[0],w=N[1];Object(a.useEffect)((function(){S&&o({title:r.a.createElement(r.a.Fragment,null,"Convert to Knockout finals"),type:"confirm",message:k,resolve:O,tall:!0,wide:!0})}),[S,o,e.settings,E,O]);var C=Object(a.useContext)(Z).nextButton,J=[{icon:K.B,name:"Smart Import Players",onClick:function(){return e.setMode("pasteInput")}},{name:"Export Mode",icon:K.A,inactive:!0,onClick:function(){return e.setMode("export")}},{name:"Detailed Settings View",icon:K.t,onClick:function(){return e.setMode("settings")}},{name:"Crosstable",onClick:function(){return e.setMode("crossTable")},icon:K.eb,inactive:!e.status.round},{name:"Announcements",icon:K.i,onClick:function(){return e.setMode("announcements")},inactive:!e.settings.public},{name:"Knockout View",icon:K.Y,onClick:function(){return e.setMode("knockout")},inactive:"knockout"!==e.settings.pairingSystem||!e.status.round},{name:"Quick Drag & Drop",icon:r.a.createElement(K.ab,null),onClick:function(){return e.setMode("sort")}},"divider",{name:t?"Resume Tournament":"Pause Tournament",onClick:function(){t&&e.status.round>=e.settings.totalRounds?e.triggerError("Increase the number of rounds in Settings to continue!"):e.setLastRound(!t)},icon:t?K.P:K.M},{name:"Refresh",icon:K.db,onClick:function(){l(),e.load().finally(u)},hide:!1},{name:e.switchMode?"Back":"Switch or Undo Pairings",style:{strokeWidth:1.5},icon:yt.a,active:e.switchMode,onClick:function(){return e.switchPairings()},inactive:function(){var t;switch(e.settings.pairingSystem){case"swiss":return!e.status.round||!e.status.active;case"round-robin":return!1;case"knockout":return!(e.status.round<=1)&&!(null===(t=e.status.systems)||void 0===t?void 0:t.some((function(t){return e.status.round===t.from})));default:return!0}}()},{name:"Undo Last Round Pairings",icon:K.h,color:"indianred",onClick:p},{name:"Convert to Knockout finals",icon:K.U,onClick:w,inactive:!["next","last","publish-final"].includes(C)},{name:"Jump to Next Unfinished Pairing",icon:K.a,inactive:!e.canSetOutstanding,onClick:e.nextOutstanding},{name:"Filter Pairings",icon:K.C,color:"darkgreen",ternaryOptions:!0,onClick:function(){return v("Filter Pairings")},active:!!A,options:Ut},{name:"Player Details",icon:K.cb,onClick:function(){return v("Player Details")},hide:!0,inactive:!0,options:[{name:"Name",locked:!0,defaultValue:!0},{name:"Score"},{name:"Board"},{name:"Rating"}]},{name:"Reset Layout",icon:K.e,onClick:e.resetColumns,inactive:!e.canReset},"divider",{name:"Check for Updates",icon:K.hb,onClick:function(){l(),e.checkForUpdates().finally(u)},hide:!d},{name:"Destroy Tournament",icon:K.Z,style:{strokeWidth:1.5},onClick:f},{name:"Exit to Menu",icon:ht.b,style:{strokeWidth:1.5},onClick:e.closeTournament}],x=Ct({baseColors:Qt,hasLoaded:n}).Icon;return r.a.createElement("div",{className:vt.a.dock},r.a.createElement("div",{className:m()(vt.a.stage,"scrollable")},r.a.createElement("div",{className:[vt.a.column].join(" ")},J.map((function(t,a,i){var o=i.slice(0,a+1).filter((function(e){return"string"===typeof e})).length;return"string"===typeof t?r.a.createElement("div",{key:["divider",a].join("."),className:vt.a.container},r.a.createElement(K.F,null)):t.hide?null:r.a.createElement("div",{key:[t.name,a].join("."),className:[vt.a.container,t.active?vt.a.active:""].join(" ")},r.a.createElement("div",{className:["button",vt.a.button,n&&t.inactive?"null":""].join(" "),onClick:t.onClick},r.a.createElement(x,Object.assign({},t,{container:o}))),r.a.createElement("div",{className:vt.a.name},t.name),t.options?r.a.createElement("div",{className:[vt.a.options,A===t.name?vt.a.visible:""].join(" ")},r.a.createElement("div",{className:vt.a.optionsTitle},t.name),t.options.map((function(n,i){return r.a.createElement("div",{key:["option",a,i].join(".")},r.a.createElement(Ot,{isTernary:t.ternaryOptions,defaultValue:e.pairingFilters[n.key],setValue:function(t){return e.setFilters(Object(he.a)({},n.key,t))}}),r.a.createElement("label",{htmlFor:n.name},n.name))}))):null)})))))}var Kt=n(45);function Vt(){return r.a.createElement("div",{className:ke.a.sectionContainer},r.a.createElement("div",{className:[ke.a.sectionHeader,"topBanner"].join(" ")},r.a.createElement("div",{className:ke.a.sectionHeaderText,style:{cursor:"default"}})))}function Yt(e){var t,n=Object(a.useState)(e.expanded),i=Object(c.a)(n,2),o=i[0],s=i[1],l=Object(a.useState)(0),u=Object(c.a)(l,2),d=u[0],p=u[1],f=Object(a.useState)(!1),b=Object(c.a)(f,2),g=b[0],A=b[1],v=Object(a.useRef)();Object(a.useEffect)((function(){s(e.expanded)}),[s,e.expanded]);var h=Object(a.useState)(void 0===e.expanded||e.expanded),y=Object(c.a)(h,2),E=y[0],j=y[1];Object(a.useEffect)((function(){e.useInternalState&&s(E)}),[e.useInternalState,E,s]),Object(a.useEffect)((function(){e.mustExpand&&!o&&s(!0)}),[e.mustExpand,o,s]),Object(a.useEffect)((function(){if(!o){var e=setTimeout((function(){return A(!1)}),750);return function(){return clearTimeout(e)}}A(!0)}),[o,A]);var O=Object(a.useCallback)((function(){v.current&&p(o?v.current.getBoundingClientRect().height:0)}),[p,o,v.current,e.assertHeight]);return Object(a.useEffect)((function(){O()}),[O,e.children]),Object(a.useEffect)((function(){return window.addEventListener("resize",O),function(){return window.removeEventListener("resize",O)}}),[O]),Object(a.useEffect)((function(){var e=function(){return window.dispatchEvent(new Event("resize"))};e();var t=setTimeout(e,100);return function(){return clearTimeout(t)}}),[e.expanded,g]),Object(a.useEffect)((function(){if(v.current)for(var e=0,t=Array.from(v.current.children);e<t.length;e++){var n=t[e];"onload"in n&&(n.onload=O);for(var a=0,r=Array.from(n.children);a<r.length;a++){var i=r[a];"onload"in i&&(i.onload=O)}}}),[v.current,O]),r.a.createElement("div",{className:ke.a.sectionContainer,style:e.style},r.a.createElement("div",{className:[ke.a.sectionHeader,"topBanner"].join(" ")},r.a.createElement("div",{className:ke.a.sectionHeaderText,onClick:function(){return!1===e.collapsable?null:e.useInternalState?j(!o):e.setExpanded(!o,e.value)}},e.header&&!1!==e.hasLoaded?e.header:"\u200b"),e.children&&!1!==e.collapsable?r.a.createElement("div",{className:ke.a.sectionToggle,onClick:function(){return e.useInternalState?j(!o):e.setExpanded(!o,e.value)}},r.a.createElement(K.c,{style:{transform:o?"rotate(-90deg)":"rotate(0deg)"}})):null),g?r.a.createElement("div",{className:m()(ke.a.sectionListWrapper,(t={},Object(he.a)(t,ke.a.expanded,o),Object(he.a)(t,"scrollable",e.scrollable),Object(he.a)(t,"scrollable=x",e.scrollable),t)),style:{height:d}},r.a.createElement("div",{ref:v,className:m()(ke.a.sectionList),id:e.id},e.children)):null)}var Wt=n(166),zt=n.n(Wt);function qt(e){for(var t=et(e).SettingsRow,n=Object(a.useMemo)((function(){var t=Object.entries(Me);if(e.settings.tieBreaks){var n=e.settings.tieBreaks.split(",");t=t.sort((function(e,t){return n.indexOf(e[0])-n.indexOf(t[0])}))}return t}),[e.settings.tieBreaks]),i=Object(a.useCallback)((function(t){return D({url:"/tournament/"+e.status.id+"/clearRound",data:{round:t}})}),[e.status.id]),o=Object(a.useCallback)((function(t){return r.a.createElement("div",{className:[Ne.a.row,Ne.a.roundRow].join(" "),key:["row",t].join(".")},r.a.createElement("div",{className:"fieldBox"},"Round ".concat(t,":")),r.a.createElement(Ze,{handleClear:function(){return i(t)},content:e.rounds[t]?e.rounds[t].toString():"",defaultEditContent:new Date(Date.now()).toString(),url:v.a.resolve(w,["tournament",e.status.id,"updateRound"].join("/")),inputType:"datetime-local",onSubmitSuccess:e.updateRounds,classNames:{editableField:Ne.a.editableField,input:Ne.a.input},additionalInputProps:{},name:"round."+t.toString(),show:{submit:!0,increment:!1,clear:!0},handleSubmit:function(t,n){if(isNaN(new Date(n).valueOf()))return Promise.reject();var a=t.split(".").pop();return D({url:v.a.resolve(w,["tournament",e.status.id,"updateRound"].join("/")),data:Object(he.a)({},Number(a),new Date(n).toISOString())})},useHandleSubmit:!0}))}),[e.updateSetting,e.rounds,e.status.id,e.updateRounds]),s=[],l=e.settings.totalRounds===1/0||"Infinity"===e.settings.totalRounds?Math.max(e.rounds.length,1):e.settings.totalRounds,u=1;u<=l;u++)s.push(u);return r.a.createElement(Jt,{id:"settings"},r.a.createElement("div",{className:[Ne.a.profileContainer,"scrollable-x"].join(" ")},r.a.createElement("div",{className:Ne.a.fs},Object.entries(Le).map((function(e){var n=Object(c.a)(e,2),a=n[0],i=n[1];return a.endsWith("hidden")?null:r.a.createElement(Yt,{key:a,value:a,header:Ie(a.split("_").join(" ")),expanded:!0,useInternalState:!0,collapsable:!1,assertHeight:"100%"},Object.entries(i).map((function(e,n){var a=Object(c.a)(e,2),i=a[0],o=a[1];return r.a.createElement(t,{key:["k",n].join("."),k:i,def:o,i:n})})))})),e.settings.roundTimes?r.a.createElement(Yt,{key:"rounds",value:"rounds",header:"Rounds",useInternalState:!0,expanded:!0,assertHeight:"100%",collapsable:!1},s.map(o)):null,r.a.createElement(Yt,{key:"profile",value:"profile",header:"Profile",useInternalState:!0,expanded:!0,assertHeight:"100%",style:{width:"31.8vw"},collapsable:!1},r.a.createElement("div",{className:Ne.a.baseContainer},r.a.createElement("div",{className:Ne.a.profilePictureFrame},r.a.createElement("img",{className:Ne.a.profilePicture,src:e.settings.logoURL||zt.a,alt:"Invalid URL"})),r.a.createElement(Ze,{handleSubmit:function(t,n){return e.updateSetting(t,n)},content:e.settings.description,url:v.a.resolve(w,["tournament",e.status.id,"updateSetting"].join("/")),inputType:"textarea",classNames:{form:Ne.a.description,editableField:[Ne.a.editableField,Ne.a.descriptionDiv].join(" "),input:[Ne.a.input,"scrollable"].join(" ")},name:"description",additionalInputProps:{},show:{submit:!0,reset:!0},useHandleSubmit:!0}))),r.a.createElement(Yt,{value:"tiebreaks",header:"Tie Breaks",expanded:!0,useInternalState:!0,collapsable:!1,assertHeight:"100%",style:{width:"31.8vw"}},r.a.createElement(Tt,{className:Ne.a.tieBreaks,onSubmit:function(t){return e.updateSetting("tieBreaks",t.join(",")).then(e.updateState)},numbers:!0},n.map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return a?r.a.createElement("div",{key:n,id:n,className:["fieldBox",Ne.a.tb].join(" ")},a.name):r.a.createElement("div",{key:n,id:n,className:Ne.a.divider})})))))))}for(var Xt=n(86),Zt=n.n(Xt),$t=n(15),en=n.n($t),tn={},nn=0,an=Object.entries(xe);nn<an.length;nn++){var rn=Object(c.a)(an[nn],2),on=rn[0],sn=rn[1];tn[sn.toLowerCase()]=on}function ln(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),i=Object(a.useState)(e.settings.allowNewPlayers),o=Object(c.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(!1),m=Object(c.a)(u,2),d=(m[0],m[1],Object(a.useMemo)((function(){return{id:{name:"Scorch ID",search:["id"],validate:function(t){return!t||e.players.some((function(e){return e.id===t}))},convert:function(e,t){return{}},type:"string"},firstName:{name:"Name",search:["name"],convert:function(e,t){return{firstName:e}},type:"string",required:!0},rating:{name:"Rating",search:["rating"],type:"number",required:!0},nationality:{name:"Nationality",type:"string",validate:function(e){return Object.values(xe).some((function(t){return t.toLowerCase()===e.toLowerCase()}))},convert:function(e,t){return{nationality:tn[e.toLowerCase()]}},feedback:r.a.createElement(r.a.Fragment,null,"The list of valid federations is as follows:",r.a.createElement("br",null),Object.values(xe).join(", ")),search:["country","nation"]},email:{name:"Email",search:["email"],type:"string",validate:function(e){return I.test(e)},feedback:r.a.createElement(r.a.Fragment,null,"Email inputs must match the following regex format:",r.a.createElement("br",null),I.toString()),convert:function(e,t){return{contact:Object.assign(t.contact||{},{email:e})}}},facebook:{name:"Facebook",type:"string",search:["facebook"],convert:function(e,t){return{contact:Object.assign(t.contact||{},{facebook:e})}}},phone:{name:"Phone #",type:"string",search:["phone","number","contact"],convert:function(e,t){return{contact:Object.assign(t.contact||{},{phone:e})}}},lichess:{name:"Lichess username",search:["lichess"],type:"string",validate:function(e){return L.test(e)},feedback:r.a.createElement(r.a.Fragment,null,"Invalid format a Lichess username")},chessCom:{name:"Chess.com username",search:["chess.com"],type:"string"},ecfId:{name:"ECF ID",search:["ecf"],type:"string",convert:function(e,t){return{ecf:{id:e}}}},fideId:{name:"FIDE ID",search:["fide"],type:"string",convert:function(e,t){return{fide:{id:e}}}}}}),[!1,e.players])),p=Object(a.useState)([]),f=Object(c.a)(p,2),b=f[0],g=f[1],A=Object(a.useState)([]),v=Object(c.a)(A,2),h=v[0],y=v[1],E=Object(a.useState)([]),j=Object(c.a)(E,2),O=j[0],k=j[1],_=Object(a.useContext)(z).setAlert,N=Object(a.useCallback)((function(e){var t=[],n=[];e.shift().forEach((function(e,a){t[a]=e;for(var r=0,i=Object.entries(d);r<i.length;r++){var o=Object(c.a)(i[r],2),s=o[0],l=o[1];if(!n.includes(s)){var u,m=Object(Se.a)(l.search);try{for(m.s();!(u=m.n()).done;){var p=u.value;if(e.toLowerCase().includes(p))return n[a]=s}}catch(f){m.e(f)}finally{m.f()}}}})),e=e.filter((function(e){return e.length===t.length}));var a=t.map((function(t,a){switch(n[a]){case"rating":return"number";default:return e.every((function(e){return!e[a].trim()||T.test(e[a].trim())||M.test(e[a].trim())}))&&e.some((function(e){return e[a].trim()}))?"boolean":"string"}}));if(-1===n.indexOf("firstName"))return _({type:"error",message:"Must have at least one column with title 'name'"}),[];var r=!1;return-1===n.indexOf("id")&&(n.unshift("id"),t.unshift("BLANK"),a.unshift("string"),r=!0),g(a),y(n),k(n),e.map((function(e){return r&&e.unshift(""),e.map((function(e,t){var r=e.trim();switch(a[t]){case"number":return Number(r);case"boolean":return!M.test(r.trim())&&(!!T.test(r.trim())||void 0);case"string":if(!r)return"";if("nationality"===n[t]){if("USA"===r)return"United States of America";if("Russia"===r)return"Russian Federation"}return r;default:return}})).reduce((function(e,n,a){return e[t[a]]=n,e}),{})}))}),[d,_]),S=Object(a.useState)([]),w=Object(c.a)(S,2),C=w[0],J=w[1],x=Object(a.useCallback)((function(){t.current&&(t.current.value=""),n.current&&(n.current.value=""),k([]),J([])}),[t,n,k,J]),R=Object(a.useCallback)((function(){k(h)}),[k,h]),B=Object(a.useCallback)((function(){var e=t.current;if(e){var a=e.value;if(a.trim()){var r=Zt.a.parse(a,{delimitersToGuess:[",","\t"],fastMode:!0,skipEmptyLines:"greedy"}),i=N(r.data);J(i);var o=n.current;o&&(o.value=JSON.stringify(i,null,4))}}}),[J,t,n,N]),P=(Object(a.useCallback)((function(){var e=N([]);J(e)}),[J,N]),Object(a.useMemo)((function(){return C.length?Object.keys(C[0]):[]}),[C])),F=Object(a.useMemo)((function(){if(!C.length)return[[],[]];for(var t=[],n=[],a=function(a){var r,i=Object.assign(C[a],{__index:a}),o=O.indexOf("firstName"),l=P[o],c=i[l].toLowerCase();(r=e.players.find((function(e){return i[0]===e.id||e.firstName.toLowerCase()===c})))?(i.__player=r,i=Object.assign(r,i),n.push(i)):s&&t.push(i)},r=0;r<C.length;r++)a(r);return[n,t]}),[C,P,O,e.players,!1,s]),H=Object(c.a)(F,2),U=H[0],Q=H[1],G=Object(a.useMemo)((function(){return U.concat(Q)}),[U,Q]),V=Object(a.useContext)(z),Y=V.startLoading,W=V.stopLoading,q=Object(a.useCallback)((function(){var t=Q.map((function(e){for(var t=0;t<P.length;t++)if(O[t]){var n=d[O[t]];void 0!==P[t]&&null!==P[t]&&(n.convert?e=Object.assign(e,n.convert(e[P[t]],e)):e[O[t]]=e[P[t]]),delete e[P[t]]}return e})),n=U.reduce((function(e,t){for(var n={},a=0;a<P.length;a++)if(O[a]){var r=d[O[a]];void 0!==P[a]&&null!==P[a]&&(r.convert?n=Object.assign(n,r.convert(t[P[a]],n)):n[O[a]]=t[P[a]])}else n[P[a]]=t[P[a]];return e[t.id]=n,e}),{});Y(),Promise.all([Object.keys(n).length?D({url:["tournament",e.id,"bulkEditPlayers"].join("/"),data:n}):Promise.resolve(),t.length?D({url:["tournament",e.id,"bulkAddPlayers"].join("/"),data:t}):Promise.resolve()]).then(e.leave).then(e.updatePlayerDict).finally(W)}),[x,U,Q,O,P,d,e.id,e.leave,e.updatePlayerDict]),X=Object(a.useCallback)((function(e,t,n){var a=C.slice(0);a[e][t]=n,J(a)}),[C,J]),Z=Object(a.useState)(""),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)(-2),ae=Object(c.a)(ne,2),re=ae[0],ie=ae[1],oe=Object(a.useCallback)((function(){if(ee&&!(re<-1)){var e=O.indexOf(ee),t=O.slice(0),n=re>-1?t.splice(re,1,ee):[void 0],a=Object(c.a)(n,1)[0];e>=0&&t.splice(e,1,a),k(t),te(""),ie(-2)}}),[ee,re,k,O,te,ie]),se=Object(a.useMemo)((function(){return r.a.createElement("tr",null,P.map((function(e,t){return r.a.createElement("th",{key:["key",t].join(".")},O[t]?r.a.createElement("div",{className:["fieldBox",en.a.parsedHeader,en.a.tableHeader,re===t?en.a.dragEnter:""].join(" "),draggable:!0,onDragStart:function(){return te(O[t])},onDragEnd:oe,onDragEnter:function(){return ie(t)}},d[O[t]].name):r.a.createElement("div",{className:["fieldBox",en.a.tableHeader,re===t?en.a.dragEnter:""].join(" "),onDragEnter:function(){return ie(t)}},e))})))}),[P,re,ie,O]),le=Object(a.useState)(""),ce=Object(c.a)(le,2),ue=ce[0],me=ce[1],de=Object(a.useState)([]),pe=Object(c.a)(de,2),fe=pe[0],be=pe[1],ge=Object(a.useMemo)((function(){return G.length&&!fe.length?r.a.createElement("div",{className:[en.a.target,"scrollable"].join(" "),onDragEnter:function(){return ie(-1)}},r.a.createElement("button",{className:["button",en.a.submit,en.a.clear].join(" "),onClick:x},"CLEAR ALL"),r.a.createElement("button",{className:["button",en.a.submit].join(" "),onClick:q},"IMPORT DATA")):r.a.createElement("div",{className:[en.a.target,"scrollable"].join(" "),onDragEnter:function(){return ie(-1)}},r.a.createElement("div",{className:en.a.list},fe.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:["fieldBox",en.a.error].join(" "),onClick:function(){me(e.id),e.meta.feedback&&setTimeout((function(){return _({message:e.meta.feedback,type:"info",title:"Validation for header: "+e.meta.header})}),800)}},e.message),r.a.createElement("div",{className:"fieldBox button",onClick:function(){var t=document.getElementById(e.id);t&&t.scrollIntoView({behavior:"smooth"})}},r.a.createElement(K.z,null)))}))),G.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:["button",en.a.submit,en.a.clear].join(" "),onClick:x},"CLEAR ALL")):null,r.a.createElement("div",{className:en.a.placeholder},"When your spreadsheet is uploaded, any errors found will appear here. Handle all errors to import the data."))}),[fe,me,G,q,x]),Ae=Object(a.useMemo)((function(){return G.map((function(e,t){return r.a.createElement("tr",{key:["tr",t].join(" ")},P.map((function(n,a){var i=e[n],o=!1;return""!==i&&void 0!==i||!e.__player?void 0===i&&(i=""):(i=e.__player[O[a]]||"",o=!0),r.a.createElement("td",{id:[t,a].join("."),key:["td",t,a].join(" ")},r.a.createElement(Ze,{url:"",content:i.toString(),handleSubmit:function(t,n){return Promise.resolve(X(e.__index,t,n))},name:n,classNames:{editableField:["fieldBox",o?en.a.borrowed:"",fe.some((function(e){return e.id===[t,a].join(".")}))?en.a.errorCell:"",ue===[t,a].join(".")?en.a.highlighted:""].join(" ")},additionalInputProps:{},useHandleSubmit:!0,inputType:"number"===b[a]?"number":"text"}))})))}))}),[O,ue,fe,G]),ve=Object(a.useMemo)((function(){var e=Object.entries(d).filter((function(e){var t=Object(c.a)(e,1)[0];return!O.includes(t)})),t=O.every((function(e,t){return e===h[t]}))?null:r.a.createElement("button",{className:["button",en.a.submit,en.a.reset].join(" "),onClick:R},"RESET HEADERS");return r.a.createElement("div",{className:[en.a.target,"scrollable"].join(" "),onDragEnter:function(){return ie(-1)}},r.a.createElement("div",{className:en.a.list},e.map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{key:n,draggable:!0,className:["fieldBox",en.a.parsedHeader].join(" "),onDragStart:function(){return te(n)},onDragEnd:oe},a.name)}))),t,r.a.createElement("div",{className:en.a.placeholder},"These are the known headers for each player that ScorchApp processes in a special way. It is important to identify these correctly in your spreadsheet.",r.a.createElement("br",null),"Any data that does not fit a known header category will still be stored and displayed but it is not of any significance to ScorchApp.",r.a.createElement("br",null),"If you think there is a header missing, please contact a developer."))}),[O,te,oe,d,ie,h]);Object(a.useEffect)((function(){for(var e=[],t=0;t<O.length;t++){var n=O[t];if(n)for(var a=d[n],r=0;r<G.length;r++){var i=G[r][P[t]];if(a.type&&typeof i!==a.type)e.push({message:"Invalid type: [".concat(r,",").concat(n,"]: should be a ").concat(a.type),id:[r,t].join("."),type:"error",meta:Object.assign(a,{header:n})});else if(a.validate)a.validate(i)||e.push({message:"Failed validation: [".concat(r,",").concat(n,"]: click to see more information"),id:[r,t].join("."),type:"error",meta:Object.assign(a,{header:n})})}}O.includes("firstName")||e.unshift({message:"Must have field 'name'",id:[0,0].join("."),type:"error",meta:Object.assign(d.firstName,{header:"firstName"})}),Q.length&&!O.includes("rating")&&e.unshift({message:"Must have field 'rating'",id:[0,0].join("."),type:"error",meta:Object.assign(d.firstName,{header:"rating"})}),be(e),me("")}),[O,G,be,Q]);var he=Object(a.useState)("headers"),ye=Object(c.a)(he,2),je=ye[0],Oe=ye[1],ke=Object(a.useState)("errors"),_e=Object(c.a)(ke,2),Ne=_e[0],we=_e[1],Ce=Object(a.useCallback)((function(){var t,n=G.map((function(e){for(var t=0;t<P.length;t++){var n=e[P[t]];delete e[P[t]],e[P[t]||O[t]]=n}return e})),a=Object.getOwnPropertyNames(G[0]),r=Object(Se.a)(G);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.__player&&delete i.__player;var o,s=Object(Se.a)(a);try{for(s.s();!(o=s.n()).done;){var l=o.value;"object"===typeof i[l]&&null!==i[l]&&(i[l]=JSON.stringify(i[l]))}}catch(f){s.e(f)}finally{s.f()}}}catch(f){r.e(f)}finally{r.f()}var c=Zt.a.unparse(n),u=document.createElement("a"),m=new Blob([c],{type:"text/csv"}),d=e.status.name,p=new Date(Date.now()).toString().slice(4,15);u.href=URL.createObjectURL(m),u.download="".concat(d,"_").concat(p,"_players.").concat("csv"),u.click()}),[G]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt,{id:"pasteInput",className:en.a.stage,title:"Smart Import by ScorchApp",childClass:en.a.body,buttons:[{name:"Download",icon:r.a.createElement(K.u,null),onClick:Ce},{name:s?"Ignore new players":"Allow new players",icon:s?r.a.createElement(K.L,null):r.a.createElement(K.R,null),onClick:function(){return l(!s)}}]},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:en.a.pasteContainer,onDragEnter:function(){return ie(-1)}},r.a.createElement("div",{className:en.a.paste},r.a.createElement("div",{className:[en.a.pasteArea].join(" ")},r.a.createElement("textarea",{ref:t,className:en.a.textarea,name:"textArea",placeholder:"Please paste your input in csv (comma-separated values) format\n\\ You can do that by going to Excel or your spreadsheet program of choice and selecting everything.\n\\ Copy it and paste it here, then hit SUBMIT when you're happy.",onClick:function(e){return e.target.select()}}),G.length?null:r.a.createElement("button",{className:[en.a.submit,"button"].join(" "),onClick:B},"SUBMIT"))))),r.a.createElement("div",{className:"container",style:{display:"none"}},r.a.createElement("div",{className:en.a.pasteContainer,onDragEnter:function(){return ie(-1)}},r.a.createElement("div",{className:en.a.paste},r.a.createElement("div",{className:[en.a.pasteArea].join(" ")},r.a.createElement("textarea",{ref:n,className:[en.a.output,"scrollable"].join(" "),name:"textArea",placeholder:"Raw data output"}))))),r.a.createElement("div",{className:["container",en.a.table].join(" ")},r.a.createElement("div",{className:[en.a.pasteContainer,"scrollable"].join(" ")},Ae.length?null:r.a.createElement("div",{className:[en.a.placeholder,en.a.description].join(" ")},"Welcome to Smart Import! Here you can use spreadsheet data to create new players.",r.a.createElement("br",null),"ScorchApp will automatically try and detect relevant Headers from your data.",r.a.createElement("br",null),"You can then drag and drop the headers if you think any are missing.",r.a.createElement("br",null),"Get pasting to start!"),r.a.createElement("table",{className:en.a.playerTable},r.a.createElement("thead",null,se),r.a.createElement("tbody",null,Ae))))),r.a.createElement("div",{className:[Ee.a.profile,en.a.headerSection].join(" ")},r.a.createElement("div",{className:Ee.a.profileStage},r.a.createElement(Mt,{name:je,setName:function(e){return Oe(e)},nameDict:{headers:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.H,{style:{color:"lightgrey"}}),r.a.createElement("div",null,"Headers"))}}),"headers"===je?ve:null)),r.a.createElement("div",{className:[Ee.a.profile,en.a.errors].join(" ")},r.a.createElement("div",{className:Ee.a.profileStage},r.a.createElement(Mt,{name:Ne,setName:function(e){return we(e)},nameDict:{errors:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.x,{style:{color:"#385898"}}),r.a.createElement("div",null,"Errors"))}}),"errors"===Ne?ge:null)))}var cn=n(54),un=n.n(cn);function mn(e){var t=Object(a.useRef)(),n=Object(a.useState)(""),i=Object(c.a)(n,2),o=i[0],u=i[1],m=Object(a.useState)(e.initialA),d=Object(c.a)(m,2),p=d[0],f=d[1],b=Object(a.useMemo)((function(){var t;return(null===(t=e.prev[p])||void 0===t?void 0:t.announcement)||""}),[e.prev,p]);Object(a.useEffect)((function(){var t;u((null===(t=e.prev[p])||void 0===t?void 0:t.announcement)||"")}),[e.prev,p,u]),Object(a.useEffect)((function(){Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("lastAnnouncement");case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:u(n),t.current&&(t.current.value=n);case 7:case"end":return e.stop()}}),e)})))()}),[u,t]),Object(a.useEffect)((function(){Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.set("lastAnnouncement",o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[o]);var g=Object(a.useCallback)((function(){return D({url:["","tournament",e.id,"setAnnouncement"].join("/"),data:{id:p?e.prev[p].id:void 0,data:o}}).then((function(){return S.remove("lastAnnouncement")})).then(e.leave)}),[e.id,e.prev,p,o,e.leave]);return r.a.createElement(Jt,{id:"announcements",childClass:un.a.stage,buttons:[{name:"Open Markdown guide",icon:r.a.createElement(K.J,null),href:"https://guides.github.com/features/mastering-markdown/"}]},r.a.createElement("div",{className:un.a.col1},r.a.createElement("div",{className:["container","scrollable",un.a.editingArea].join(" ")},r.a.createElement(Mt,{name:p?"a."+p.toString():"new",setName:function(e){if("new"===e)return f(0);var t=e.slice(2),n=Number(t);f(n)},nameDict:Object(h.a)({},Object.keys(e.prev).reduce((function(e,t){return"0"===t||(e["a."+t.toString()]="#"+t.toString()),e}),{}),{new:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.R,null),"New")})}),r.a.createElement("textarea",{onChange:function(e){var t;return e.target&&e.target?u((null===(t=e.target)||void 0===t?void 0:t.value)||""):null},className:[un.a.textarea,"scrollable"].join(" "),name:"textArea",ref:t,defaultValue:b,placeholder:"Please write your announcement in Markdown format\n\\ Open the above guide to markdown for help.\n\\ You can draft an announcement here and come back to it any time."})),r.a.createElement("div",{className:["container",un.a.buttons].join(" ")},r.a.createElement("div",{style:o!==b&&(p||o)?{}:{visibility:"hidden"}},r.a.createElement("button",{className:[un.a.submit,un.a.reset,"button"].join(" "),onClick:function(){t.current&&(t.current.value=b||""),u(b||"")}},"RESET"),r.a.createElement("button",{className:[un.a.submit,"button"].join(" "),onClick:g},"SUBMIT")))),r.a.createElement("div",{className:un.a.col2},r.a.createElement("div",{className:["container",un.a.preview].join(" ")},r.a.createElement(Mt,{name:"preview",setName:function(){},nameDict:{preview:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.z,{style:{color:"lightgrey"}}),r.a.createElement("div",null,"Preview"))}}),r.a.createElement("div",{className:[un.a.previewWrapper,"scrollable"].join(" ")},r.a.createElement(Ue.a,{source:o.trim(),escapeHtml:!1,astPlugins:[ze],renderers:{link:qe}})))))}var dn=n(65),pn=n.n(dn),fn=n(71),bn={pre:{id:{name:"",className:"blank",sort:!1,value:function(){return 0},postConvert:function(e,t){return(1+t).toString()}},name:{name:"Name",className:"player",id:function(e){return e.id},sort:function(e,t){return e>t?1:e<t?-1:0},value:function(e,t,n){return"individual"===n.competitors?[e.firstName,e.lastName].join(" "):e.firstName}},rating:{name:"Rating",className:"locked",value:function(e){return e.rating},show:function(e,t,n){return n.showRatings}}},roundColumn:{name:function(e,t){return e.slice(-1)},className:function(e,t,n){return"*"===e?"edit":""===e?"unset":"locked"},value:function(){},convert:function(e,t,n){if(""===e)return"";if("*"===e)return"*";var a,r=parseInt(e);return a=.5===r?"\xbd":r.toString(),e.endsWith("b")&&(a+="b"),a},sort:function(e,t){if(e===t)return 0;if(""===e)return-1;if(""===t)return-1;if("*"===e)return 1;if("*"===t)return-1;var n=[parseInt(e),parseInt(t)],a=n[0],r=n[1];return e.endsWith("b")&&(a-=.001),t.endsWith("b")&&(r-=.001),r-a}},post:{score:{name:"MP",className:"locked",value:function(e){return parseFloat(e.score.toString())},convert:function(e,t){return e.toFixed(1)+" / "+t.played}},gamePoints:{name:"GP",className:"locked",value:function(e){return e.gamePoints},convert:function(e){return e.toFixed(1)}},winPercentage:{name:"Win %",className:"rating",value:function(e){return 0===e.played?-1:100*e.score/e.played},convert:function(e){return e<0?"-":e.toFixed()}},performanceRating:{name:"Perf",className:"rating",value:function(e){return e.performanceRating},convert:function(e){return e.toFixed()},show:function(e,t,n){return n.showRatings}},ratingDifference:{name:"P. +/-",className:"rating",value:function(e){return e.performanceRating?e.performanceRating-e.rating:0},convert:function(e){return e?e>0?"+"+e.toString():e.toString():""},show:function(e,t,n){return n.showRatings}},expectedScore:{name:"Expected",className:"rating",value:function(e){return e.expectedScore},convert:function(e,t){return e.toFixed(1)+" / "+t.played},show:function(e,t,n){return n.showRatings}},expectedDifference:{name:"E. +/-",className:"rating",value:function(e){return e.score-e.expectedScore},convert:function(e){return"undefined"===typeof e?"":e>0?"+"+e.toFixed(2):e.toFixed(2)},show:function(e,t,n){return n.showRatings}}}};function gn(e){var t=Object(a.useMemo)((function(){return e.status.round>e.settings.totalRounds||"Infinity"===e.settings.totalRounds?e.status.round:e.settings.totalRounds}),[e.status.round,e.settings.totalRounds]),n=Object(a.useMemo)((function(){for(var e=[],n=1;n<=t;n++)e.push("round."+n.toString());return e}),[t]),i=Object(a.useMemo)((function(){return[].concat(Object(je.a)(Object.keys(bn.pre)),Object(je.a)(n),Object(je.a)(Object.keys(bn.post)))}),[n]).filter((function(t,n){var a=bn.pre[t]||bn.post[t];return!a||!(a.show&&!a.show(null,n,e.settings))})),o=Object(a.useCallback)((function(e,t){return i.includes(t)?e[0]!==t?[t,0]:[t,e[1]+1]:["",0]}),[i]),s=Object(a.useReducer)(o,["score",0]),l=Object(c.a)(s,2),u=l[0],d=l[1],p=Object(a.useCallback)((function(n){for(var a=[""],r=1;r<=t;r++)n.histories[r]?(null===n.histories[r].match?a[r]="*":a[r]=n.histories[r].match.toString(),"bye"===n.histories[r].id&&(a[r]+="b")):r===e.status.round?a[r]="*":a[r]="";return a.slice(1)}),[t,e.status.round]),f=Object(a.useMemo)((function(){for(var t=[],n=function(n){for(var a=e.players[n],r=[],i=0,o=Object.entries(bn.pre);i<o.length;i++){var s=Object(c.a)(o[i],2),l=(s[0],s[1]);l.show&&!l.show(a,n,e.settings)||r.push([l.value(a,n,e.settings),l,a])}for(var u=p(a).map((function(e){return[e,bn.roundColumn,a]})),m=[],d=0,f=Object.entries(bn.post);d<f.length;d++){var b=Object(c.a)(f[d],2),g=(b[0],b[1]);g.show&&!g.show(a,n,e.settings)||m.push([g.value(a,n,e.settings),g,a])}var A=[].concat(r,Object(je.a)(u),m);t.push(A)},a=0;a<e.players.length;a++)n(a);var o=function(e,t){return t-e},s=u[0].startsWith("round")?bn.roundColumn:bn.pre[u[0]]||bn.post[u[0]];if(s&&!1!==s.sort){s.sort&&(o=s.sort);var l=i.indexOf(u[0]);t=t.sort((function(e,t){return u[1]%2?o(t[l][0],e[l][0]):o(e[l][0],t[l][0])}))}return t.map((function(t,n){return r.a.createElement("tr",{key:"row."+n,className:pn.a.tr},t.map((function(t,a){var i=Object(c.a)(t,3),o=i[0],s=i[1],l=i[2],u=o?o.toString():"";s.convert?u=s.convert(o,l,e.settings):s.postConvert&&(u=s.postConvert(u,n)),"undefined"!==typeof u&&""!==u||(u="\u200b");var m="function"===typeof s.className?s.className(u,a,e.settings):s.className;return r.a.createElement("th",{key:[o,a].join(".")},r.a.createElement("div",{id:s.id?s.id(l,a):void 0,className:[pn.a.cell,pn.a[m]].join(" "),onClick:"Name"===s.name&&s.id?function(){e.setDisplayPlayer(s.id(l,a)),e.toggleRightTab(!0)}:null},u))})))}))}),[e.players,e.setDisplayPlayer,e.toggleRightTab,e.settings,p,u]);return Object(a.useEffect)((function(){e.closeTabOnLoad&&e.toggleRightTab(!1)}),[e.closeTabOnLoad,e.toggleRightTab]),r.a.createElement(Jt,{id:"crossTable",title:"Tournament '".concat(e.status.name||e.status.id,"' results after ").concat(e.status.round," rounds"),short:e.rightTab,className:m()(pn.a.gridPage,e.className,"scrollable","scrollable-x"),childClass:pn.a.wrapper,buttons:[e.rightTab?{name:"Close profile view",icon:r.a.createElement(ht.a,null),color:"indianred",onClick:e.toggleRightTab}:{name:"Show profile view",icon:r.a.createElement(fn.b,null),color:"#385898",onClick:e.toggleRightTab}]},r.a.createElement("table",{className:pn.a.table},r.a.createElement("thead",null,r.a.createElement("tr",null,i.map((function(e,t){var n=e.startsWith("round")?bn.roundColumn:bn.pre[e]||bn.post[e];return r.a.createElement("th",{scope:"column",key:["column",t].join("."),className:pn.a.th,id:e,onClick:function(){return d(e)}},r.a.createElement("div",{className:[pn.a.cell,pn.a.headerCell].join(" ")},"function"===typeof n.name?n.name(e,t):n.name))})))),r.a.createElement("tbody",null,f)))}var An=n(72),vn=n.n(An);function hn(e){var t=Object(a.useMemo)((function(){var t=e.players.map((function(e){return[e.firstName,e.lastName,e.rating]}));return Zt.a.unparse(t)}),[e.players]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt,{id:"export"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:vn.a.pasteContainer},r.a.createElement("div",{className:vn.a.paste},r.a.createElement("div",{className:[vn.a.pasteArea].join(" ")},r.a.createElement("textarea",{className:vn.a.textarea,name:"textArea",value:t,onClick:function(e){return e.target.select()}}))))),r.a.createElement("div",{className:"container",style:{display:"none"}},r.a.createElement("div",{className:vn.a.pasteContainer},r.a.createElement("div",{className:vn.a.paste},r.a.createElement("div",{className:[vn.a.pasteArea].join(" ")},r.a.createElement("textarea",{className:[vn.a.output,"scrollable"].join(" "),name:"textArea",placeholder:"Raw data output"})))))))}var yn=n(31),En=n.n(yn);function jn(e){var t=Object(a.useState)([]),n=Object(c.a)(t,2),i=n[0],o=n[1],s=Object(a.useCallback)((function(){if(e.id&&e.status.round)return x({url:"/tournament/"+e.id+"/getPairings",params:{round:null,withResults:!0}}).then(o)}),[o,e.id,e.status.round]);Object(a.useEffect)((function(){s()}),[e.resultKey,s]);var l=Object(a.useMemo)((function(){var e=[];for(var t=1;t<7;t++){var n=6-t,a=Math.pow(2,n);e[t]||(e[t]=[]);var r,o=Object(Se.a)(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.round===t&&(e[t].push(s),e[t].length===a))break}}catch(l){o.e(l)}finally{o.f()}}return e}),[i,e.status.round]),u=Object(a.useContext)(W),m=kn(e.settings),d=Object(a.useRef)(),p=Object(a.useReducer)((function(e,t){for(var n=0;n<t.length;n++){if(!e[n])return t;for(var a=0;a<t[n].length;a++){var r=e[n][a],i=t[n][a];if(!r)return t;if(r[0].x!==i[0].x)return t;if(r[0].y!==i[0].y)return t;if(r[1].x!==i[1].x)return t;if(r[1].y!==i[1].y)return t}}return e}),[]),f=Object(c.a)(p,2),b=f[0],g=f[1],A=Object(a.useState)(!1),v=Object(c.a)(A,2),h=v[0],y=v[1],E=Object(a.useCallback)((function(){if(!h&&i.length){for(var e=Array.from(document.getElementsByClassName(En.a.winner)),t=Array.from(document.getElementsByClassName(En.a.all)),n=[],a=1;a<6;a++)n.push(document.getElementById(["divider",a].join(".")));for(var r=[],o=[],s=0,l=t;s<l.length;s++){var u=l[s],m=u.getAttribute("data-svg").split("."),d=Object(c.a)(m,2),p=d[0],f=d[1];o[Number(p)]||(o[Number(p)]={}),o[Number(p)][f]=u}for(var b=!1,A=0,v=e;A<v.length;A++){var E=v[A],j=E.getAttribute("data-svg").split("."),O=Object(c.a)(j,2),k=O[0],_=O[1];if(o[Number(k)]){var N=o[Number(k)][_];E&&N&&(r[Number(k)]||(r[Number(k)]=[]),r[Number(k)].push([E.getBoundingClientRect(),N.getBoundingClientRect()]),b||(b=!0))}}g(r),y(b)}}),[i.length,6,g,h,y]),j=Object(a.useMemo)((function(){return b.flat(2).reduce((function(e,t){return[t.left<e[0]?t.left:e[0],t.top<e[1]?t.top:e[1]]}),[1e4,1e4])}),[b]),O=Object(a.useMemo)((function(){return b.flat(2).reduce((function(e,t){return[t.left>e[0]?t.left:e[0],t.top>e[1]?t.top:e[1]]}),[0,0])}),[b]);Object(a.useEffect)((function(){E()})),Object(a.useEffect)((function(){var e=function(){return y(!1)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[y]);var k=Object(a.useMemo)((function(){if(!d.current)return[0,0];var e=d.current.getBoundingClientRect();return[e.left,e.top]}),[d.current]);return r.a.createElement(Jt,{id:"knockout",className:e.className,childClass:En.a.stage,childRef:d,scrollable:e.scrollable},r.a.createElement("div",{className:En.a.columns},l.map((function(t,n){return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{key:["column",n].join("."),className:En.a.column,style:{marginTop:t.length?100*Math.pow(2,n-1)-100+"px":0}},t.map((function(t,a){return r.a.createElement("div",{key:["matchUp",a].join("."),className:En.a.matchUp},r.a.createElement("div",{className:[En.a.white].join(" ")},n>1?r.a.createElement("div",{"data-svg":[n-1,2*a].join("."),className:En.a.all}):null,r.a.createElement(K.q,{style:{color:"white"}}),r.a.createElement("div",{className:["playerInfo",En.a.playerInfo,"bye"===t.idW?En.a.bye:""].join(" "),onClick:function(n){return"bye"===t.idW?null:e.setDisplayPlayer(t.idW)}},u(t.idW)),t.matchW?r.a.createElement("div",{"data-svg":[n,a].join("."),className:En.a.winner}):null),r.a.createElement(pt,{result:"match"===e.settings.displayPoints?[t.matchW,t.matchB,{}]:[t.resultWhite,t.resultBlack,{}],gameLinks:{},tournamentID:e.id,inputClassName:"",validate:m,handleSubmit:s}),r.a.createElement("div",{className:[En.a.black].join(" ")},n>1?r.a.createElement("div",{"data-svg":[n-1,2*a+1].join("."),className:En.a.all}):null,r.a.createElement(K.q,{style:{color:"black"}}),r.a.createElement("div",{className:["playerInfo",En.a.playerInfo,"bye"===t.idB?En.a.bye:""].join(" "),onClick:function(n){return"bye"===t.idB?null:e.setDisplayPlayer(t.idB)}},u(t.idB)),t.matchB?r.a.createElement("div",{"data-svg":[n,a].join("."),className:En.a.winner}):null))})))):null}))),r.a.createElement("svg",{className:En.a.connectors,style:{left:j[0]-k[0]+2.5,top:j[1]-k[1]+2.5},width:O[0]<j[0]?0:O[0]-j[0],height:O[1]<j[1]?0:O[1]-j[1]},b.map((function(e,t){return r.a.createElement("g",{key:["lines",t].join("."),className:["ct-series","ct-series-"+String.fromCharCode(t+65-1)].join(" ")},e.map((function(e,t){var n=Object(c.a)(e,2),a=n[0],i=n[1],o=[a.left-j[0],a.top-j[1]],s=[i.left-j[0],i.top-j[1]],l=[(o[0]+s[0])/2,(o[1]+s[1])/2],u=(o[0],o[0],o[1],o[1],o[0],o[0],o[1],o[1],s[0],s[1],[o[0]+.5*(s[0]-o[0]),o[1]+0*(s[1]-o[1])]),m=[o[0]+1*(s[0]-o[0]),o[1]+.5*(s[1]-o[1])];return r.a.createElement("path",{key:["path",t].join("."),className:[En.a.line,"ct-line"].join(" "),d:Object.entries({M:o.join(" "),C:[u,m,s].map((function(e){return e.join(" ")})).join(", ")}).map((function(e){var t=Object(c.a)(e,2);return t[0]+t[1]})).join(" ")})})))}))))}function On(e){var t=Object(a.useMemo)((function(){return e.userRound||e.status.round}),[e.userRound,e.status.round]),n=Object(a.useReducer)((function(e){return Math.random().toString(16).slice(2,9)}),""),i=Object(c.a)(n,2),o=i[0],u=i[1],d=Object(a.useCallback)((function(n,a){var r=a.id,i=a.W,o=a.B,s=a.gameLinks,l=a.fetched,c=a.games,m=null;i?i.histories&&i.histories[t]&&null!==i.histories[t][e.settings.displayPoints]&&(m=i.histories[t][e.settings.displayPoints]):m=0;var d=null;return o?o.histories&&o.histories[t]&&null!==o.histories[t][e.settings.displayPoints]&&(d=o.histories[t][e.settings.displayPoints]):d=0,n.set(r,[m,d,s,l,c]),u(),n}),[t,e.settings.displayPoints]),p=Object(a.useState)([]),f=Object(c.a)(p,2),b=f[0],g=f[1],A=Object(a.useReducer)(d,new Map),v=Object(c.a)(A,2),h=v[0],y=v[1],E=Object(a.useState)(!1),j=Object(c.a)(E,2),O=j[0],k=j[1],_=Object(a.useReducer)((function(){return Math.random().toString(16).slice(2,8)}),""),N=Object(c.a)(_,2),S=N[0],w=N[1];Object(a.useEffect)((function(){e.playerDictKey&&(b.length||w())}),[e.playerDictKey,b,w]);var C=Object(a.useCallback)((function(){if(e.id&&t&&S)return x({url:"/tournament/"+e.id+"/getPairings",params:{round:t}}).then((function(t){var n,a=Object(Se.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value,i=r.id,o=r.idW,s=r.idB,l=r.fetched,c=r.games,u={link:r.link,source:r.linkSource,type:r.linkType},m=[e.playerDict.get(o),e.playerDict.get(s)];y({id:i,W:m[0],B:m[1],gameLinks:u,fetched:l,games:c})}}catch(d){a.e(d)}finally{a.f()}g(t)})).catch(console.error)}),[e.id,g,y,t,e.playerDict,S]),J=Object(a.useCallback)((function(e,t){return"bye"===e?"BYE":t?"".concat(t.name," [").concat(t.score,"]"):e}),[e.settings.competitors]),R=Object(a.useMemo)((function(){return b.filter((function(e){return h.get(e.id).slice(0,2).every((function(e){return null===e}))}))}),[h,o,b]),B=Object(a.useCallback)((function(){return D({url:"/tournament/"+e.id+"/getRestPairings"}).then(e.updatePlayerDict).catch(console.error)}),[C,e.id]),I=Object(a.useCallback)((function(){return k(!0),D({url:"/tournament/"+e.id+"/getNextPairings"}).then(e.settings.publishPairings?e.updateTournamentSettings:function(){}).then(e.updatePlayerDict).then(e.updateRound).catch(console.error).finally((function(){return k(!1)}))}),[k,g,e.id,C,e.updateRound,k]),P=Object(a.useMemo)((function(){return"swiss"===e.settings.pairingSystem&&!!Array.from(e.playerDict.values()).filter((function(e){return!1!==e.active&&e.histories&&!e.histories[t]})).length}),[e.playerDict,e.playerDictKey,t,e.settings.pairingSystem]),T=kn(e.settings);var M=Object(a.useContext)(Z).setNextButton,F=Object(a.useMemo)((function(){var n,a;return(null===(n=e.settings)||void 0===n?void 0:n.pairingSystem)?(a=t>=e.settings.totalRounds||"undefined"!==typeof e.lastRoundOverride&&e.lastRoundOverride,O?"loading":t<e.status.round?"none":e.settings.isPublished?e.canTriggerNextRound?R.length>0&&"round-robin"!==e.settings.pairingSystem?"wait":a?e.status.active?"publish-final":"last":"next":"inactive":"publish"):"skeleton"}),[t,e.status.active,e.settings,e.lastRoundOverride,O,e.status.round,e.canTriggerNextRound,R.length]);Object(a.useEffect)((function(){M(F)}),[M,F]);var L=Object(a.useCallback)((function(t){D({url:["tournament",e.id,t?"unpublish":"publish"].join("/")}).then(e.updateStatus),!t&&e.settings.allowNewPlayers&&e.updateSetting("allowNewPlayers",!1)}),[e.id,e.settings.allowNewPlayers,e.updateSetting]);Object(a.useEffect)((function(){window.unpublish=L}),[L]);var H=Object(a.useState)(""),U=Object(c.a)(H,2),Q=U[0],G=U[1],V=Object(a.useCallback)((function(){var n=Object(a.useState)(!1),i=Object(c.a)(n,2),o=i[0],u=i[1];return o?r.a.createElement("div",{className:nt.a.manualPairing},r.a.createElement(bt,{tournamentID:e.id,playerDict:e.playerDict,settings:e.settings,close:function(){return u(!1)},round:t,handleSubmit:function(){var t=Object(l.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updatePlayerDict(),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})):r.a.createElement("div",{className:m()("button",nt.a.pairingAddButton),onClick:function(){return u(!0)}},"New manual pairing")}),[e.id,e.playerDict,e.settings,u,e.updatePlayerDict]),Y=Object(a.useCallback)((function(){var n,a=[],i=e.playerDict,o=1,m=[],d=Object(Se.a)(b);try{for(d.s();!(n=d.n()).done;){var p=n.value,f=p.pool||0;e.settings.usingPools||(f=0),m[f]||(m[f]=[]),m[f].push(p)}}catch(E){d.e(E)}finally{d.f()}for(var g=0;g<m.length;g++)if(m[g]){g&&a.push(r.a.createElement("div",{id:["pool",g].join("."),key:["pool",g].join("."),className:nt.a.pool},"Pool ",Te(g,e.settings.poolDisplay)));var A,v=Object(Se.a)(m[g]);try{var y=function(){var n=A.value,m=n.id,d=n.idW,p=n.idB,f=[i.get(d),i.get(p)],b=f[1],g=[J(d,f[0]),J(p,b)],v=g[0],y=g[1],E=h.get(m);if(!E)return"continue";var j={link:n.link,source:n.linkSource,type:n.linkType},O=e.filtered&&e.filtered.length&&!e.filtered.some((function(e){return d===e||p===e}))||e.filters&&Object.entries(e.filters).some((function(e){var t=Object(c.a)(e,2),a=t[0],r=t[1];if(void 0===r)return!1;var i=Ut.find((function(e){return e.key===a}));if(!i)return!1;var o=i.func(n,E);return r?!o:o}));a.push(r.a.createElement("div",{id:m,className:nt.a.pairing,key:["pairings",m].join("."),style:O?{display:"none"}:{}},r.a.createElement("div",{className:["playerInfo",nt.a.playerInfo,"bye"===d?nt.a.bye:""].join(" "),id:d,onClick:function(t){return"bye"===d?null:e.setDisplayPlayer(t.target.id)}},v),r.a.createElement(pt,{expand:function(e){return G(e?m:"")},expanded:Q===m,result:E,gameLinks:j,tournamentID:e.id,inputClassName:nt.a.inputResult,hidden:{W:d,B:p,round:t,override:!0},step:"knockout"===e.settings.pairingSystem&&"match"===e.settings.displayPoints?1:void 0,validate:T,handleSubmit:function(){var t=Object(l.a)(s.a.mark((function t(n){var a,r,i,o,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.target,h.set(m,[Number(a.resultWhite.value),Number(a.resultBlack.value),{}]),a&&(r=a.parentElement)){i=r;do{i=i.nextSibling}while(i&&!i.getElementsByTagName("form")[0]);i&&(o=i.getElementsByTagName("form")[0],(l=o.getElementsByTagName("input")[0])&&l.focus())}return u(),e.updatePlayerDict(),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement("div",{className:["playerInfo",nt.a.playerInfo,nt.a.playerInfo,"bye"===p?nt.a.bye:""].join(" "),id:p,onClick:function(t){return"bye"===p?null:e.setDisplayPlayer(t.target.id)}},y)),r.a.createElement(ft,{key:["pairingDetails",m].join("."),tournamentID:e.status.id,id:m,board:o,round:t,className:["dropdown",nt.a.pairing].join(" "),style:O?{display:"none"}:{},result:E,expanded:Q===m,gameLinks:j,individual:"individual"===e.settings.competitors,update:C,updatePlayerDict:e.updatePlayerDict,triggerConfirm:e.triggerConfirm,settings:e.settings})),o++};for(v.s();!(A=v.n()).done;)y()}catch(E){v.e(E)}finally{v.f()}}return a}),[G,Q,e.playerDict,b,J,h,o,e.updatePlayerDict,C,e.setDisplayPlayer,y,e.playerDictKey,e.filter,e.filtered,e.filters,e.settings]),W=Object(a.useRef)();Object(a.useEffect)((function(){C()}),[C]);var z=Object(a.useMemo)((function(){var t=Array.from(h.entries()).filter((function(e){var t=Object(c.a)(e,2),n=(t[0],t[1]);return null==n[0]&&null==n[1]})).map((function(e){var t=Object(c.a)(e,2),n=t[0];t[1];return{id:n}})),n=t[e.outstandingIndex%t.length];return-1===e.outstandingIndex&&(n=null),[t,n]}),[h,o,e.outstandingIndex]),q=Object(c.a)(z,2),X=q[0],$=q[1];Object(a.useEffect)((function(){e.setOutstanding(!!X.length)}),[e.setOutstanding,X]),Object(a.useEffect)((function(){if($){var e=$.id;if(W.current){var t=document.getElementById(e);if(t){t.scrollIntoView({behavior:"smooth"}),t.className+=" tempHighlight";setTimeout((function(){return t.className=t.className.split(" tempHighlight").join(" ")}),5e3)}}}}),[W,$]);var ee=Object(a.useMemo)(Y,[Y]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:nt.a.pairings,ref:W},r.a.createElement("div",{className:nt.a.stage},r.a.createElement("div",{className:m()(nt.a.knockoutWrapper,"scrollable")},r.a.createElement(Yt,{header:"Pairings",value:"pairings",scrollable:!0,useInternalState:!0},r.a.createElement("div",{className:[nt.a.pairingContainer].join(" ")},r.a.createElement("div",{className:[nt.a.pairingWrapper].join(" ")},ee,P&&t?r.a.createElement(V,null):null))),"knockout"===e.settings.pairingSystem?r.a.createElement(Yt,{header:"Bracket",value:"standings",expanded:!1,scrollable:!0,useInternalState:!0},r.a.createElement(jn,Object.assign({},e,{resultKey:o,className:nt.a.knockout,scrollable:!1}))):r.a.createElement(Yt,{header:"Standings",value:"standings",expanded:!1,scrollable:!0,useInternalState:!0},r.a.createElement(gn,Object.assign({},e,{className:nt.a.knockout,players:Array.from(e.playerDict.values()),rightTab:!1}))),e.filtered.length?r.a.createElement("div",{onClick:function(){return e.filter([])},className:m()("button",nt.a.clearFiltered)},"Clear search parameters"):null))),r.a.createElement("div",{className:["bottomBannerBackground",nt.a.statusBarBackground].join(" ")},r.a.createElement("div",{className:["bottomBanner",nt.a.statusBar].join(" ")},r.a.createElement("div",{className:["button"].join(" "),onClick:function(){return e.toggleSidebar()}},"skeleton"===F?null:r.a.createElement(K.g,null)),r.a.createElement("div",{style:{display:"grid",gridAutoFlow:"column",gridAutoColumns:"1fr",width:"100%",columnGap:"5px"}},P&&e.status.round?r.a.createElement("div",{className:[nt.a.nextButton,"button"].join(" "),onClick:function(){return e.triggerConfirm("Pair remaining players for this round?",B,(function(){}))}},"Pair Remaining"):null,function(){switch(F){case"skeleton":return r.a.createElement("div",{className:nt.a.waitButton});case"loading":return r.a.createElement("div",{className:[nt.a.nextButton,"button"].join(" ")},r.a.createElement(Kt.d,null));case"none":return r.a.createElement("div",{className:[nt.a.waitButton].join(" ")});case"inactive":return r.a.createElement("div",{className:[nt.a.waitButton].join(" ")},"Must have at least 2 active players");case"publish":return r.a.createElement("div",{className:[nt.a.nextButton,"button"].join(" "),onClick:function(){return e.updateSetting("isPublished",!0)}},"Publish draw");case"wait":return r.a.createElement("div",{className:[nt.a.waitButton].join(" ")},"Awaiting ".concat(R.length," result").concat(R.length>1?"s":""));case"publish-final":return r.a.createElement("div",{className:[nt.a.nextButton,"button"].join(" "),onClick:function(){L(!1),e.settings.public||e.setMode("crossTable")}},e.settings.public?"Publish results":"Final Standings");case"last":return r.a.createElement("div",{className:[nt.a.finishButton,"button"].join(" "),onClick:function(){L(!0)}},e.settings.public?"Unpublish results":"Resume tournament");case"next":return r.a.createElement("div",{className:[nt.a.nextButton,"button"].join(" "),onClick:I},e.status.round?"Next Round":"First round pairings")}}()),r.a.createElement("div",{className:["button"].join(" "),onClick:function(){return e.toggleRightTab()}},"skeleton"===F?null:r.a.createElement(K.g,null)))))}function kn(e){return function(t){if(""!==t.resultWhite.value||""!==t.resultBlack.value){if(!Array.from(t).every((function(e){return e.validity.valid})))return!1;var n=Number(t.resultWhite.value),a=Number(t.resultBlack.value);return n+a===0?"Cannot have a 0-0 result":!e.gamePointTotal||(n+a===("game"===e.displayPoints?e.gamePointTotal:1)||"Setting: sum results to "+e.gamePointTotal)}}}function _n(e){var t=Object(a.useMemo)((function(){return e.status.round}),[e.status.round]),n=Object(a.useState)([]),i=Object(c.a)(n,2),o=i[0],s=i[1],l=Object(a.useState)([]),u=Object(c.a)(l,2),d=u[0],p=u[1],f=[Object(a.useCallback)((function(e){return d.length<2&&!d.includes(e)?p([].concat(Object(je.a)(d),[e])):null}),[d,p]),Object(a.useCallback)((function(e){if(d.includes(e)){var t=d.slice(0);return t.splice(d.indexOf(e),1),p(t)}}),[d,p])],b=f[0],g=f[1],A=Object(a.useCallback)((function(){if(t&&e.playerDict.size)return x({url:"/tournament/"+e.status.id+"/getPairings",params:{round:t}}).then((function(e){s(e)})).catch(console.error)}),[e.status.id,s,t,e.playerDict,e.playerDictKey]),h=Object(a.useCallback)((function(t){if("bye"===t)return"BYE";var n,a=e.playerDict.get(t);return a?(n="individual"===e.settings.competitors?[a.firstName,a.lastName].join(" "):a.firstName,"".concat(n," [").concat(a.score,"]")):t}),[e.playerDict,e.settings.competitors]),y=Object(a.useContext)(z).setAlert,E=Object(a.useCallback)((function(){if(2!==d.length)throw"Wrong number of players selected";var n=d.map((function(t){return e.playerDict.get(t)})),a=n.map((function(n){return e.playerDict.get(n.histories[t].id)})),i=null;(Nn(n[0],a[1])||Nn(n[1],a[0]))&&(i=[n[0].id,a[1].id]),y({message:r.a.createElement(r.a.Fragment,null,"Really switch pairings ",h(d[0])," and ",h(d[1]),"?",i?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,"Note: ",h(i[0])," has already played ",h(i[1]))):null),type:"confirm",resolve:function(){return D({url:["tournament",e.status.id,"switchPairings"].join("/"),data:{swapX:d[0],swapY:d[1],round:e.status.round}}).then((function(){p([]),e.updatePlayerDict()}))},reject:function(){return p([])}})}),[e.playerDict,y,d,p,e.status.id,e.status.round,h]),j=Object(a.useCallback)((function(n,a,r){y({message:"Really remove pairing ".concat(h(a)," vs. ").concat(h(r),"?"),resolve:function(){return D({url:v.a.resolve(w,["tournament",e.status.id,"destroyPairing"].join("/")),data:{id:n,round:t}}).then((function(){p([]),e.updatePlayerDict()}))},reject:function(){}})}),[h,t,p,e.updatePlayerDict]);function O(){var e=2-d.length;return e?r.a.createElement("div",{className:[nt.a.waitButton].join(" ")},"Select ".concat(e," more pairing").concat(e>1?"s":"")):r.a.createElement("div",{className:[nt.a.nextButton].join(" "),onClick:E},"Switch pairings")}Object(a.useEffect)((function(){A()}),[A]);var k=Object(a.useMemo)((function(){var t,n=[],a=Object(Se.a)(o);try{var i=function(){var a=t.value,i=a.id,o=a.idW,s=a.idB,l=[h(o),h(s)],c=l[0],u=l[1],m=e.filtered&&e.filtered.length&&!e.filtered.some((function(e){return o===e||s===e}));n.push(r.a.createElement("div",{id:i,className:nt.a.pairing,key:["pairings",o,s].join("."),style:m?{display:"none"}:{}},r.a.createElement("div",{className:["playerInfo",nt.a.playerInfo,"bye"===o?nt.a.bye:""].join(" "),id:o,onContextMenu:function(t){t.preventDefault(),e.setDisplayPlayer(o)},onClick:function(){return d.includes(o)?g(o):b(o)},style:{backgroundColor:d.includes(o)?"darkblue":""}},c),r.a.createElement("div",{className:ke.a.resultsBridge},r.a.createElement("div",{className:ke.a.info,title:c,onClick:function(){return e.setDisplayPlayer(o)}},r.a.createElement(K.J,null)),r.a.createElement("button",{tabIndex:-1,className:ke.a.reject,onClick:function(){return j(i,o,s)}},r.a.createElement(Kt.c,null)),r.a.createElement("div",{className:ke.a.info,title:u,onClick:function(){return e.setDisplayPlayer(s)}},r.a.createElement(K.J,null))),r.a.createElement("div",{className:["playerInfo",nt.a.playerInfo,nt.a.playerInfo,"bye"===s?nt.a.bye:""].join(" "),id:s,onContextMenu:function(t){t.preventDefault(),e.setDisplayPlayer(s)},onClick:function(){return d.includes(s)?g(s):b(s)},style:{backgroundColor:d.includes(s)?"darkblue":""}},u)))};for(a.s();!(t=a.n()).done;)i()}catch(s){a.e(s)}finally{a.f()}return n}),[d,o,h,e.updatePlayerDict,A,e.playerDictKey]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:m()(nt.a.pairings,nt.a.switch)},r.a.createElement("div",{className:nt.a.titleContainer},r.a.createElement("div",{className:["topBanner",nt.a.topBanner].join(" ")},"Switch Pairing Mode")),r.a.createElement("div",{className:[nt.a.pairingContainer,"scrollable"].join(" ")},r.a.createElement("div",{className:[nt.a.pairingWrapper].join(" ")},k))),r.a.createElement("div",{className:["bottomBannerBackground",nt.a.statusBarBackground].join(" ")},r.a.createElement("div",{className:["bottomBanner",nt.a.switchStatusBar].join(" ")},r.a.createElement(O,null))))}function Nn(e,t){var n,a=Object(Se.a)(e.histories);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r){var i,o=Object(Se.a)(t.histories);try{for(o.s();!(i=o.n()).done;){if(i.value&&r.id===t.id)return!0}}catch(s){o.e(s)}finally{o.f()}}}}catch(s){a.e(s)}finally{a.f()}return!1}var Sn=n(8),wn=n.n(Sn);function Cn(e){var t=e.round,n=e.setPlayers,i=e.players,o=Object(a.useCallback)((function(t){var n=t.target;if("HTMLButtonElement"===n.constructor.name){var a=n.parentNode.id;D({url:"/tournament/"+e.id+"/activatePlayer",data:{id:a}}).then((function(e){return{player:e}})).then(e.setPlayerDict).catch(console.error)}}),[e.id,e.setPlayerDict]),u=Object(a.useCallback)((function(t){var n=t.target;if("HTMLButtonElement"===n.constructor.name){var a=n.parentNode.id;D({url:"/tournament/"+e.id+"/clearPlayer",data:{id:a}}).then((function(t){t?e.setPlayerDict({player:t}):e.setPlayerDict({id:a})})).catch(console.error)}}),[e.setPlayerDict,e.id]),m=Object(a.useMemo)((function(){return"individual"===e.settings.competitors}),[e.settings.competitors]);function d(n){var i=Object(a.useState)(!1),d=Object(c.a)(i,2),p=d[0],f=d[1],b=Object(a.useState)(n.player),g=Object(c.a)(b,2),A=g[0],h=g[1];return p?r.a.createElement(Kn,{id:e.id,i:0,settings:e.settings,player:A,close:function(){return f(!1)},onSubmit:function(){var t=Object(l.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",R(n).then((function(t){e.setPlayerDict({player:t}),h(t),f(!1)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),action:v.a.resolve(w,["tournament",e.id,"editPlayer"].join("/"))}):r.a.createElement(Gn,{player:A,round:t,requireLastName:m,editPlayer:function(){return f(!0)},activatePlayer:o,clearPlayer:u,allowNewPlayers:e.settings.allowNewPlayers,setDisplayPlayer:e.setDisplayPlayer})}var p=Object(a.useMemo)((function(){for(var t=[],n=Object.values(i).reduce((function(e,t){return Math.max(e,Math.max.apply(Math,Object(je.a)(t.map((function(e){return e.score})))))}),0);n>=0;n-=.5){var a=n.toString();if(i[a]&&i[a].length){var o=r.a.createElement(Yt,{key:["sidebar","round",a].join("."),header:a+" points",useInternalState:!0,expanded:!0,id:["container",a].join("."),mustExpand:i[a].some((function(t){return t.id===e.jumpedTo}))},i[a].map((function(e){return r.a.createElement(d,{key:e.id,player:e})})));t.push(o)}}return t}),[t,i,e.settings.allowNewPlayers,e.settings,e.jumpedTo]);Object(a.useEffect)((function(){e.playerDict.size&&n(!1)}),[e.playerDict,n]),Object(a.useEffect)((function(){e.playerDict.size&&n()}),[e.playerDict,e.playerDictKey,e.stateKey]);var f=Object(a.useState)(""),b=Object(c.a)(f,2),g=b[0],A=b[1];Object(a.useEffect)((function(){e.jumpedTo&&A(e.jumpedTo)}),[A,e.jumpedTo]),Object(a.useEffect)((function(){if(g){var e,t=document.querySelectorAll("#"+g),n=Object(Se.a)(Array.from(t).reverse());try{for(n.s();!(e=n.n()).done;){e.value.scrollIntoView({behavior:"smooth"})}}catch(a){n.e(a)}finally{n.f()}t.length&&A("")}}),[g,A]);var h=Object(a.useContext)(q);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[wn.a.sidebar,wn.a.players].join(" ")},r.a.createElement("div",{className:wn.a.stage},r.a.createElement(Mt,{name:"tournamentPlayers",setName:function(){},nameDict:{tournamentPlayers:"Tournament Players"},hasLoaded:h}),r.a.createElement("div",{className:["scrollable",wn.a.playersSection].join(" ")},h?p.length?null:r.a.createElement("div",{className:wn.a.scoreSection},r.a.createElement("div",{className:wn.a.playerLine},r.a.createElement("div",{className:wn.a.sectionHeader,style:{gridArea:"firstName / firstName / submit / submit"}},p.length?"Player List":"No players added yet"))):r.a.createElement("div",{className:wn.a.skelWrapper},["","",""].map((function(e,t){return r.a.createElement("div",{className:[wn.a.playerLine,"hover",wn.a.skel].join(" "),key:["skel",t].join(".")},r.a.createElement("div",{className:["playerInfo",wn.a.playerInfo,"hover"].join(" ")},"\u200b"),r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{name:"edit",className:wn.a.edit},"\u200b"),r.a.createElement("button",{name:"cancel",className:wn.a.cancel},"\u200b")))}))),p))))}var Jn=n(167),xn=n.n(Jn),Dn=n(168),Rn=n.n(Dn),Bn=n(169),In=n.n(Bn);function Pn(e){return 8*e+650}function Tn(e){return Math.round((e-650)/8)}var Mn=new In.a(""),Fn={new:{placeholder:"",input:function(e){return Promise.resolve([])},parse:function(e){return""},rating:function(e,t){return 0},getData:function(e){return{rating:0}}},ecf:{placeholder:"Last name, First name",input:function(e){return xn.a.searchUsers(e,5,!0)},parse:function(e){return e?"".concat(e.name," (S:").concat(e.standard?e.standard.rating:"-","/R:").concat(e.rapidplay?e.rapidplay.rating:"-",")\n").concat(e.club):""},rating:function(e,t){return"FIDE"===t.ratingSystem?Pn(e):e},getData:function(e){var t=e.standard.rating||e.rapidplay.rating,n=[e.firstName,e.middleName].join(" ");return e.type="ecf",{firstName:n,lastName:e.lastName,rating:t,account:e}}},fide:{placeholder:"Name or FIDE ID",input:function(e){return Rn.a.search(e,{nb:5})},parse:function(e){return e?"".concat(e.Name," (S:").concat(e["Std."],"/R:").concat(e["Rpd."],"/B:").concat(e["Blz."],") [").concat(e["B-Year"],"]"):""},rating:function(e,t){return"ECF"===t.ratingSystem?Tn(e):e},getData:function(e){var t=e["Std."]||e["Rpd."]||e["Blz."],n=e.Name.split(", "),a=Object(c.a)(n,2),r=a[0],i=a[1];return e.type="fide",{firstName:i,lastName:r,rating:t,account:e}}},lichess:{placeholder:"Lichess username",input:function(e){return Mn.users.search(e)},parse:function(e){return e?e.name:""},rating:function(e,t){return 0},getData:function(e){return e.type="lichess",{firstName:e.name,rating:0,account:e}}}};new In.a("");function Ln(e){var t=Object(a.useContext)(q),n=Object(a.useMemo)((function(){return"individual"===e.settings.competitors}),[e.settings.competitors]),i=Object(a.useCallback)((function(t){var a=t.clipboardData.getData("text").toString();if(a.trim()&&(a.split("\n").length||!a.split(",").length||!a.split("\t").length)){t.preventDefault();var r=Zt.a.parse(a,{delimitersToGuess:[",","\t"],dynamicTyping:!0,fastMode:!0});if(r.data.length>100)return console.error("Can't paste more than 100 players at once!");var i=r.data.map((function(e){var t=Object(c.a)(e,3),r=t[0],i=t[1],o=t[2];if(!n){var s=[].concat(Object(je.a)(e),[""]);r=s[0],o=s[1],i=s[2]}if(!r||!i&&n||null===o||void 0===o)return null;try{if("string"!==typeof r)throw[r,"string"].join(",");if("string"!==typeof i&&n)throw[i,"string"].join(",");if("number"!==typeof o)throw[o,"number"].join(",");return{firstName:r,lastName:i,rating:o}}catch(u){if(!a.split("\n").length)return null;var l=u.split(",");return console.error(new TypeError("Bad input on row "+e.join(",")+"\n"+l[0]+" is not type "+l[1])),null}})).filter((function(e){return e}));D({url:"tournament/"+e.id+"/appendPlayers",data:i}).then((function(){return Promise.all([e.updatePlayerDict(),e.setPlayers()])}))}}),[e.id,n,e.updatePlayerDict,e.setPlayers]),o=Object(a.useReducer)((function(e,t){var n=e.slice(0);return n.splice(t.i,1,t.values),n}),[]),u=Object(c.a)(o,2),p=u[0],f=u[1],b=Object(a.useState)(1),g=Object(c.a)(b,2),A=g[0],h=g[1];Object(a.useEffect)((function(){var e=setTimeout((function(){return h(p.filter((function(e){return e.some((function(e){return e}))})).length+1)}),1e3);return function(){return clearTimeout(e)}}),[p]);var y=Object(a.useMemo)((function(){for(var n=[],a=function(a){n.push(r.a.createElement(Kn,{key:["newPlayerForm",a].join("."),id:e.id,i:!t||e.playerDict.size?a+1:a,player:null,settings:e.settings,close:function(){},handleInput:function(e){return f({values:e,i:a})},onSubmit:function(t){return R(t).then((function(){var e=t.target;if(!e.reset)for(;e.parentElement&&!e.reset;)e=e.parentElement;e.reset&&e.reset();var n=e.firstName;n.focus&&n.focus()})).then((function(){return e.updatePlayerDict()}))},handlePaste:a?void 0:i,action:v.a.resolve(w,["tournament",e.id,"appendPlayer"].join("/"))}))},o=0;o<A;o++)a(o);return n}),[A,f,e.updatePlayerDict,e.playerDict,t,e.id,n,i,e.settings.checkForDuplicatePlayers]);Object(a.useEffect)((function(){e.playerDict.size&&e.setPlayers(!1)}),[e.playerDict,e.setPlayers]),Object(a.useEffect)((function(){e.playerDict.size&&e.setPlayers()}),[e.playerDict,e.playerDictKey,e.stateKey]);var E=Object(a.useContext)(z).setAlert,j=Object(a.useState)([]),O=Object(c.a)(j,2),k=O[0],_=O[1],N=(Object(a.useCallback)(function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return _([]),e.abrupt("return",[]);case 3:if(!d){e.next=9;break}return e.next=6,xn.a.searchUsers(t,5,!0).catch((function(e){return console.error(e),[]}));case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,x({url:Be("fetch","ecf","searchUsers"),params:{argument:t,nb:5,parse:!0}});case 11:e.t0=e.sent;case 12:return n=e.t0,_(n),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[_]),Object(a.useCallback)((function(e){var t=e;return t?"".concat(t.name," (S:").concat(t.standard?t.standard.rating:"-","/R:").concat(t.rapidplay?t.rapidplay.rating:"-",")\n").concat(t.club):""}),[]),Object(a.useCallback)((function(t){var n=k.find((function(e){return e.id===t}));if(!n)return console.error(t,n,k),E({message:r.a.createElement(r.a.Fragment,null,"Couldn't add new player: ",t,r.a.createElement("br",null),"Contact a developer if this problem persists"),type:"error"});var a=n.standard.rating||n.rapidplay.rating,i=[n.firstName,n.middleName].join(" ");D({url:Be("tournament",e.id,"appendPlayer"),data:{firstName:i,lastName:n.lastName,rating:"FIDE"===e.settings.ratingSystem?Pn(a):a,ecf:{id:n.id,firstName:i,lastName:n.lastName,club:n.club,standard:n.standard,rapidplay:n.rapidplay}}}).then(e.updatePlayerDict)}),[k,E,e.id,e.settings.ratingSystem]),Object(a.useState)([])),S=Object(c.a)(N,2),C=S[0],J=S[1],B=(Object(a.useCallback)(function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return J([]),e.abrupt("return",[]);case 3:if(!d){e.next=9;break}return e.next=6,Rn.a.search(t,{nb:5}).catch((function(e){return console.error(e),[]}));case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,x({url:["fetch","fide","search"].join("/"),params:{argument:t,nb:5}});case 11:e.t0=e.sent;case 12:return n=e.t0,J(n),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[J]),Object(a.useCallback)((function(e){var t=e;return t?"".concat(t.Name," (S:").concat(t["Std."],"/R:").concat(t["Rpd."],"/B:").concat(t["Blz."],") [").concat(t["B-Year"],"]"):""}),[]),Object(a.useCallback)((function(t){var n=C.find((function(e){return e.id===t}));if(!n)return console.error(t,n,C),E({message:r.a.createElement(r.a.Fragment,null,"Couldn't add new player: ",t,r.a.createElement("br",null),"Contact a developer if this problem persists"),type:"error"});var a=n["Std."]||n["Rpd."]||n["Blz."],i=n.Name.split(", "),o=Object(c.a)(i,2),s=o[0],l=o[1];D({url:["tournament",e.id,"appendPlayer"].join("/"),data:{firstName:l,lastName:s,rating:"ECF"===e.settings.ratingSystem?Tn(a):a,fide:{id:n.id,firstName:l,lastName:s,bYear:n["B-Year"],federation:n.Fed}}}).then(e.updatePlayerDict)}),[C,E,e.id,e.settings.ratingSystem]),Object(a.useState)("new")),I=Object(c.a)(B,2),P=I[0],T=I[1],M=function(e){var t=Object(a.useContext)(z).setAlert,n=Object(a.useContext)(Y),r=Object(a.useMemo)((function(){return Fn[e.source]}),[Fn,e.source]),i=Object(a.useState)([]),o=Object(c.a)(i,2),u=o[0],m=o[1];return{handleInput:Object(a.useCallback)(function(){var t=Object(l.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return m([]),t.abrupt("return",[]);case 3:if(!d){t.next=9;break}return t.next=6,r.input(n).catch((function(e){return console.error(e),[]}));case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,x({url:Be("fetch",e.source,"searchUsers"),params:{argument:n,nb:5,parse:!0}});case 11:t.t0=t.sent;case 12:return a=t.t0,m(a),t.abrupt("return",a);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r,m]),parseUser:Object(a.useMemo)((function(){return r.parse}),[r]),handleSubmit:Object(a.useCallback)((function(a){var i=u.find((function(e){return e.id===a}));if(!i)return console.error(a,i,u),Promise.resolve(t({message:"Couldn't add new player: ".concat(a,"<br />Contact a developer if this problem persists"),type:"error"}));var o=r.getData(i);return o.rating=r.rating(i.rating,n),D({url:Be("tournament",e.id,"appendPlayer"),data:o})}),[t,e.id,n]),placeholder:r.placeholder}}({id:e.id,source:P}),F=M.handleInput,L=M.parseUser,H=M.handleSubmit,U=M.placeholder;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[wn.a.sidebar,wn.a.newPlayers].join(" ")},r.a.createElement("div",{className:wn.a.stage},r.a.createElement(Mt,{name:P,setName:T,nameDict:{new:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.S,null),r.a.createElement("div",null,"New")),ecf:r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:lt.a,alt:"",style:{height:"1em",filter:"invert(0.5)"}}),r.a.createElement("div",null,"ECF")),fide:r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:ut.a,alt:"",style:{height:"1em"}}),r.a.createElement("div",null,"FIDE"))},static:!0,hasLoaded:t}),"new"===P?r.a.createElement("div",{className:m()("scrollable",wn.a.playersSection,Object(he.a)({},wn.a.skel,!t))},r.a.createElement("div",{className:wn.a.scoreSection},y)):r.a.createElement(we,{onInput:F,onSubmit:H,getName:L,showHistory:!1,styles:wn.a,placeholder:U,limit:5,className:wn.a.infoBox}))))}function Hn(e){var t=Object(a.useContext)(q);return e.map((function(e,n){if(!e)return null;var a=e.name,i=e.icon,o=e.onClick;return e.hide?null:r.a.createElement("div",{key:["button",n].join("."),onClick:o,className:["button",e.className,t?"":"skel"].join(" ")},i," ",a)}))}function Un(e){Object(a.useCallback)(Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D({url:["tournament",e.id,"syncScoresFromResults"].join("/")});case 2:return t.next=4,e.updatePlayerDict;case 4:case"end":return t.stop()}}),t)}))),[e.id,e.updatePlayerDict]);var t=Object(a.useCallback)(Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D({url:"/tournament/"+e.id+"/clearPlayers"}).catch(console.error);case 2:e.checkIfEnoughPlayers();case 3:case"end":return t.stop()}}),t)}))),[e.id,e.checkIfEnoughPlayers]),n=Object(a.useCallback)(Object(l.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0===e.round){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t();case 4:e.updatePlayerDict();case 5:case"end":return n.stop()}}),n)}))),[t,e.updatePlayerDict,e.round]);return r.a.createElement("div",{className:["bottomBannerBackground",wn.a.bottomBanner].join(" ")},r.a.createElement("div",{className:"bottomBanner"},Hn([{onClick:function(){return e.updateSetting("allowNewPlayers",!e.settings.allowNewPlayers)},icon:r.a.createElement(K.w,{key:"edit"}),name:e.round?e.settings.allowNewPlayers?"Stop Editing Players":"Edit":"New"},{onClick:n,icon:r.a.createElement(K.fb,{key:"close"}),name:"Clear all",hide:!!e.round||!Array.from(e.playerDict.keys()).length}])))}function Qn(e){var t=Object(a.useState)(0),n=Object(c.a)(t,2),i=n[0],o=n[1],u=Object(a.useState)({}),m=Object(c.a)(u,2),d=m[0],p=m[1],f=Object(a.useState)({}),b=Object(c.a)(f,2),g=b[0],A=b[1],v=Object(a.useMemo)((function(){return!!e.settings.allowNewPlayers}),[i,e.settings.allowNewPlayers]),h=Object(a.useContext)(z),y=h.startLoading,E=h.stopLoading,j=Object(a.useCallback)((function(t){return e.id?x({url:"/tournament/"+e.id+"/getState",params:{force:t}}).then((function(e){var t=e.round,n=e.players;return A(n),o(t),n})):Promise.resolve({})}),[e.id,A,o,y,E]);Object(a.useEffect)((function(){window.updatePlayerState=j}),[j]);var O=Object(a.useCallback)(function(){var t=Object(l.a)(s.a.mark((function t(n){var a,r,i,o,l,u,m;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1===n){t.next=6;break}return t.next=3,j();case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=g;case 7:if(a=t.t0){t.next=10;break}return t.abrupt("return",Promise.resolve());case 10:for(r={},i=0,o=Object.entries(a);i<o.length;i++)l=Object(c.a)(o[i],2),u=l[0],m=l[1],r[u]=m.map((function(t){return e.playerDict.get(t)})).filter((function(e){return e}));p(r),e.checkIfEnoughPlayers(!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[j,e.playerDict,e.checkIfEnoughPlayers,g,e.stateKey]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Cn,Object.assign({},e,{round:i,setPlayers:O,players:d})),v?r.a.createElement(Ln,Object.assign({},e,{setPlayers:O})):null,r.a.createElement(Un,Object.assign({},e,{round:i})))}function Gn(e){var t=e.requireLastName?[e.player.firstName,e.player.lastName].join(" "):e.player.firstName;"number"!==typeof e.player.rating&&(e.player.rating=Number(e.player.rating));var n=Object(a.useReducer)((function(e,t){return"boolean"===typeof t?t:!e}),e.player.active),i=Object(c.a)(n,2),o=i[0],s=i[1];return Object(a.useEffect)((function(){s(e.player.active)}),[s,e.player.active]),r.a.createElement("div",{id:e.player.id,className:wn.a.playerLine},r.a.createElement("div",{className:["playerInfo",wn.a.playerInfo,o?"":wn.a.playerInactive,e.player.isPlaying?"bold":""].join(" "),style:{gridColumn:e.round&&!e.allowNewPlayers?"firstName / cancel":void 0},onClick:function(t){return e.setDisplayPlayer(t.target.parentElement.id)}},t," (",e.player.rating.toString(),") ",e.player.histories[e.round]?"":"*"),e.round&&!e.allowNewPlayers?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{name:"edit",className:wn.a.edit,onClick:e.editPlayer},r.a.createElement(K.N,null)),o?r.a.createElement("button",{name:"cancel",className:wn.a.cancel,onClick:function(t){s(),e.clearPlayer(t)}},r.a.createElement(K.fb,null)):r.a.createElement("button",{name:"active",className:wn.a.activate,onClick:function(t){s(),e.activatePlayer(t)}},r.a.createElement(K.l,null))))}function Kn(e){var t,n,i,o,s=Object(a.useRef)(),l=Object(a.useState)(void 0),u=Object(c.a)(l,2),m=u[0],d=u[1],p=Object(a.useCallback)((function(t){switch(t.keyCode){case 27:return e.close();case 13:if(!s.current)return;e.onSubmit(t)}}),[e.close]),f=Object(a.useContext)(z).setAlert,b=Object(a.useCallback)((function(e){f({title:"How do I add new players?",message:r.a.createElement(r.a.Fragment,null,"Type in your players to get started.",r.a.createElement("ul",null,r.a.createElement("li",null,"If entering individuals, just write name and rating in the boxes!"),r.a.createElement("li",null,"If entering teams, select Tournament type 'Team' in settings."),r.a.createElement("li",null,"If entering usernames, currently select Tournament type 'Team' in settings. Support for usernames will be added later."),r.a.createElement("li",null,"You can also add players via the 'ECF' tab"),r.a.createElement("li",null,"You can also paste names in by copying your data from an Excel spreadsheet (or any CSV location) and pasting it in the ",r.a.createElement("span",{className:"bold"},"top left")," box of this section. It ",r.a.createElement("span",{className:"bold"},"MUST")," be in the format ",r.a.createElement("span",{className:"code"},"firstName, lastName, rating")," for each entry (or 3 Excel columns, where the first is firstName, second is lastName, and third is Rating). If in team mode, then the format takes only 2 columns. Format for a more user-friendly paste feature is coming soon.")),"Once you have enough players begin your tournament!"),type:"info",tall:!0}),e.preventDefault()}),[f]),g=Object(a.useCallback)((function(t){p(t);t.target;var n=s.current;if(n){var a=Array.from(n.querySelectorAll("input"));e.handleInput&&e.handleInput(a.map((function(e){return e.value}))),a.filter((function(e){return e.required})).every((function(e){return""===e.value}))?d(void 0):a.filter((function(e){return e.required})).every((function(e){return e.checkValidity()}))?d(!0):d(!1)}}),[p,e.handleInput,s,d]);return r.a.createElement("form",{target:"_self",onKeyDown:g,onSubmit:e.onSubmit,method:"POST",action:e.action,onInput:g,ref:s},r.a.createElement("div",{className:wn.a.playerLine},r.a.createElement("input",{type:"text",className:[wn.a.input,e.settings.checkForDuplicatePlayers?"":wn.a.striped].join(" "),name:"firstName",required:!0,autoFocus:!e.i,placeholder:e.player?void 0:"individual"===e.settings.competitors?"First name":"Team name",defaultValue:null===(t=e.player)||void 0===t?void 0:t.firstName,onPaste:e.handlePaste,style:{gridArea:"individual"===e.settings.competitors?"firstName":"firstName / firstName / lastName / lastName"}}),r.a.createElement("input",{type:"text",className:wn.a.input,name:"lastName",required:"individual"===e.settings.competitors,placeholder:e.player?void 0:"Last name",defaultValue:null===(n=e.player)||void 0===n?void 0:n.lastName,style:{gridArea:"lastName",display:"individual"===e.settings.competitors?"block":"none"}}),r.a.createElement("input",{type:"number",className:wn.a.input,min:0,max:3200,name:"rating",required:"individual"===e.settings.competitors,placeholder:e.player?void 0:"individual"===e.settings.competitors?"Rating":"Av. Rating",defaultValue:null===(i=e.player)||void 0===i?void 0:i.rating,style:{gridArea:"edit"}}),r.a.createElement("input",{type:"hidden",name:"id",value:null===(o=e.player)||void 0===o?void 0:o.id}),void 0===m?r.a.createElement("button",{tabIndex:-1,className:[wn.a.info].join(" "),onClick:b},r.a.createElement(K.T,null)):!0===m?r.a.createElement("button",{tabIndex:-1,className:[wn.a.submit].join(" ")},r.a.createElement(K.l,null)):r.a.createElement("button",{tabIndex:-1,className:[wn.a.cancel].join(" "),onClick:function(e){s.current.reset(),g(e),e.preventDefault()}},r.a.createElement(K.fb,null))))}var Vn=n(477),Yn=n.n(Vn);function Wn(e){var t=e.players,n=Object(a.useCallback)((function(t){var n=t.target,a=n.value;if(a.trim()){var r=a.length,i=e.players.filter((function(t){return t.id!==e.player.id&&e.getDisplayName(t.id).toLowerCase().startsWith(a.toLowerCase())}))[0];if(i){var o=e.getDisplayName(i.id);n.value=o,n.select(),n.setSelectionRange(r,o.length,"forward")}}}),[t]);return r.a.createElement("form",{target:"_self",onSubmit:e.onSubmit,method:"POST",action:e.action},r.a.createElement("div",{className:Ne.a.scoreSection},r.a.createElement("input",{type:"text",className:[wn.a.input,Ne.a.input].join(" "),name:"oppName",required:!0,placeholder:"Opponent name",onInput:n,autoComplete:"off",style:{gridArea:"round / round / GP / GP"},autoFocus:!0}),r.a.createElement("button",{tabIndex:-1,className:wn.a.submit,style:{gridArea:"submit"}},r.a.createElement(Kt.b,null))))}function zn(e){var t=e.requireLastName?[e.player.firstName,e.player.lastName].join(" "):e.player.firstName;return r.a.createElement("div",{id:e.player.id,className:[wn.a.playerLine,Ne.a.playerLine].join(" ")},r.a.createElement("div",{className:["playerInfo"].join(" "),onClick:function(t){return e.setDisplayPlayer(t.target.parentElement.id)}},t),r.a.createElement("button",{name:"cancel",className:[wn.a.cancel,Ne.a.cancel].join(" "),onClick:e.clearClash},r.a.createElement(Kt.c,null)))}function qn(e){var t=Object(a.useState)([]),n=Object(c.a)(t,2),i=n[0],o=n[1],u=Object(a.useMemo)((function(){return"individual"===e.settings.competitors}),[e.settings.competitors]),m=Object(a.useContext)(W),d=Object(a.useCallback)(Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.player&&e.player.id){t.next=2;break}return t.abrupt("return");case 2:x({url:"/tournament/"+e.id+"/fetchClashes",params:{id:e.player.id}}).then(o);case 3:case"end":return t.stop()}}),t)}))),[e.id,o,e.player]),p=Object(a.useCallback)(function(){var t=Object(l.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",D({url:"/tournament/"+e.id+"/clearClash",data:{playerId:e.player.id,oppId:n}}).then(d));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.id,e.player,d]),f=Object(a.useMemo)((function(){if(!e.playerDict.size)return null;for(var t=[],n=function(n){var a=e.playerDict.get(i[n].idB);if(!a)return"continue";t.push(r.a.createElement(zn,{key:["clash",n].join("."),player:a,requireLastName:u,clearClash:function(){return p(a.id)},setDisplayPlayer:e.setDisplayPlayer}))},a=0;a<i.length;a++)n(a);return t}),[e.playerDict,e.playerDictKey,i,p,e.setDisplayPlayer,u]);return Object(a.useEffect)((function(){e.settings.allowClashes&&d()}),[d,e.settings.allowClashes]),r.a.createElement(r.a.Fragment,null,f,r.a.createElement(Wn,{id:e.id,getDisplayName:m,onSubmit:function(t){t.preventDefault(),t.persist();var n=t.target,a=e.players.find((function(e){return m(e.id)===n.oppName.value}));return D({data:{playerId:e.player.id,oppId:a.id},url:n.action}).then((function(){t.target.reset()})).then(d)},player:e.player,players:e.players,action:v.a.resolve(w,["tournament",e.id,"createClash"].join("/"))}))}function Xn(e){var t=Object(a.useState)([]),n=Object(c.a)(t,2),i=n[0],o=n[1],u=Object(a.useCallback)(Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id&&e.player&&e.player.id){t.next=2;break}return t.abrupt("return");case 2:x({url:"/tournament/"+e.id+"/fetchBonuses",params:{id:e.player.id}}).then(o);case 3:case"end":return t.stop()}}),t)}))),[e.id,o,e.player]),m=Object(a.useCallback)(function(){var t=Object(l.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",D({url:"/tournament/"+e.id+"/clearBonus",data:{id:e.player.id,round:n}}).then((function(){u(),e.update(!0)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.id,e.player,u,e.update]),d=r.a.useCallback((function(t){var n=t.bonus,i=t.i,o=Object(a.useState)(!1),s=Object(c.a)(o,2),l=s[0],d=s[1],p=Object(a.useRef)(null),f=Object(a.useCallback)((function(e){switch(e.keyCode){case 27:return d(!1);case 13:var t=p.current;if(!t)return;t.requestSubmit(),e.preventDefault()}}),[d]);return l?r.a.createElement("form",{ref:p,target:"_self",onSubmit:function(t){t.persist(),t.preventDefault(),R(t).then((function(){t.target.reset()})).then((function(){u(),e.update(!0)}))},onKeyDown:f,method:"POST",action:v.a.resolve(w,["tournament",e.id,"updateBonus"].join("/"))},r.a.createElement("div",{className:[Ne.a.scoreSection,"match"===e.settings.displayPoints?Ne.a.matchOnly:""].join(" ")},r.a.createElement("input",{type:"hidden",name:"id",value:e.player.id}),r.a.createElement("input",{type:"hidden",name:"round",value:n.round}),r.a.createElement("div",{className:["fieldBox"].join(" "),style:{gridArea:"round"}},"Round: ",n.round),r.a.createElement("input",{type:"number",className:[wn.a.input,Ne.a.input].join(" "),name:"MP",placeholder:"MP",defaultValue:n.MP,style:{gridArea:"MP"},step:.25,autoFocus:!0}),"game"===e.settings.displayPoints?r.a.createElement("input",{type:"number",className:[wn.a.input,Ne.a.input].join(" "),name:"GP",placeholder:"GP",defaultValue:n.GP,style:{gridArea:"GP"},step:.25}):null,r.a.createElement("button",{tabIndex:-1,className:wn.a.submit,style:{gridArea:"submit"}},r.a.createElement(Kt.b,null)))):r.a.createElement("div",{id:e.player.id,className:[Ne.a.resultsRow,Ne.a.bonusRow,"match"===e.settings.displayPoints?Ne.a.matchOnly:""].join(" "),key:["row","bonus",i].join(".")},r.a.createElement("div",{className:["fieldBox"].join(" "),style:{gridArea:"round"}},"Round: ",n.round),r.a.createElement("div",{className:["fieldBox"].join(" "),style:{gridArea:"MP"}},"MP: ",null!==n.MP?n.MP.toFixed(1):null),"game"===e.settings.displayPoints?r.a.createElement("div",{className:["fieldBox"].join(" "),style:{gridArea:"GP"}},"GP: ",null!==n.GP?n.GP.toFixed(1):null):null,r.a.createElement("button",{name:"edit",className:wn.a.edit,onClick:function(){return d(!0)},style:{gridArea:"edit"}},r.a.createElement(Kt.a,null)),r.a.createElement("button",{name:"cancel",className:wn.a.cancel,onClick:function(){return m(Number(n.round))},style:{gridArea:"submit"}},r.a.createElement(Kt.c,null)))}),[i,m,e.settings.displayPoints,u]);return Object(a.useEffect)((function(){e.settings.allowClashes&&u()}),[u,e.settings.allowClashes]),r.a.createElement(r.a.Fragment,null,i.map((function(e,t){return r.a.createElement(d,{key:["bonus",t].join(" "),bonus:e,i:t})})),r.a.createElement("form",{target:"_self",onSubmit:function(t){t.persist(),t.preventDefault(),R(t).then((function(){t.target.reset()})).then((function(){u(),e.update(!0)}))},method:"POST",action:v.a.resolve(w,["tournament",e.id,"createBonus"].join("/"))},r.a.createElement("div",{className:[Ne.a.scoreSection,"match"===e.settings.displayPoints?Ne.a.matchOnly:""].join(" ")},r.a.createElement("input",{type:"hidden",name:"id",value:e.player.id}),r.a.createElement("input",{type:"number",className:[wn.a.input,Ne.a.input].join(" "),name:"round",required:!0,placeholder:"Round",autoComplete:"off",min:1,max:e.settings.totalRounds,style:{gridArea:"round"}}),r.a.createElement("input",{type:"number",className:[wn.a.input,Ne.a.input].join(" "),name:"MP",placeholder:"MP",style:{gridArea:"MP"},step:.25,autoFocus:!0}),"game"===e.settings.displayPoints?r.a.createElement("input",{type:"number",className:[wn.a.input,Ne.a.input].join(" "),name:"GP",placeholder:"GP",style:{gridArea:"GP"},step:.25}):null,r.a.createElement("button",{tabIndex:-1,className:wn.a.submit,style:{gridArea:"submit"}},r.a.createElement(Kt.b,null)))))}var Zn=Object.entries(xe).map((function(e){var t=Object(c.a)(e,2),n=t[0];return{name:t[1],id:n}}));function $n(e){return e?"Yes":!1===e?"No":""}function ea(e){var t,n,i,o,s,l=Object(a.useState)(null),u=Object(c.a)(l,2),d=u[0],p=u[1],f=Object(a.useMemo)((function(){return Array.from(e.playerDict.values())}),[e.playerDict,e.playerDictKey]),b=Object(a.useContext)(W),g=Object(a.useState)(!1),A=Object(c.a)(g,2),v=A[0],h=A[1],y=Object(a.useState)(""),E=Object(c.a)(y,2),j=E[0],O=E[1],k=Object(a.useCallback)((function(t){D({url:Be("tournament",e.id,"createPlayerCode"),data:{id:e.playerID,refresh:t}}).then(O)}),[e.id,e.playerID,v,O]);Object(a.useEffect)((function(){v&&k()}),[k]);var _=Xe({content:Object(a.useMemo)((function(){if(!v)return r.a.createElement("span",null,"\u200b");var t="individual"===e.settings.competitors?"player":"team",n="team"===t?"team captain":t,a="".concat(C).concat(t,"/").concat(e.playerID,"?claim=").concat(j);return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Please tell your ",n," to claim using the following code:"),r.a.createElement("div",{className:Ne.a.li},r.a.createElement("span",{className:"code"},j),r.a.createElement("button",{type:"button",className:m()(Ne.a.button,Ne.a.increment),onClick:function(){return k(!0)},title:"Refresh"},r.a.createElement(K.db,null))),r.a.createElement("p",null,"Alernatively, click the following link:",r.a.createElement("br",null),r.a.createElement(Ge,{to:a},a),r.a.createElement("br",null),"Do not share this link with anyone else!"),r.a.createElement(Yn.a,{value:a,size:150}))}),[j,e.playerID,v,k]),onMount:function(){return h(!0)},className:m()(Ne.a.desc,"scrollable")}),N=_.toggleHeight,S=_.description,J=function(t){if(e.playerID)return!1!==t?x({url:"/tournament/"+e.id+"/fetchPlayer",params:{id:e.playerID}}).then((function(n){n.histories[0]||(n.histories[0]=null),p(n),t&&e.modifyPlayerDict(n,Math.random().toString().slice(2,9))})):void p(e.playerDict.get(e.playerID));p(null)};Object(a.useEffect)((function(){J()}),[e.playerID,e.playerDictKey]);var R=Object(a.useCallback)((function(t,n,a,i){var o=Object(c.a)(t,2),s=o[0],l=o[1];if(void 0===l)return null;if(s.startsWith("__"))return null;if("Playing"===s&&"string"===typeof l)return r.a.createElement("div",{className:Ne.a.row,key:["row",n].join(".")},r.a.createElement("div",{className:"fieldBox"},s+":"),r.a.createElement("div",{className:"playerInfo",id:l,onClick:function(t){return e.setDisplayPlayer(t.target.id)}},b(l)));var u=[];return Array.isArray(l)&&(u=l.slice(1),l=l[0]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ne.a.row,key:["row",n].join(".")},r.a.createElement("div",{className:"fieldBox"},Ie("chessCom"===s?"Chess.com":s)+":"),r.a.isValidElement(l)?l:"rating"===s.toLowerCase()||i?r.a.createElement(Ze,{content:"boolean"===typeof l?$n(l):l,name:s,inputType:"number"===typeof l?"number":"text",url:w+["tournament",e.status.id,"updatePlayer"].join("/"),onSubmitSuccess:function(){return J(!0)},classNames:{editableField:"fieldBox"},show:{submit:!0,clear:!0},additionalInputProps:{id:d.id}},r.a.createElement("input",{type:"hidden",name:"id",value:d.id})):r.a.createElement("div",{className:"fieldBox"},null!==l&&""!==l?l:"\u200b"),u.length&&u.some((function(e){return void 0!==e}))?r.a.createElement("button",{type:"button",value:"\u25bc",className:m()(Ne.a.button,Ne.a.increment),onClick:N,title:"Get Code"},r.a.createElement(K.j,null)):null),u)}),[e.setDisplayPlayer,b,d]),B=Object(a.useMemo)((function(){return f.reduce((function(e,t){return d?t.id===d.id?e:t.pool&&t.pool>e?t.pool:e:e}),0)}),[f,d]),I=d?{"Unique ID":d.id,Status:!1!==d.active?"Active":"Inactive",Rating:d.rating,Nationality:r.a.createElement(Ze,{content:d.nationality,url:w+["tournament",e.status.id,"updatePlayer"].join("/"),inputType:"text",onSubmitSuccess:function(){return J(!0)},classNames:{editableField:"fieldBox"},name:"nationality",additionalInputProps:{id:d.id},show:{submit:!0},search:{options:Zn,getName:function(e){return e.name}}}),Claimed:[$n(!!d.teamId),d.teamId?void 0:S],Pool:e.settings.usingPools?r.a.createElement(Ze,{content:(null===(t=d.pool)||void 0===t?void 0:t.toString())||"0",url:w+["tournament",e.status.id,"updatePlayer"].join("/"),inputType:"number",onSubmitSuccess:function(){return J(!0)},classNames:{editableField:"fieldBox"},name:"pool",show:{any:!0,increment:!0,clear:!0,submit:!0},additionalInputProps:{id:d.id,min:1,max:B+1}},r.a.createElement("input",{type:"hidden",name:"id",value:d.id})):void 0,"Performance rating":e.settings.showRatings?d.performanceRating:void 0,Playing:d.isPlaying}:{},P=null===d||void 0===d?void 0:d.histories,T=d?(Math.max(d.histories.length,1)-1-(d.isPlaying?1:0)).toString():-1,M=d?d.histories.reduce((function(e,t){return t?e+=t.played:e}),0):-1,F=d?{Score:d.score.toString()+" / "+T,"Game score":d.gamePoints.toString()+" / "+M.toString(),"Expected score":d.expectedScore.toFixed(2),"Expected game score":d.expectedGameScore.toFixed(2)+" / "+M}:{};return e.settings.displayPoints||(delete F["Game score"],delete F["Expected game score"]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ne.a.profileContainer,style:{display:d?"none":void 0}},r.a.createElement(we,{onSubmit:e.setDisplayPlayer,options:Array.from(e.playerDict.values()),getName:function(e){return b(e)},styles:Ne.a,showHistory:!0,cacheHistory:!0})),d?r.a.createElement("div",{className:[Ne.a.profileContainer,"scrollable"].join(" ")},r.a.createElement("div",null,r.a.createElement("div",{className:Ne.a.infoSection},r.a.createElement("div",{className:Ne.a.row},r.a.createElement(Ze,{content:b(d),name:"name",inputType:"text",url:w+["tournament",e.status.id,"updatePlayer"].join("/"),onSubmitSuccess:function(){return J(!0)},additionalInputProps:{id:d.id},classNames:{container:["playerInfo",Ne.a.name].join(" ")},show:{submit:!0}},r.a.createElement("input",{type:"hidden",name:"id",value:d.id}))),Object.entries(I).map(R))),r.a.createElement(Yt,{header:"Contact",useInternalState:!0,style:{gridColumn:"1 / span 2"}},Object.entries(Object.assign({lichess:d.lichess,chessCom:d.chessCom,facebook:null===(n=d.contact)||void 0===n?void 0:n.facebook,twitter:null===(i=d.contact)||void 0===i?void 0:i.twitter,phone:null===(o=d.contact)||void 0===o?void 0:o.phone,email:null===(s=d.contact)||void 0===s?void 0:s.email},d.contact||{})).map((function(e,t,n){return R(e,t,n,!0)}))),d.meta?r.a.createElement(Yt,{header:"Information",useInternalState:!0,style:{gridColumn:"1 / span 2"}},Object.entries(d.meta).map((function(e,t,n){return R(e,t,n,!0)}))):null,r.a.createElement(Yt,{header:"Score",useInternalState:!0,style:{gridColumn:"1 / span 2"}},Object.entries(F).map(R)),e.settings.allowClashes?r.a.createElement(Yt,{header:"Forbidden Pairings",useInternalState:!0,style:{gridColumn:"1 / span 2"}},r.a.createElement(qn,Object.assign({},e,{players:f,player:d}))):null,r.a.createElement(Yt,{header:"Results",useInternalState:!0,style:{gridColumn:"1 / span 2"}},P.map((function(t,n){if(0===n||!t)return null;var a=t.id,i=t.colour,o=t[e.settings.displayPoints];return r.a.createElement("div",{className:Ne.a.resultsRow,key:["row","history",n].join(".")},r.a.createElement("div",{className:"fieldBox"},n),r.a.createElement("div",{className:"playerInfo",id:a,onClick:function(t){return e.setDisplayPlayer(t.target.id)}},b(a)),r.a.createElement("div",{className:"fieldBox"},i||"\u200b"),r.a.createElement("div",{className:"fieldBox"},"undefined"!==typeof o&&null!==o?o:"\u200b"))}))),e.settings.allowBonuses?r.a.createElement(Yt,{header:"Bonus points",useInternalState:!0,style:{gridColumn:"1 / span 2"}},r.a.createElement(Xn,Object.assign({},e,{players:f,player:d,update:J}))):null):null)}function ta(e){var t=Object(a.useState)("core"),n=Object(c.a)(t,2),i=n[0],o=n[1],s=et(Object.assign({},e,{mount:!!e.status.id})).SettingsRow,l=Object(a.useContext)(q),u=Object(a.useMemo)((function(){var t=Object.entries(Me);if(e.settings.tieBreaks){var n=e.settings.tieBreaks.split(",");t=t.sort((function(e,t){return n.includes(e[0])?n.includes(t[0])?n.indexOf(e[0])-n.indexOf(t[0]):-1:1}))}return t}),[e.settings.tieBreaks]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[Ne.a.profileContainer,"scrollable",l?"":Ne.a.skel].join(" ")},Object.entries(Le).map((function(t){var n=Object(c.a)(t,2),a=n[0],l=n[1];return a.startsWith("public")||a.startsWith("automation")?null:r.a.createElement(Yt,{key:a,value:a,header:Ie(a),expanded:i===a||!e.status.id,setExpanded:function(e,t){return o(e?t:"")}},Object.entries(l).map((function(t,n){var a=Object(c.a)(t,2),i=a[0],o=a[1];return!e.status.id&&n>3?null:r.a.createElement(s,{key:["k",n].join("."),k:i,def:o,i:n})})))})),r.a.createElement(Yt,{value:"tiebreaks",header:"Tie Breaks",expanded:"tiebreaks"===i,setExpanded:function(e,t){return o(e?t:"")}},r.a.createElement(Tt,{className:Ne.a.tieBreaks,onSubmit:function(t){return e.updateSetting("tieBreaks",t.join(",")).then(e.updateState)},numbers:!0},u.map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return a?r.a.createElement("div",{key:n,id:n,className:m()("fieldBox",Ne.a.tb)},a.name):r.a.createElement("div",{key:n,id:n,className:m()("fieldBox",Ne.a.divider)},"--- IGNORE ALL BELOW TIEBREAKS ---")})))),r.a.createElement(Vt,null)))}function na(e){var t=Object(a.useState)("automation"),n=Object(c.a)(t,2),i=n[0],o=n[1],s=et(e).SettingsRow;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[Ne.a.profileContainer,"scrollable"].join(" ")},r.a.createElement(Yt,{key:"automation",value:"automation",header:Ie("automation"),expanded:"automation"===i,setExpanded:function(e,t){return o(e?t:"")}},Object.entries(Le.automation).map((function(e,t){var n=Object(c.a)(e,2),a=n[0],i=n[1];return r.a.createElement(s,{key:["k",t].join("."),k:a,def:i,i:t})}))),r.a.createElement(Vt,null)))}function aa(e){for(var t=et(e).SettingsRow,n=Object(a.useCallback)((function(t){return D({url:"/tournament/"+e.status.id+"/clearRound",data:{round:t}})}),[e.status.id]),i=Object(a.useCallback)((function(t){return r.a.createElement("div",{className:[Ne.a.row,Ne.a.roundRow].join(" "),key:["row",t].join(".")},r.a.createElement("div",{className:"fieldBox"},"Round ".concat(t,":")),r.a.createElement(Ze,{handleClear:function(){return n(t)},content:e.rounds[t]?e.rounds[t].toString():"",defaultEditContent:new Date(Date.now()).toString(),url:v.a.resolve(w,["tournament",e.status.id,"updateRound"].join("/")),inputType:"datetime-local",onSubmitSuccess:e.updateRounds,classNames:{editableField:Ne.a.editableField,input:Ne.a.input},additionalInputProps:{},name:"round."+t.toString(),show:{submit:!0,increment:!1,clear:!0},handleSubmit:function(t,n){if(isNaN(new Date(n).valueOf()))return Promise.reject();var a=t.split(".").pop();return D({url:v.a.resolve(w,["tournament",e.status.id,"updateRound"].join("/")),data:Object(he.a)({},Number(a),new Date(n).toISOString())})},useHandleSubmit:!0}))}),[e.updateSetting,e.rounds,e.status.id,e.updateRounds]),o=[],s=e.settings.totalRounds===1/0||"Infinity"===e.settings.totalRounds?Math.max(e.rounds.length,1):e.settings.totalRounds,l=1;l<=s;l++)o.push(l);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[Ne.a.profileContainer,"scrollable"].join(" ")},r.a.createElement(Yt,{key:"public",value:"public",header:"Information",useInternalState:!0,expanded:!0},Object.entries(Le.public).map((function(e,n){var a=Object(c.a)(e,2),i=a[0],o=a[1];return r.a.createElement(t,{key:["k",n].join("."),k:i,def:o,i:n})}))),r.a.createElement(Yt,{key:"permissions",value:"permissons",header:"Permissions",useInternalState:!0,expanded:!0},Object.entries(Le.public_permissions).map((function(e,n){var a=Object(c.a)(e,2),i=a[0],o=a[1];return r.a.createElement(t,{key:["k",n].join("."),k:i,def:o,i:n})}))),e.settings.roundTimes?r.a.createElement(Yt,{key:"rounds",value:"rounds",header:"Rounds",useInternalState:!0,expanded:!0},o.map(i)):null,r.a.createElement(Yt,{key:"profile",value:"profile",header:"Profile",useInternalState:!0,expanded:!0},r.a.createElement("div",{className:Ne.a.baseContainer},r.a.createElement("div",{className:Ne.a.profilePictureFrame},r.a.createElement("img",{className:Ne.a.profilePicture,src:e.settings.logoURL||zt.a,alt:"Invalid image URL"})),r.a.createElement(Ze,{handleSubmit:function(t,n){return e.updateSetting(t,n)},content:e.settings.description,url:v.a.resolve(w,["tournament",e.status.id,"updateSetting"].join("/")),inputType:"textarea",classNames:{form:Ne.a.description,editableField:[Ne.a.editableField,Ne.a.descriptionDiv].join(" "),input:[Ne.a.input,"scrollable"].join(" ")},name:"description",additionalInputProps:{},show:{submit:!0,reset:!0},useHandleSubmit:!0}))),r.a.createElement(Vt,null)))}var ra=n(55),ia=n.n(ra),oa=n(23),sa=n.n(oa),la=Object.values(Le).reduce((function(e,t){for(var n=0,a=Object.entries(t);n<a.length;n++){var r=Object(c.a)(a[n],2),i=r[0],o=r[1];e[i]=o.defaultValue}return e}),{}),ca={sevenRoundTeamSwiss:{name:"7-Round Team Swiss",icon:r.a.createElement(K.S,null),settings:{pairingSystem:"swiss",competitors:"team",totalRounds:7,displayPoints:"match",gamePointTotal:0,public:!0,timeControl:"10+5",source:"chessCom",pullResults:2,allowSelfLinks:3,byeGameReward:2,showRatings:!1,publishPairings:!0}},individualRoundRobin:{name:"Individual Round-Robin",icon:dt.a,settings:{pairingSystem:"round-robin",competitors:"individual"}},teamRoundRobinWithPools:{name:"Team Round-Robin with Pools",icon:r.a.createElement(ht.c,null),settings:{pairingSystem:"round-robin",competitors:"individual",usingPools:!0,displayPoints:"game",gamePointTotal:0,poolDisplay:0,source:"chessCom",pullResults:2,allowSelfLinks:3,showRatings:!1}},fideSwissTournament:{name:"FIDE Swiss Tournament",icon:ut.a,settings:{pairingSystem:"swiss",competitors:"individual",totalRounds:6,ratingSystem:"FIDE",checkForDuplicatePlayers:!0,allowClashes:!1,allowBonuses:!1,performanceSystem:"FIDE",byeGameReward:2}},selfSignUp:{name:"Individual with Registration",icon:r.a.createElement(K.kb,null),settings:{pairingSystem:"swiss",competitors:"individual",totalRounds:7,ratingSystem:"FIDE",checkForDuplicatePlayers:!0,allowRegistration:"open"}},knockout:{name:"Knockout Bracket",icon:r.a.createElement(K.Y,null),settings:{pairingSystem:"knockout",displayPoints:"match",usingPools:!1,allowBonuses:!1}}};function ua(e){var t=Object(a.useState)("main"),n=Object(c.a)(t,2),i=n[0],o=n[1],u=Object(a.useState)(""),d=Object(c.a)(u,2),p=d[0],f=d[1],b=Object(a.useReducer)((function(e,t){return"reset"===t?{}:Object.assign({},e,t)}),{}),g=Object(c.a)(b,2),A=g[0],v=g[1],h=Object(a.useMemo)((function(){return Object.assign({},la,e.defaultSettings,A,{name:p})}),[e.defaultSettings,p,A]),y=Object(a.useContext)(z).setAlert,E=et({updateTournamentSettings:function(){return Promise.resolve()},updateSetting:function(e,t){return"name"===e?Promise.resolve(f(t)):Promise.resolve(v(Object(he.a)({},e,t)))},status:{round:0,name:void 0,id:"",active:!0},settings:h,triggerError:function(e){return y({message:e,type:"error"})},players:[],resize:!1,isIntro:!0}).SettingsRow,j=Object(a.useCallback)(Object(l.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D({url:"/initialise",data:Object.assign({},A,{name:p})});case 3:if(n=t.sent){t.next=6;break}throw new Error;case 6:e.setTournamentID(n),e.setMode("tournament"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),(a=t.t0).response&&401!==a.response.status||e.endSession();case 14:case"end":return t.stop()}}),t,null,[[0,10]])}))),[e.setTournamentID,A,p,e.endSession]),O=Object(a.useReducer)((function(e,t){return"boolean"===typeof t?t:!e}),!1),k=Object(c.a)(O,2),_=k[0],N=k[1],S=Object(a.useMemo)((function(){var e=Object.entries(Le),t=e.findIndex((function(e){return"automation"===Object(c.a)(e,1)[0]})),n=e.splice(t,1)[0];return e.splice(1,0,n),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ia.a.section,key:["section","first"].join(".")}),r.a.createElement(E,{k:"name",def:{name:"Tournament name",type:"string"},i:0}),e.map((function(e,t){var n=Object(c.a)(e,2),a=n[0],i=n[1];return a.startsWith("stats")||a.includes("hidden")||a.startsWith("public")&&!h.public?null:r.a.createElement(r.a.Fragment,{key:m()(a,t)},"permissions"===a?r.a.createElement("div",{className:m()(ia.a.section,ia.a.divider),onClick:N},r.a.createElement("hr",null),r.a.createElement(K.b,{className:m()(ia.a.angle,Object(he.a)({},ia.a.rotated,_))}),"ADVANCED SETTINGS",r.a.createElement("hr",null)):null,r.a.createElement("div",{className:m()(ia.a.set,Object(he.a)({},ia.a.collapsed,("permissions"===a||"points"===a)&&!_))},r.a.createElement("div",{className:ia.a.section,key:["section",a].join(".")},a.split("_").map(Ie).join(" ")),Object.entries(i).map((function(e,t){var n=Object(c.a)(e,2),a=n[0],i=n[1];return i.locked?null:r.a.createElement(E,{key:["k",t].join("."),k:a,def:i,i:t+1})}))))})))}),[E,_,N]),w=Object(a.useMemo)((function(){return r.a.createElement("div",{className:ia.a.templates},Object.values(ca).map((function(e,t){return r.a.createElement("div",{key:["template",t].join("."),className:"button",onClick:function(){v(e.settings),N(!0),o("main")}},"string"===typeof e.icon?r.a.createElement("img",{src:e.icon}):e.icon,e.name)})))}),[]);return r.a.createElement("div",{className:["container",ia.a.container,sa.a.container,sa.a.tall].join(" ")},r.a.createElement("div",{className:sa.a.alertBox},r.a.createElement("div",{className:sa.a.title},"Create New Tournament"),r.a.createElement("div",{className:[sa.a.textBox,ia.a.content,"scrollable"].join(" ")},r.a.createElement("div",{className:sa.a.buttonRow},r.a.createElement("button",{className:["button","main"===i&&Object.keys(A).some((function(e){return A[e]!==la[e]}))?"":"null"].join(" "),onClick:function(){return v("reset")}},r.a.createElement(K.B,null),"Use defaults"),"main"===i?r.a.createElement("button",{className:["button"].join(" "),onClick:function(){return o("templates")}},r.a.createElement(K.O,null),"Use a template"):r.a.createElement("button",{className:["button"].join(" "),onClick:function(){return o("main")}},r.a.createElement(ht.b,null),"Back"),r.a.createElement("button",{className:["button","null","main"!==i?"null":""].join(" "),onClick:j},r.a.createElement(K.G,null),"Walk me through")),"main"===i?S:w),r.a.createElement("div",{className:sa.a.buttonRow},r.a.createElement("button",{className:[sa.a.NO,"button"].join(" "),onClick:function(){return e.setMode("menu")}},r.a.createElement(ht.b,null),"BACK"),r.a.createElement("button",{className:[sa.a.YES,"button"].join(" "),onClick:j},r.a.createElement(K.n,null),"CREATE"))))}function ma(e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),t.eventName=e,document.dispatchEvent(t)}function da(e){var t=Object(a.useCallback)((function(){return D({url:["","tournament",e.id,"syncPlayer"].join("/"),data:{id:e.displayPlayer}}).then((function(t){return e.modifyPlayerDict(t,Math.random().toString().slice(2,9))}))}),[e.id,e.displayPlayer,e.modifyPlayerDict]);return r.a.createElement("div",{className:["bottomBannerBackground",Ne.a.bottomBanner].join(" ")},r.a.createElement("div",{className:"bottomBanner"},Hn([{name:"Sync profile",icon:r.a.createElement(K.db,{key:"sync"}),onClick:t,hide:!e.displayPlayer},{name:"Close profile",className:Ne.a.close,icon:r.a.createElement(K.fb,{key:"close"}),onClick:e.clearDisplayPlayer,hide:!e.displayPlayer}])))}var pa=[30.8,38.4,30.8];function fa(e){var t=Object(a.useMemo)((function(){return!!e.id}),[e.id]),n=function(e){var t=Object(a.useState)(pa),n=Object(c.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(0),u=Object(c.a)(o,2),m=u[0],d=u[1],p=Object(a.useMemo)((function(){return r.reduce((function(e,t){var n;return e.push((null!==(n=e[e.length-1])&&void 0!==n?n:0)+t),e}),[]).slice(0,-1)}),[r]),f=Object(a.useCallback)(Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("columns");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:i(t.split(",").map((function(e){return Number(e)})));case 6:case"end":return e.stop()}}),e)}))),[i]),b=Object(a.useState)(r),g=Object(c.a)(b,2),A=g[0],v=g[1],h=Object(a.useCallback)((function(){e&&JSON.stringify(r)!==JSON.stringify(A)&&(S.set("columns",r.map((function(e){return e.toString()})).join(",")),v(r))}),[r]);return{columns:r,setColumns:i,resize:m,setResize:d,boundaries:p,loadColumns:f,cacheColumns:h}}(t),i=n.columns,o=n.setColumns,u=n.resize,m=n.setResize,d=n.boundaries,p=n.loadColumns,f=n.cacheColumns;Object(a.useEffect)((function(){p()}),[p]),Object(a.useEffect)((function(){f()}),[f]);var b=function(e){var t=e.columns,n=e.setColumns,r=e.boundaries,i=Object(a.useReducer)((function(e,t){return t||""}),""),o=Object(c.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)("settings"),m=Object(c.a)(u,2),d=m[0],p=m[1],f=Object(a.useState)(!1),b=Object(c.a)(f,2),g=b[0],A=b[1],v=Object(a.useCallback)((function(e){return A(null!==e&&void 0!==e?e:!g)}),[g]),h=Object(a.useState)(""),y=Object(c.a)(h,2),E=y[0],j=y[1],O=Object(a.useCallback)((function(e,a){if(!1!==a&&100===r[r.length-1]){var i=t.slice(0);return i[i.length-1]=pa[i.length-1],i[i.length-2]<pa[i.length-2]?i=pa:i[i.length-2]=i[i.length-2]-pa[i.length-1],n(i),!0}return"boolean"===typeof a?a:!e}),[t,r]),k=Object(a.useReducer)(O,!0),_=Object(c.a)(k,2),N=_[0],S=_[1],w=Object(a.useCallback)((function(e,a){if(0===t[0]){var r=t.slice(0);return r[0]=pa[0],r[1]<pa[0]?r=pa:r[1]=r[1]-pa[0],n(r),!0}return"boolean"===typeof a?a:!e}),[t,n]),C=Object(a.useReducer)(w,!0),J=Object(c.a)(C,2),x=J[0],D=J[1],R=Object(a.useState)(""),B=Object(c.a)(R,2),I=B[0],P=B[1],T=Object(a.useCallback)((function(e){N||S(!0),"player"!==d&&p("player"),P(e)}),[P,d,p,N,S]);return{mode:s,setMode:l,switchMode:g,switchPairings:v,stateKey:E,setStateKey:j,rightTab:d,setRightTab:p,showRightTab:N,toggleRightTab:S,sidebar:x,toggleSidebar:D,displayPlayer:I,setDisplayPlayer:T}}({columns:i,setColumns:o,boundaries:d}),g=b.mode,A=b.setMode,v=b.switchMode,h=b.switchPairings,y=b.stateKey,E=b.setStateKey,j=b.rightTab,O=b.setRightTab,k=b.showRightTab,_=b.toggleRightTab,N=b.sidebar,w=b.toggleSidebar,C=b.displayPlayer,J=b.setDisplayPlayer;!function(e){var t=e.columns,n=e.boundaries,r=e.resize,i=e.setColumns,o=e.setResize,s=e.toggleSidebar,l=e.toggleRightTab,u=e.shouldRun,m=Object(a.useState)(0),d=Object(c.a)(m,2),p=d[0],f=d[1],b=Object(a.useCallback)((function(e){var a=(e.x-70)/(window.innerWidth-70)*100;if(p){var r=t.slice(0,p-1).reduce((function(e,t){return e+t}),0),c=r+t[p-1]+t[p],u=a-r,m=c-a;u<2?(m+=u,u=0,1===p&&s(!1),ma("mouseup")):m<2&&(u+=m,m=0,p===t.length-1&&(ma("mouseup"),l(!1))),t[p-1]=u,t[p]=m,i(t.slice(0))}else{var d=n.findIndex((function(e){return Math.abs(e-a)<.4}));(0===d&&0===n[0]||d===n.length-1&&100===n[n.length-1])&&(d=-1),o(d+1)}}),[p,t,o,i,n,s,l]);Object(a.useEffect)((function(){if(u)return document.addEventListener("mousemove",b),function(){return document.removeEventListener("mousemove",b)}}),[p,b,u]),Object(a.useEffect)((function(){if(u&&r){var e=function(){return f(r)};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}}),[r,f,u]),Object(a.useEffect)((function(){if(u){var e=function(){return f(0)};return document.addEventListener("mouseup",e),function(){return document.removeEventListener("mouseup",e)}}}),[r,f,u])}({columns:i,boundaries:d,resize:u,setColumns:o,setResize:m,toggleSidebar:w,toggleRightTab:_,shouldRun:t&&!g});var R=function(e){var t=e.id,n=e.displayPlayer,r=e.setDisplayPlayer,i=Object(a.useState)([]),o=Object(c.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(Math.random().toString(16).slice(2,9)),m=Object(c.a)(u,2),d=m[0],p=m[1],f=Object(a.useState)(!1),b=Object(c.a)(f,2),g=b[0],A=b[1],v=Object(a.useState)(Date.now()),h=Object(c.a)(v,2),y=h[0],E=h[1],j=Object(a.useCallback)((function(e,t){if(t.id)return e.delete(t.id),t.id===n&&r(""),p(t.hash||Math.random().toString(16).slice(2,9)),e;var a;a=t.players?t.players:[t.player];var i,o=Object(Se.a)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.set(s.id,s)}}catch(l){o.e(l)}finally{o.f()}return p(t.hash||Math.random().toString(16).slice(2,9)),e}),[r,p,n,y]),O=Object(a.useReducer)(j,new Map),k=Object(c.a)(O,2),_=k[0],N=k[1];return{players:s,playerDictKey:d,setDictTimeout:g,playerDict:_,updatePlayerDict:Object(a.useCallback)((function(e){return!e&&Date.now()-y<3e3?(E(Date.now()),A(!0),Promise.resolve()):x({url:"/tournament/"+t+"/fetchPlayers"}).then((function(e){E(Date.now()),A(!1),l(e),N({players:e})}))}),[t,l,p,N,y]),setPlayerDict:N}}({id:e.id,displayPlayer:C,setDisplayPlayer:J}),B=R.players,I=R.playerDictKey,P=R.setDictTimeout,T=R.playerDict,M=R.setPlayerDict,F=R.updatePlayerDict,L=function(e){var t=!!e.id,n=e.updatePlayerDict,r=Object(a.useState)({}),i=Object(c.a)(r,2),o=i[0],s=i[1],l=Object(a.useState)({}),u=Object(c.a)(l,2),m=u[0],d=u[1],p=Object(a.useState)([]),f=Object(c.a)(p,2),b=f[0],g=f[1],A=Object(a.useState)([]),v=Object(c.a)(A,2),h=v[0],y=v[1],E=Object(a.useCallback)((function(){return x({url:"/tournament/"+e.id+"/getStatus"}).then(s)}),[e.id,s]),j=Object(a.useCallback)((function(){return x({url:"/tournament/"+e.id+"/getSettings"}).then(d)}),[e.id,d]),O=Object(a.useCallback)((function(){return x({url:"/tournament/"+e.id+"/getAnnouncements"}).then((function(e){return g([void 0].concat(Object(je.a)(e)))}))}),[e.id,g]),k=Object(a.useCallback)((function(t,n,a){var r;return D({url:"tournament/"+e.id+"/updateSetting",data:(r={},Object(he.a)(r,t,n),Object(he.a)(r,null===a||void 0===a?void 0:a.linked,(null===a||void 0===a?void 0:a.linked)?n:void 0),r)}).then(j)}),[e.id,j]),_=Object(a.useCallback)((function(){return x({url:"/tournament/"+e.id+"/fetchRounds"}).then(y)}),[e.id,y]),N=Object(a.useCallback)((function(){if(t)return Promise.all([_(),E(),j(),O(),n(!0)]).then((function(){}))}),[t,_,E,j,E,_]);return{status:o,settings:m,announcements:b,rounds:h,updateTournamentStatus:E,updateTournamentSettings:j,updateAnnouncements:O,updateSetting:k,updateRounds:_,load:N}}({id:e.id,updatePlayerDict:F}),H=L.status,U=L.settings,Q=L.announcements,G=L.rounds,z=L.load,$=L.updateTournamentStatus,ee=L.updateTournamentSettings,te=L.updateSetting,ne=L.updateRounds,ae=L.updateAnnouncements,re=function(e){var t=e.players,n=e.settings,r=e.playerDict,i=e.playerDictKey,o=Object(a.useState)(0),u=Object(c.a)(o,2),m=u[0],d=u[1],p=Object(a.useState)(!1),f=Object(c.a)(p,2),b=f[0],g=f[1],A=Object(a.useCallback)(Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(t.filter((function(e){return!1!==e.active})).length>=2);case 1:case"end":return e.stop()}}),e)}))),[t,g]),v=Object(a.useState)(""),h=Object(c.a)(v,2),y=h[0],E=h[1],j=Object(a.useState)([]),O=Object(c.a)(j,2),k=O[0],_=O[1],N=Object(a.useState)(void 0),S=Object(c.a)(N,2),w=S[0],C=S[1],J=Object(a.useCallback)((function(e){if(!e)return"\u200b";if("bye"===e)return"BYE";if("string"!==typeof e){var t=e;return"bye"===t.id||"BYE"===t.id?"BYE":"individual"===n.competitors?[t.firstName,t.lastName].join(" "):t.firstName}var a,i=r.get(e);return i?(a="individual"===n.competitors?[i.firstName,i.lastName].join(" "):i.firstName,a+=" ("+i.rating+")"):e}),[r,i,n.competitors]),x=Object(a.useReducer)((function(e,t){return Object.assign({},e,t)}),Ut.reduce((function(e,t){return e[t.key]="defaultValue"in t?t.defaultValue:void 0,e}),{})),D=Object(c.a)(x,2),R=D[0],B=D[1],I=Object(a.useState)(!0),P=Object(c.a)(I,2),T=P[0],M=P[1],F=Object(a.useReducer)((function(e){return e+1}),-1),L=Object(c.a)(F,2);return{nextRound:b,checkIfEnoughPlayers:A,lastRoundOverride:w,setLastRound:C,getDisplayName:J,search:E,currSearch:y,filteredPairings:k,filterPairings:_,userRound:m,setRound:d,pairingFilters:R,setFilters:B,outstandingIndex:L[0],nextOutstanding:L[1],canSetOutstanding:T,setOutstanding:M}}({players:B,settings:U,playerDict:T,playerDictKey:I}),ie=re.nextRound,oe=re.checkIfEnoughPlayers,se=re.lastRoundOverride,le=re.setLastRound,ce=re.getDisplayName,ue=re.search,me=re.currSearch,de=re.filteredPairings,pe=re.filterPairings,fe=re.userRound,be=re.setRound,ge=re.pairingFilters,Ae=re.setFilters,ve=re.outstandingIndex,ye=re.nextOutstanding,Oe=re.canSetOutstanding,ke=re.setOutstanding;Object(a.useEffect)((function(){if(P){var e=setTimeout(F,5e3);return function(){return clearTimeout(e)}}}),[P,F]),Object(a.useEffect)((function(){z()}),[z]);var _e=Object(a.useMemo)((function(){return{cursor:u?"ew-resize":void 0,gridTemplateColumns:"70px "+i.join("fr ")+"fr"}}),[u,i]),Ne=Object(a.useState)("skeleton"),we=Object(c.a)(Ne,2),Ce=we[0],Je=we[1];if(g){var xe=e.id,De=function(){return A()};return r.a.createElement(V,{values:[[Y,U],[X,A],[W,ce]]},r.a.createElement("div",{className:Ee.a.background},r.a.createElement("div",{className:Ee.a.tournament},function(){switch(g){case"settings":return r.a.createElement(qt,Object.assign({leave:De,updateSetting:te,status:H,settings:U,setLastRound:le,players:B,updateRounds:ne,rounds:G,updateTournamentSettings:ee},{triggerError:e.triggerError,updateState:function(){return E(Math.random().toString(16).slice(2,9))}}));case"crossTable":return r.a.createElement(r.a.Fragment,null,r.a.createElement(gn,Object.assign({leave:De,status:H,players:B,settings:U,setDisplayPlayer:J},{rightTab:k,toggleRightTab:_,closeTabOnLoad:!1})),k?r.a.createElement("div",{className:Ee.a.profile},r.a.createElement(Mt,{name:j,setName:function(e){return O(e)},nameDict:{player:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.jb,null),"Profile")},hasLoaded:!!U.pairingSystem}),r.a.createElement(ea,Object.assign({id:xe,status:H,setDisplayPlayer:J,playerDict:T,settings:U},{playerID:C,modifyPlayerDict:function(e,t){return M({player:e,hash:t})}}))):null);case"pasteInput":return r.a.createElement(ln,{id:xe,leave:De,status:H,settings:U,updatePlayerDict:F,players:B});case"announcements":return r.a.createElement(mn,{id:xe,initialA:Q.length-1,prev:Q,leave:function(){ae(),A("")}});case"export":return r.a.createElement(hn,{players:B,leave:De});case"knockout":return r.a.createElement(jn,{id:xe,status:H,settings:U,setDisplayPlayer:J,leave:De});case"sort":return r.a.createElement(Lt,{players:B,updatePlayerDict:F});default:return null}}())))}return r.a.createElement(V,{values:[[Y,U],[X,A],[q,!!U.pairingSystem],[W,ce],[Z,{nextButton:Ce,setNextButton:Je}]]},r.a.createElement("div",{className:Ee.a.tournament,style:_e},N?r.a.createElement(Qn,Object.assign({id:e.id,jumpedTo:me},{playerDict:T,playerDictKey:I,updatePlayerDict:F,setPlayerDict:M,settings:U,setDisplayPlayer:J,checkIfEnoughPlayers:oe,updateSetting:te,stateKey:y})):null,r.a.createElement(Gt,Object.assign({setMode:A,userRound:fe,load:z,status:H,settings:U,setLastRound:le,lastRoundOverride:se,switchMode:v,switchPairings:h,setFilters:Ae,pairingFilters:ge,nextOutstanding:ye,canSetOutstanding:Oe,players:B,updatePlayerDict:F},{closeTournament:e.closeTournament,checkForUpdates:e.checkForUpdates,triggerError:e.triggerError,canReset:!i.every((function(e,t){return pa[t]===e})),resetColumns:function(){o(pa),_(!0),w(!0)}})),r.a.createElement(gt,Object.assign({userRound:fe,setRound:be,filterPairings:pe,status:H,settings:U,updateTournamentStatus:$,lastRoundOverride:se,players:B,switchPairings:h},{totalRounds:U.totalRounds,search:function(e){ue(e),J(e)}})),v?r.a.createElement(_n,Object.assign({status:H,playerDict:T,updatePlayerDict:F,settings:U,playerDictKey:I,setDisplayPlayer:J},{filtered:de})):r.a.createElement(On,Object.assign({setMode:A,userRound:fe,status:H,playerDict:T,updatePlayerDict:F,settings:U,toggleSidebar:w,toggleRightTab:_,setDisplayPlayer:J,updateTournamentSettings:ee,updateSetting:te,setLastRound:le,lastRoundOverride:se,playerDictKey:I,outstandingIndex:ve,setOutstanding:ke},{updateStatus:$,id:e.id,canTriggerNextRound:ie,updateRound:$,triggerConfirm:e.triggerConfirm,filtered:de,filter:pe,filters:ge,jumpedTo:me})),k?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ee.a.profile},r.a.createElement("div",{className:Ee.a.profileStage},r.a.createElement(Mt,{name:j,setName:function(e){return O(e)},nameDict:{settings:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.s,{style:{color:"lightgrey"}}),r.a.createElement("div",null,"Settings")),player:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.jb,{style:{color:"#385898"}}),r.a.createElement("div",null,"Profile")),automation:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.V,{style:{color:"gold"}}),r.a.createElement("div",null,"Automation")),public:U.public?r.a.createElement(r.a.Fragment,null,r.a.createElement(K.E,{style:{color:"green"}}),r.a.createElement("div",null,"Public")):""},hasLoaded:!!U.pairingSystem}),"settings"===j?r.a.createElement(ta,Object.assign({updateTournamentSettings:ee,updateSetting:te,status:H,settings:U,setLastRound:le,players:B,updateRounds:ne,rounds:G},{triggerError:e.triggerError,updateState:function(){return E(Math.random().toString(16).slice(2,9))}})):"player"===j?r.a.createElement(ea,Object.assign({status:H,setDisplayPlayer:J,playerDict:T,settings:U,playerDictKey:I},{id:e.id,playerID:C,modifyPlayerDict:function(e,t){return M({player:e,hash:t})}})):"public"===j?r.a.createElement(aa,Object.assign({updateTournamentSettings:ee,updateSetting:te,status:H,settings:U,setLastRound:le,players:B,updateRounds:ne,rounds:G},{triggerError:e.triggerError})):"automation"===j?r.a.createElement(na,Object.assign({updateTournamentSettings:ee,updateSetting:te,status:H,settings:U,setLastRound:le,players:B,updateRounds:ne,rounds:G},{triggerError:e.triggerError,updateState:function(){return E(Math.random().toString(16).slice(2,9))}})):null)),r.a.createElement(da,{id:e.id,displayPlayer:"player"===j?C:"",clearDisplayPlayer:function(){return J("")},modifyPlayerDict:function(e,t){return M({player:e,hash:t})}})):null))}var ba=n(20),ga=n.n(ba),Aa={username:{name:"Username",type:"string",convert:function(e){return e||"guest"},locked:!0,primaryKey:!0},email:{name:"Email",type:"string",locked:!0,defaultValue:"",hideIfGuest:!0},licensed:{name:"License",type:"number",defaultValue:0,locked:!0,convert:function(e){return 1===e?"Trial":2===e?"Licensed":3===e?"Admin":"Free"}},daysRemaining:{name:"Trial time",type:"number",locked:!0,value:function(e){return Math.floor(30-(t=new Date(e.lastLicensed),(new Date(Date.now()).valueOf()-t.valueOf())/864e5));var t},convert:function(e){return e+" days"},validate:function(e,t){return 1===t.licensed}},lastLicensed:{name:"Last licensed",type:"date",defaultValue:null,locked:!0,convert:function(e){return new Date(e).toString().slice(0,21)},validate:function(e){return!!e}},backgroundURL:{name:"Background Image",type:"string",defaultValue:"/images/leaves-texture.png",locked:!0,validate:function(e){return!!e},editable:!0,show:!1},createdAt:{name:"Account created",convert:function(e){return new Date(e).toString().slice(0,21)},locked:!0,defaultValue:Date.now(),hideIfGuest:!0},updatedAt:{name:"Last seen",convert:function(e){return new Date(e).toString().slice(0,21)},locked:!0,defaultValue:Date.now(),hideIfGuest:!0}};function va(e){var t=e.getBoundingClientRect();return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2-30}}function ha(e,t,n,a){var i,o,s=Math.abs(n.x-t.x),l=Math.abs(n.y-t.y),c=(i=n.x-t.x,o=n.y-t.y,Math.sqrt(Math.pow(i,2)+Math.pow(o,2))),u=Math.sign((n.x-t.x)*(n.y-t.y));u||(u=1);var m=180*Math.atan(l/s)/Math.PI;return r.a.createElement("div",{key:["line",n.x,n.y].join("."),className:ga.a.line,style:{width:c+"px",height:a,left:e?(t.x+n.x)/2-c/2:t.x-c/2,top:e?(t.y+n.y)/2:t.y,transform:"rotate(".concat(m*u,"deg) scaleX(").concat(e?1:0,") scaleY(1)"),opacity:e?1:0}})}function ya(e){var t=Object(a.useState)({}),n=Object(c.a)(t,2),i=n[0],o=n[1],u=Pe(!0,"loading"),d=Object(c.a)(u,2),p=d[0],f=d[1],b=Pe(!1,"loadingOverride"),g=Object(c.a)(b,2),A=g[0],v=g[1],h=Pe(!1,"linesMounted"),y=Object(c.a)(h,2),E=y[0],j=y[1],O=Pe(!1,"adjustedLines"),k=Object(c.a)(O,2),_=k[0],N=k[1],w=Pe("","selected"),C=Object(c.a)(w,2),J=C[0],R=C[1],B=Object(a.useCallback)((function(){return x({url:"/profile/tournaments"}).then((function(e){var t=e.reduce((function(e,t){return e[t.id]=t,e}),{});return o(t),t})).catch((function(t){return console.error(t),e.endSession(),{}}))}),[o,e.endSession]);Object(a.useEffect)((function(){B()}),[B]);var I=Object(a.useCallback)((function(e){return e?Object.values(i).length?e in i?Promise.resolve():Promise.reject():B().then((function(t){if(void 0===t[e])throw new Error})):Promise.reject()}),[i,B]),P=Object(a.useCallback)((function(t){return I(t).then((function(){S.set("tournamentID",t,{path:"/"}).catch(console.error),e.setTournamentID(t)})).catch((function(){S.remove("tournamentID").catch(console.error),e.setTournamentID("")}))}),[I,e.setTournamentID]),T=Object(a.useCallback)(Object(l.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D({url:"/initialise"});case 3:if(n=t.sent){t.next=6;break}throw new Error;case 6:return e.setTournamentID(n),t.next=9,B();case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),(a=t.t0).response&&401!==a.response.status||e.endSession();case 15:case"end":return t.stop()}}),t,null,[[0,11]])}))),[e.setTournamentID,B,e.endSession]),M=Object(a.useCallback)(function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,D({url:"/user/closeAuthorization/all"});case 3:o({}),e.next=11;break;case 6:return delete(n=Object.assign({},i))[t],e.next=10,D({url:"/tournament/".concat(t,"/closeAuthorization")});case 10:o(n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,o]),F=Object(a.useState)([]),L=Object(c.a)(F,2),H=L[0],Q=L[1],G=Object(a.useRef)(),V=Object(a.useCallback)((function(){if(G.current){var e=va(G.current);e.x+=10;for(var t=[],n=0,a=Array.from(document.getElementsByClassName(ga.a.icon));n<a.length;n++){var r=a[n];if("0"!==r.style.opacity){var i=va(r);t.push(ha(E,e,i))}}Q(t)}}),[G,ha,E]);Object(a.useEffect)((function(){V(),j(!0);var e=setTimeout((function(){return N(!0)}),3e3);return function(){return clearTimeout(e)}}),[V,N,j,J]);var Y=Object(a.useMemo)((function(){return Object.values(i).reduce((function(e,t){return new Date(t.updatedAt).valueOf()>new Date(e.updatedAt).valueOf()?t:e}),{id:"",updatedAt:"1 Jan 1970"})}),[i]),W=Ct().Icon,z=Object(a.useMemo)((function(){return{create:{onClick:function(){return e.setMode("intro")},icon:K.Q,name:"New Swiss"},roundRobin:{onClick:function(){e.setDefaultSettings({pairingSystem:"round-robin"}),e.setMode("intro")},icon:K.v,name:"New Round-Robin"},knockout:{onClick:function(){e.setDefaultSettings({pairingSystem:"knockout"}),e.setMode("intro")},icon:K.Y,name:"New Knockout"},settings:{icon:K.s,name:"User settings"},load:{icon:K.g,name:"Load previous tournaments"},back:{onClick:e.endSession,icon:ht.b,name:"Exit to login",style:{strokeWidth:.5}},last:{onClick:function(){return P(Y.id)},icon:K.D,name:Y.name,hide:!Y.id},close:{onClick:function(){return e.triggerConfirm("Delete all saved tournaments?",M,(function(){}))},noSet:!0,icon:K.h,name:"Clear all tournaments"},refresh:{onClick:B,noSet:!0,icon:K.db,name:"Refresh tournament list"}}}),[T,B,e.endSession,e.triggerConfirm,M,P,Y,R]),q=Object(a.useCallback)((function(e,t){var n=e.reduce((function(e,t){return t in z?(e[t]=z[t],e):e}),{});return Object.entries(n).reduce((function(e,n,a){var i,o=Object(c.a)(n,2),s=o[0],l=o[1];return e.push(r.a.createElement("div",{className:[ga.a.dotContainer,_?ga.a.dotContainerLoaded:""].join(" "),key:["NavData",t,"div",a].join("i")},r.a.createElement("div",{key:m()(t,"dot",a),id:s,className:m()(ga.a.dot,(i={},Object(he.a)(i,ga.a.dotUnloaded,!_),Object(he.a)(i,ga.a.reverse,"left"!==t),i)),onClick:function(){J===s?R(""):(l.onClick&&l.onClick(),l.noSet||R(s))},style:l.style},r.a.createElement("div",{className:m()(ga.a.dotDescription,Object(he.a)({},ga.a.descriptionSelected,J===s)),key:m()(t,"description",a)},l.name),r.a.createElement(W,{className:ga.a.icon,name:l.name,icon:l.icon})))),e}),[])}),[z,_,J,R]),X=Object(a.useCallback)(Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("tournamentID");case 2:(t=e.sent)&&P(t);case 4:case"end":return e.stop()}}),e)}))),[P]);Object(a.useEffect)((function(){X()}),[X]),Object(a.useEffect)((function(){window.addEventListener("resize",V);var e=setTimeout((function(){return f(!1)}),2e3);return function(){window.removeEventListener("resize",V),clearTimeout(e)}}),[V,f]);var Z=Object(a.useMemo)((function(){switch(J){case"load":return q(["refresh","close","load"],"right");case"settings":return q(["last","settings","load"],"right");default:if(!J)return q(["last","settings","load"],"right")}}),[J,q]),$=Object(a.useMemo)((function(){return J?r.a.createElement("div",{className:ga.a.container},r.a.createElement("div",{className:ga.a.profile},r.a.createElement(Mt,{name:J,setName:function(e){return R(e)},nameDict:{settings:r.a.createElement(r.a.Fragment,null,r.a.createElement(fn.c,null),"User Settings"),load:r.a.createElement(r.a.Fragment,null,r.a.createElement(yt.b,null),"Previous Tournaments")}}),"load"===J?r.a.createElement(Ea,{setTournamentID:P,createNewTournament:T,removeID:M,updateTournamentSettings:B,tournamentDict:i,closeListing:function(){return R("")},triggerConfirm:e.triggerConfirm}):"settings"===J?r.a.createElement(ja,{user:e.user,updateTournamentSettings:function(){return Promise.resolve()},updateSetting:function(){return Promise.resolve()},closeListing:function(){return R("")},updateUser:e.updateUser}):null)):q(["create","roundRobin","knockout"],"left")}),[R,J,P,T,M,B,i,e.triggerConfirm,q,e.user]);return r.a.createElement("div",{className:U.a.canvas},H,r.a.createElement("div",{className:[U.a.column,ga.a.leftColumn].join(" ")},$),r.a.createElement("div",{ref:G,className:[U.a.column,ga.a.column].join(" ")},r.a.createElement("div",null),r.a.createElement(de,{setLoading:function(e){return v(e)},loading:p||A,classNames:{logo:ga.a.logo}}),q(["back"],"")),r.a.createElement("div",{className:[U.a.column,ga.a.rightColumn].join(" ")},Z))}function Ea(e){var t=Object(a.useState)(0),n=Object(c.a)(t,2),i=n[0],o=n[1],s=Object(a.useCallback)((function(t){return Object.values(t).map((function(t,n){var a=t.name||t.id;return r.a.createElement("div",{className:[Ne.a.row,ga.a.row].join(" "),key:["row",n].join(".")},r.a.createElement("div",{className:[ga.a.clickButton,"fieldBox"].join(" "),onClick:function(){return e.setTournamentID(t.id)}},a),r.a.createElement("div",{className:[ga.a.clickButton,ga.a.close,"fieldBox"].join(" "),onClick:function(){e.triggerConfirm("Delete tournament '"+a+"'?\nPlease note this action cannot be undone.",(function(){return e.removeID(t.id)}),(function(){}))}},r.a.createElement(fn.a,null)))})).filter((function(e){return e}))}),[e.tournamentDict,e.setTournamentID,e.triggerConfirm,e.removeID]),l=r.a.useRef();return Object(a.useEffect)((function(){var e=setTimeout((function(){l.current&&o(l.current.getBoundingClientRect().height)}),250);return function(){return clearTimeout(e)}}),[l,e.tournamentDict,s,o]),r.a.createElement("div",{className:ga.a.sidebar},r.a.createElement("div",{className:[ga.a.profile].join(" ")},r.a.createElement("div",{className:"topBanner"},"Load Tournament"),r.a.createElement("div",{className:["scrollable",ga.a.scrollable].join(" ")},r.a.createElement("div",{className:ga.a.listWrapper,style:{height:i}},r.a.createElement("div",{ref:l,className:ga.a.listing},s(e.tournamentDict))))))}function ja(e){var t=Object(a.useState)(0),n=Object(c.a)(t,2),i=n[0],o=n[1],s=r.a.useRef();Object(a.useEffect)((function(){var e=setTimeout((function(){s.current&&o(s.current.getBoundingClientRect().height)}),250);return function(){return clearTimeout(e)}}),[s,o]);var l=Object(a.useCallback)((function(t,n){return D({url:"/profile/updateSetting",data:Object(he.a)({},t,n)}).then(e.updateUser)}),[e.updateUser]),u=Object(a.useMemo)((function(){return Object.entries(Aa).map((function(t,n){var a=Object(c.a)(t,2),i=a[0],o=a[1];if(!1===o.show)return null;var s=e.user[i]||o.defaultValue;if(o.value&&(s=o.value(e.user)),"number"===o.type&&(s=Number(s)),o.validate&&!o.validate(s,e.user))return null;var u=s;o.convert&&(u=o.convert(s));var m="undefined"!==typeof u?u.toString():"\u200b";return r.a.createElement("div",{className:Ne.a.row,key:["row",n].join(".")},r.a.createElement("div",{className:["fieldBox"].join(" ")},o.name+":"),o.editable?r.a.createElement(Ze,{handleSubmit:l,content:u,url:"/updateSetting",inputType:"text",onSubmitSuccess:e.updateTournamentSettings,classNames:{editableField:"fieldBox",input:ga.a.input},name:i,additionalInputProps:{},show:{submit:!0},useHandleSubmit:!0}):r.a.createElement("div",{style:{cursor:"link"===o.type?"copy":"default"},className:["fieldBox","licensed"===i?ga.a["license"+s.toString()]:""].join(" "),onClick:"link"!==o.type?null:function(){return navigator.clipboard.writeText(m)}},m))}))}),[e.user]);return r.a.createElement("div",{className:ga.a.sidebar},r.a.createElement("div",{className:ga.a.profile},r.a.createElement("div",{className:"topBanner"},"Settings"),r.a.createElement("div",{className:[ga.a.listWrapper,"scrollable"].join(" "),style:{height:i}},r.a.createElement("div",{ref:s,className:ga.a.listing},u))),r.a.createElement("div",{className:["bottomBanner",ga.a.bottomBanner].join(" ")},r.a.createElement("div",{onClick:e.closeListing,className:"button"},r.a.createElement(K.c,null))))}function Oa(e){var t,n=r.a.isValidElement(e.message)||"string"===typeof e.message?e.message:JSON.stringify(e.message,null,4)+"\n\nIf you're seeing this error, please report it to the developers.";return"loading"===e.type?r.a.createElement("div",{className:sa.a.shade,onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:sa.a.loading},r.a.createElement(K.r,null))):r.a.createElement("div",{className:sa.a.shade,onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:m()("container",sa.a.container,(t={},Object(he.a)(t,sa.a.tall,e.tall),Object(he.a)(t,sa.a.wide,e.wide),t))},r.a.createElement("div",{className:sa.a.alertBox},e.title?r.a.createElement("div",{className:sa.a.title},e.title):null,r.a.createElement("div",{className:[sa.a.textBox,"scrollable"].join(" ")},n),r.a.createElement("div",{className:sa.a.buttonRow},"action"===e.type?r.a.createElement("button",{className:[sa.a.OK,"button"].join(" "),autoFocus:!0,onClick:function(){e.close()}},r.a.createElement(fn.e,null)):"confirm"!==e.type?r.a.createElement("button",{className:[sa.a.OK,"button","error"===e.type?sa.a.ERROR:""].join(" "),onClick:e.close,autoFocus:!0},"OK"):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:[sa.a.NO,"button"].join(" "),autoFocus:!0,onClick:function(){e.reject&&e.reject(),e.close()}},r.a.createElement(fn.e,null)),r.a.createElement("button",{className:[sa.a.YES,"button"].join(" "),onClick:function(){e.resolve&&e.resolve(),e.close()}},r.a.createElement(fn.d,null)))))))}var ka=new(n(478).Parser);function _a(){return Na.apply(this,arguments)}function Na(){return(Na=Object(l.a)(s.a.mark((function e(){var t,n,a,r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca();case 2:return t=e.sent,n=wa(t.ListBucketResult.Contents),a=n.find((function(e){return"ubuntu"===e.Key[0].split("/")[0]})),r=n.find((function(e){return"windows"===e.Key[0].split("/")[0]})),i=n.find((function(e){return"mac"===e.Key[0].split("/")[0]})),o={windows:r,mac:i,ubuntu:a},e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e){var t=e.split("."),n=Object(c.a)(t,3),a=n[0],r=n[1],i=n[2];return a&&r&&i?1e4*Number(a)+100*Number(r)+Number(i):1}function wa(e){return e.sort((function(e,t){var n=e.Key[0].split("/"),a=Object(c.a)(n,2)[1];if(!a)return 1;var r=a.split("_"),i=Object(c.a)(r,2)[1];if(!i)return 1;var o=Sa(i),s=t.Key[0].split("/"),l=Object(c.a)(s,2)[1];if(!l)return-1;var u=l.split("_"),m=Object(c.a)(u,2)[1];return m?Sa(m)-o:-1}))}function Ca(){return Ja.apply(this,arguments)}function Ja(){return(Ja=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E()({url:"http://repo.scorchapp.co.uk.s3.amazonaws.com?list-type=2&ContinuationToken=Simpsons&Delimiter=\\n&EncodingType=url",headers:{}}).then((function(e){return e.data}));case 2:return t=e.sent,e.next=5,ka.parseStringPromise(t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xa=n(274);function Da(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(""),u=Object(c.a)(o,2),p=u[0],f=u[1],b=Pe("","mode"),g=Object(c.a)(b,2),A=g[0],v=g[1];Object(a.useEffect)((function(){window.setMode=v}),[v]);var h=Object(a.useReducer)((function(e,t){return t.stopLoading&&"loading"!==e.type?e:Object.assign({},e,{wide:!1,tall:!1},t)}),{message:"",title:"",type:""}),y=Object(c.a)(h,2),E=y[0],j=y[1],O=Object(a.useCallback)((function(){return j({message:"",title:""})}),[j]),k=Object(a.useCallback)((function(e,t,n){return j({message:e,title:"CONFIRM ACTION",type:"confirm",resolve:t,reject:n})}),[j]),_=Object(a.useCallback)((function(e){return j({message:e,title:"ERROR",type:"error"})}),[j]),N=Object(a.useCallback)((function(e){f(e),v(e?"tournament":"menu")}),[f,v]),w=Object(a.useCallback)(function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.set("sessionID",t,{path:"/"});case 2:i(t),v("menu");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,v]),C=Object(a.useCallback)(Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(""),e.next=3,S.set("tournamentID","",{path:"/"});case 3:v("menu");case 4:case"end":return e.stop()}}),e)}))),[f,v]),J=Object(a.useCallback)(Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D({url:"/endSession"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.prev=8,e.next=11,S.set("sessionID","",{path:"/"});case 11:return document.cookie="sessionID=;",i(""),v("login"),e.finish(8);case 15:case"end":return e.stop()}}),e,null,[[0,5,8,15]])}))),[i,v]);Object(a.useEffect)((function(){return B((function(e,t){return j({title:r.a.createElement(r.a.Fragment,null,r.a.createElement(K.y,null),e),type:"error",message:"string"===typeof t?t.startsWith("<!DOCTYPE html>")?r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}):r.a.createElement(r.a.Fragment,null,t.split("\n").map((function(e,t){return r.a.createElement("p",{key:["e",t].join(".")},e)}))):JSON.stringify(t,null,4)})})),function(){return B((function(){}))}}),[_]);var R=Object(a.useCallback)(Object(l.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a();case 2:if(t=e.sent,n=Re()){e.next=6;break}return e.abrupt("return");case 6:if(!(Sa(a=t[n].Key[0].split("_")[1])<=Sa(xa.version))){e.next=9;break}return e.abrupt("return");case 9:j({type:"action",title:"Update available!",message:r.a.createElement(r.a.Fragment,null,"A new version of ",r.a.createElement("strong",null,"ScorchApp")," v",a," is available!",r.a.createElement("br",null),r.a.createElement(Ge,{className:m()("button"),to:"https://repo.scorchapp.co.uk/latest/".concat(n,".html")},"Download it here"))});case 10:case"end":return e.stop()}}),e)}))),[j]);Object(a.useEffect)((function(){d&&R()}),[R]);var I=Object(a.useCallback)(Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("sessionID");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:i(t),v("menu");case 7:case"end":return e.stop()}}),e)}))),[i,v]);Object(a.useEffect)((function(){I()}),[I]);var P=Pe({},"user"),T=Object(c.a)(P,2),M=T[0],F=T[1],L=Object(a.useCallback)((function(){return n?x({url:"/profile"}).then(F):null}),[F,n]);Object(a.useEffect)((function(){L()}),[L]);var H=Object(a.useState)({}),U=Object(c.a)(H,2),Q=U[0],G=U[1],Y=Object(a.useMemo)((function(){switch(A){case"login":return r.a.createElement(pe,{login:w,mode:"login"});case"menu":return r.a.createElement(ya,{endSession:J,setTournamentID:N,triggerConfirm:k,user:M,updateUser:L,setMode:v,setDefaultSettings:G});case"intro":return r.a.createElement(ua,{endSession:J,setTournamentID:N,setMode:v,defaultSettings:Q});case"tournament":return null;default:return v("login"),null}}),[M,L,A,w,n,J,N,k,p,C,_,v,Q]);return r.a.createElement(V,{values:[[z,{setAlert:j,closeAlert:O,startLoading:function(){return j({message:!0,type:"loading"})},stopLoading:function(){return j({message:"",type:"",stopLoading:!0})}}]]},r.a.createElement(ve,null),r.a.createElement("div",{className:"stage"},"tournament"===A?null:r.a.createElement("div",{className:["shade","blurred"].join(" ")},Y),r.a.createElement(fa,Object.assign({id:p},{closeTournament:C,triggerError:_,triggerConfirm:k,endSession:J,setTournamentID:N,setMode:v,checkForUpdates:R})),E.message&&("string"!==typeof E.message||E.message.length>10)?r.a.createElement(Oa,Object.assign({},E,{close:O})):null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(i.render)(r.a.createElement(Da,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},15:function(e,t,n){e.exports={body:"input_body__1b-ez",stage:"input_stage__2pwOH",table:"input_table__GZnpT",headerSection:"input_headerSection__2Ig4V",errors:"input_errors__2Tcf9",list:"input_list__3gHf3",error:"input_error__35vPN",pasteContainer:"input_pasteContainer__GiXDL",paste:"input_paste__2hyfv",subheader:"input_subheader__cNlLV",pasteArea:"input_pasteArea__1SDj2",form:"input_form__2v-ub",textarea:"input_textarea__1FWhO",output:"input_output__VuryB",submit:"input_submit__12haZ",reset:"input_reset__3CJ7t",clear:"input_clear__dg7Lv",playerTable:"input_playerTable__1E0SY",parsedHeader:"input_parsedHeader__3UNYl",tableHeader:"input_tableHeader__2R4Rf",dragEnter:"input_dragEnter__197KT",target:"input_target__GK4nW",placeholder:"input_placeholder__vx5TQ",errorCell:"input_errorCell__3yQ4_",highlighted:"input_highlighted__2WnFW",description:"input_description__1s735"}},16:function(e,t,n){e.exports={column:"login_column__14Kgt",container:"login_container__1w_9V",nameContainer:"login_nameContainer__1JJvi",name:"login_name__aoGQ4",description:"login_description__3kLJY",copyright:"login_copyright__-uz1N",initialiseButton:"login_initialiseButton__3CXrs",forgottenContainer:"login_forgottenContainer__2yR4y",forgotten:"login_forgotten__3VFQz",form:"login_form__1ieaR",input:"login_input__3ze1R",submit:"login_submit__2qxJT",back:"login_back__1oP5T",text:"login_text__WDlWF",loginSection:"login_loginSection__1BBMn",loginBackground:"login_loginBackground__y9UZ2",foreground:"login_foreground__2Cqo8",loginForeground:"login_loginForeground__lnGgY",registerForeground:"login_registerForeground__3D6jX",flip:"login_flip__2KG2q",hidden:"login_hidden__2PxIe",guest:"login_guest__Ns_RN",messageBar:"login_messageBar__6TM4O"}},166:function(e,t){e.exports="data:image/jpeg;base64,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"},17:function(e,t,n){e.exports={background:"tournament_background__3Lj72",tournament:"tournament_tournament__1ikhA",titleBar:"tournament_titleBar__1Kvez","slide-in-from-top":"tournament_slide-in-from-top__22vmU",stage:"tournament_stage__3sbve",row:"tournament_row__3K-Kn",header:"tournament_header__hB1Cf",editableField:"tournament_editableField__1rO3U",fixed:"tournament_fixed__3grCR",round:"tournament_round__1fpAn",pending:"tournament_pending__1YgoJ",active:"tournament_active__2SoF8",paused:"tournament_paused__8vcWP",finished:"tournament_finished__g5wUB",previous:"tournament_previous__BLUHu",next:"tournament_next__ty8U0",headerBar:"tournament_headerBar__3tdMl",expanded:"tournament_expanded__3gjYn",statusBar:"tournament_statusBar__1P6z0",form:"tournament_form__1Pn88",input:"tournament_input__xb1Th",button:"tournament_button__3FfYw",inactive:"tournament_inactive__1IuMF",searchButton:"tournament_searchButton__p7kV3",profile:"tournament_profile__1l3mu","slide-in-from-right":"tournament_slide-in-from-right__rOjOO",profileStage:"tournament_profileStage__3TswH"}},170:function(e,t,n){e.exports={blank:"inputs_blank__2jmg4",check:"inputs_check__3A60n",ban:"inputs_ban__3NkCY"}},20:function(e,t,n){e.exports={column:"menu_column__4oCn8",leftColumn:"menu_leftColumn__13Ey0",rightColumn:"menu_rightColumn__2D55A",container:"menu_container__4epvu","slide-in-from-left":"menu_slide-in-from-left__225li",profile:"menu_profile__3-O4-",line:"menu_line__2oByf",row:"menu_row__q-PZk",listWrapper:"menu_listWrapper__1_77c",clickButton:"menu_clickButton__1F_HI",dotContainer:"menu_dotContainer__ze3l6",dot:"menu_dot__3Dq9b",reverse:"menu_reverse__3czd3",dotDescription:"menu_dotDescription__19QYi",icon:"menu_icon__20xPO",dotContainerLoaded:"menu_dotContainerLoaded__3YmWC",descriptionSelected:"menu_descriptionSelected__2aKX-",close:"menu_close__3eKoV",sidebar:"menu_sidebar__l1_lg",logo:"menu_logo__3MwZ9","float-down":"menu_float-down__1GhiB",dotUnloaded:"menu_dotUnloaded__2DT-h",expand:"menu_expand__1E6M-",license1:"menu_license1__1o4qd",license2:"menu_license2__1N8w4",license3:"menu_license3__2EL0m",scrollable:"menu_scrollable__39r7X","briefly-expand":"menu_briefly-expand__ex-pm"}},23:function(e,t,n){e.exports={shade:"alert_shade__1O-5R",blurred:"alert_blurred__2W47o",container:"alert_container__2heSX",tall:"alert_tall__Wusvc",wide:"alert_wide__1Tt0o",alertBox:"alert_alertBox__-kpK4",title:"alert_title__W4aFN",error:"alert_error__wKYnQ",textBox:"alert_textBox__ATagI",response:"alert_response__1RX0q",buttonRow:"alert_buttonRow__1z51H",NO:"alert_NO__2Bl9f",OK:"alert_OK__1hQGN",ERROR:"alert_ERROR___uQVx",YES:"alert_YES__pKi26",loading:"alert_loading__37zfR",rotate:"alert_rotate__3F2E_"}},270:function(e,t){e.exports="data:image/png;base64,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"},271:function(e,t,n){e.exports=n.p+"static/media/favicon.2449069d.png"},272:function(e,t,n){e.exports=n.p+"static/media/loading_queen.61100770.png"},273:function(e,t,n){e.exports=n.p+"static/media/loading-crown.157aacb0.gif"},274:function(e){e.exports=JSON.parse('{"name":"ScorchApp","version":"1.7.0","description":"The only app for tournament pairings you\'ll ever need. Modern, lightweight, intuitive.","private":true,"homepage_gh":".","homepage":"./","dependencies":{"@welldone-software/why-did-you-render":"^4.2.6","axios":"^0.19.0","classnames":"^2.2.6","cookies":"^0.8.0","css-element-queries":"^1.2.3","ecf":"^1.0.11","electron-cookies":"github:heap/electron-cookies","electron-is-dev":"^1.1.0","express":"^4.17.1","fide-chess":"^0.1.9","html-to-react":"^1.4.2","lichess":"^2.0.10","papaparse":"^5.1.0","react":"^16.13.1","react-dom":"^16.13.1","react-icons":"^3.9.0","react-markdown":"^4.3.1","react-native-vector-icons":"^6.6.0","react-qr-code":"^1.0.2","react-router-dom":"^5.1.2","react-scripts":"3.4.1","tough-cookie":"^3.0.1","universal-cookie":"^4.0.2","xml2js":"^0.4.23"},"scripts":{"gui-prod":"electron . --production","gui":"electron .","start":"HOST=0.0.0.0 react-scripts start","win-start":"react-scripts start","seo":"react-snapshot","dev":"cd ../scorch-miranda; yarn build; yarn start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"yarn build","deploy":"gh-pages -d build -o beta","lint":"eslint src/**/*.ts src/**/*.tsx","pack":"electron-builder --dir","dist":"electron-builder --linux --win --mac"},"main":"gui.js","devDependencies":{"@types/classnames":"^2.2.10","@types/papaparse":"^5.0.3","@types/react":"^16.9.49","@types/react-dom":"^16.9.4","@types/react-router-dom":"^5.1.3","@types/tough-cookie":"^2.3.6","@types/universal-cookie":"^2.2.0","@types/xml2js":"^0.4.5","eco":"^1.1.0-rc-3","electron":"^7.2.1","electron-builder":"^22.5.1","electron-prebuilt":"^1.4.13","eslint":"^6.7.2","eslint-plugin-react":"^7.17.0","gh-pages":"^2.2.0","typescript":"^3.7.3","wine":"^0.9.13"},"repository":{"type":"git","url":"git+https://github.com/scorchchess/toastie-build.git"},"keywords":["chess","LAZY","swiss","pairing","tournament"],"author":"Aloysius Lip <aloysius.lip@chch.ox.ac.uk> (https://scorchapp.co.uk)","license":"MIT","bugs":{"url":"https://github.com/scorchchess/toastie-build/issues"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"build":{"appId":"co.uk.scorchapp.toastie","productName":"ScorchApp","copyright":"Copyright \xa9 2020 Aloysius Lip","icon":"public/favicon.ico","directories":{"output":"package"},"mac":{"icon":"public/images/favicon.png","publish":["github"],"target":"zip"},"win":{"target":"nsis","icon":"public/images/favicon.png","publish":["github"]},"linux":{"target":["deb","AppImage"],"executableName":"ScorchApp","icon":"./android-chrome-512x512.png","publish":["github"],"category":"Game","synopsis":"The only app for tournament pairings you\'ll ever need. Modern, lightweight, intuitive.","description":"Organising chess tournaments should be easy, intuitive, and individually tailored to you. Synced across desktop, web, and mobile, scorchchess offers everything to run chess tournament your way, providing the most effortless experience for yourself, your players, and your spectators."}}}')},299:function(e,t,n){e.exports=n.p+"static/media/chessCom.228db28e.svg"},30:function(e,t,n){e.exports={stage:"sort_stage__32jJR",description:"sort_description__DDBWU",col1:"sort_col1__-ynyz",col2:"sort_col2__9U2t_",col3:"sort_col3__2Afyx",row:"sort_row__31Q6V",title:"sort_title__3Cp_F",header:"sort_header__1qU6j",expanded:"sort_expanded__1zIdC",searchButton:"sort_searchButton__3t3w8",templates:"sort_templates__3RmWu",unrepresented:"sort_unrepresented__3l1vM",large:"sort_large__-G2LD",selected:"sort_selected__3lITO",clear:"sort_clear__3ndHS",listWrapper:"sort_listWrapper__2jzYH",list:"sort_list__X78Nr",player:"sort_player__PrjDw"}},300:function(e,t,n){e.exports=n.p+"static/media/lichess.9ff6e305.svg"},301:function(e,t,n){e.exports=n.p+"static/media/ecf.68e0df94.svg"},302:function(e,t,n){e.exports=n.p+"static/media/fide.03cb669d.svg"},303:function(e,t,n){e.exports=n.p+"static/media/robin.e157ce73.svg"},31:function(e,t,n){e.exports={stage:"knockout_stage__3_Nwn",columns:"knockout_columns__G4ps0",column:"knockout_column__3FzXJ",matchUp:"knockout_matchUp__1s3Dx",white:"knockout_white__1Uqd0",black:"knockout_black__3Xr8o",playerInfo:"knockout_playerInfo__1N2wU",winner:"knockout_winner__2sdFe",all:"knockout_all__1hHqo",connectors:"knockout_connectors__Vozd4",line:"knockout_line__2pe3t"}},4:function(e,t,n){e.exports={container:"components_container__1CCB7",editableField:"components_editableField__2fs18",form:"components_form__1RjIP",input:"components_input__I_Vv7",submitHidden:"components_submitHidden__PvrYt",any:"components_any__3pCEP",button:"components_button__1Gg6-",infinity:"components_infinity__1rF3u",reset:"components_reset__cTuFY",submit:"components_submit__1SFYQ",increment:"components_increment__19rbD",cancel:"components_cancel__1_2ia",resultsBridge:"components_resultsBridge__9qnay",details:"components_details__1FuFV",resolve:"components_resolve__1X_KN",reject:"components_reject__3ymMO",neutral:"components_neutral__392Xn","flash-green":"components_flash-green__2Wczz",linked:"components_linked__3nC4k",hasLinked:"components_hasLinked__1VvIE",setResult:"components_setResult__ToBDd",info:"components_info__RdPK8",inputURL:"components_inputURL__3WU4U",centre:"components_centre__2BcEl",detailsContent:"components_detailsContent__2yLbz",row:"components_row__1jpeO",linkRow:"components_linkRow__1DIVp",buttonRow:"components_buttonRow__AIy2p",topBanner:"components_topBanner__1k4Eb",validationTable:"components_validationTable__3Yxip",linkSubmit:"components_linkSubmit__TNip6",sectionContainer:"components_sectionContainer__1tg1I",sectionHeader:"components_sectionHeader__-UWwY",sectionHeaderText:"components_sectionHeaderText__1OTig",sectionListWrapper:"components_sectionListWrapper__a03uW",sectionList:"components_sectionList__117sb",expanded:"components_expanded__3qOxR",sectionToggle:"components_sectionToggle__2z6Il",tabSection:"components_tabSection__2c2yE",tab:"components_tab__3HWgq",alone:"components_alone__fx8kz",active:"components_active__1mG2n",alwaysVisible:"components_alwaysVisible__fSqQA",hasLink:"components_hasLink__19HOG",infoBox:"components_infoBox__31Uwk",searchBar:"components_searchBar__34BNl",searchResults:"components_searchResults__tX7x8"}},40:function(e,t,n){e.exports={canvas:"app_canvas__1MLEL",column:"app_column__2WVoo",logo:"app_logo__b6W_t",loadingLine:"app_loadingLine__1xeSs",staticLogo:"app_staticLogo__1-Wsi",loadingGif:"app_loadingGif__2PnUi",crownOutline:"app_crownOutline__2IPSS","fade-in":"app_fade-in__3kaKs","grow-right":"app_grow-right__1NUcX"}},46:function(e,t,n){e.exports={text:"name_text__3avpk",your:"name_your__1yIgS",expand:"name_expand__3_B7w",contract:"name_contract__cCuPp",slideLeft:"name_slideLeft__2DlrS","slide-left":"name_slide-left__3WNId",slideRight:"name_slideRight__sgw1v","slide-right":"name_slide-right__1Cg-k",fadeIn:"name_fadeIn__3CTca","fade-in":"name_fade-in__370St",fade2xIn:"name_fade2xIn__3A3xK"}},47:function(e,t,n){e.exports={dock:"dock_dock__2-6mz","slide-in-from-left":"dock_slide-in-from-left__LnSmo",stage:"dock_stage__jkkt8",column:"dock_column__1TLFS",button:"dock_button__2E4Pt",container:"dock_container__2lJ_b",active:"dock_active__26ORc",name:"dock_name__3nars",options:"dock_options__3ib8q",visible:"dock_visible__1Gsu6",optionsTitle:"dock_optionsTitle___Xl28",sort:"dock_sort__QH6Ad"}},480:function(e,t,n){e.exports=n(1100)},485:function(e,t,n){},487:function(e,t,n){},5:function(e,t,n){e.exports={profileContainer:"profile_profileContainer__V5hnJ",skel:"profile_skel__fZdvP",roundRow:"profile_roundRow__3OA2r",row:"profile_row__aUfgI",resultsRow:"profile_resultsRow__4zleX",toggleKey:"profile_toggleKey__1VyZa",desc:"profile_desc__cZcMt",li:"profile_li__1aGSj",help:"profile_help__2ocef",bonusRow:"profile_bonusRow__1sVIm",matchOnly:"profile_matchOnly__q_hNo",editable:"profile_editable__24Eas",editableField:"profile_editableField__2onPe",false:"profile_false__2sgus",true:"profile_true__2_Pld",input:"profile_input__2tu2X",sectionListWrapper:"profile_sectionListWrapper__1K1-l",sectionList:"profile_sectionList__3bJ8Z",expanded:"profile_expanded__3QtaO",sectionToggle:"profile_sectionToggle__2qBPk",semiPresent:"profile_semiPresent__1APEU",playerLine:"profile_playerLine__IVVus",cancel:"profile_cancel__AKFEe",profilePictureFrame:"profile_profilePictureFrame__3cF5B",profilePicture:"profile_profilePicture__d0y9A",infoSection:"profile_infoSection__1V7wB",close:"profile_close__1jnoP",closeButton:"profile_closeButton__3lSRr",name:"profile_name__bRkcf",scoreSection:"profile_scoreSection__3GgY5",tieBreaks:"profile_tieBreaks__101TV",divider:"profile_divider__2y1J3",tb:"profile_tb__2hp89",baseContainer:"profile_baseContainer__k1otM",description:"profile_description__U2kC4",descriptionDiv:"profile_descriptionDiv__1qv0R",bottomBanner:"profile_bottomBanner__b2MfX","slide-in-from-right":"profile_slide-in-from-right__2jdIT",fsStage:"profile_fsStage__2bN6-",fs:"profile_fs__18DGe"}},53:function(e,t,n){e.exports={stage:"core_stage__Wa7eX",short:"core_short__EG69G",titleContainer:"core_titleContainer__1y9dK",titleWrapper:"core_titleWrapper__2Ec1n",container:"core_container__1ak0c",titles:"core_titles__3TVw1"}},54:function(e,t,n){e.exports={stage:"announcements_stage__ytg8g",col1:"announcements_col1__1ernB",col2:"announcements_col2__2Ikrd",editingArea:"announcements_editingArea__1Jgpe",textarea:"announcements_textarea__3jf0L",preview:"announcements_preview__1Bqru",previewWrapper:"announcements_previewWrapper__nQIwu",buttons:"announcements_buttons__1hFWn",submit:"announcements_submit__2wmTb",reset:"announcements_reset__QjNmB",clear:"announcements_clear__1UpCl"}},55:function(e,t,n){e.exports={container:"intro_container__1InVN","centre-split":"intro_centre-split__en0Qz",section:"intro_section__1sHwR",content:"intro_content__1rnrZ",templates:"intro_templates__3Vo7N",set:"intro_set__WLAB1",collapsed:"intro_collapsed__3VkzO",divider:"intro_divider__3Qwx9",angle:"intro_angle__o5cLk",rotated:"intro_rotated__2Gz2p"}},60:function(e){e.exports=JSON.parse('{"AFG":"Afghanistan","ALA":"Aland Islands","ALB":"Albania","ALG":"Algeria","ASM":"American Samoa","AND":"Andorra","ANG":"Angola","AIA":"Anguilla","ATA":"Antarctica","ATG":"Antigua and Barbuda","ARG":"Argentina","ARM":"Armenia","ABW":"Aruba","AUS":"Australia","AUT":"Austria","AZE":"Azerbaijan","BAR":"Bahamas","BHR":"Bahrain","BAN":"Bangladesh","BRB":"Barbados","BLR":"Belarus","BEL":"Belgium","BLZ":"Belize","BEN":"Benin","BER":"Bermuda","BTN":"Bhutan","BOL":"Bolivia","BIH":"Bosnia and Herzegovina","BWA":"Botswana","BVT":"Bouvet Island","BRA":"Brazil","VGB":"British Virgin Islands","IOT":"British Indian Ocean Territory","BRN":"Brunei Darussalam","BUL":"Bulgaria","BFA":"Burkina Faso","BDI":"Burundi","KHM":"Cambodia","CMR":"Cameroon","CAN":"Canada","CPV":"Cape Verde","CYM":"Cayman Islands","CAF":"Central African Republic","TCD":"Chad","CHI":"Chile","CHN":"China","HKG":"Hong Kong","MAC":"Macao","CXR":"Christmas Island","CCK":"Cocos (Keeling) Islands","COL":"Colombia","COM":"Comoros","COG":"Congo (Brazzaville)","COD":"Congo, (Kinshasa)","COK":"Cook Islands","CRI":"Costa Rica","CIV":"C\xf4te d\'Ivoire","HRV":"Croatia","CUB":"Cuba","CYP":"Cyprus","CZE":"Czech Republic","DNK":"Denmark","DJI":"Djibouti","DMA":"Dominica","DOM":"Dominican Republic","ECU":"Ecuador","EGY":"Egypt","SLV":"El Salvador","GNQ":"Equatorial Guinea","ERI":"Eritrea","EST":"Estonia","ETH":"Ethiopia","FLK":"Falkland Islands (Malvinas)","FAI":"Faroe Islands","FJI":"Fiji","FIN":"Finland","FRA":"France","GUF":"French Guiana","PYF":"French Polynesia","ATF":"French Southern Territories","GAB":"Gabon","GBR":"United Kingdom","GMB":"Gambia","GEO":"Georgia","GER":"Germany","GHA":"Ghana","GIB":"Gibraltar","GRE":"Greece","GRL":"Greenland","GRD":"Grenada","GLP":"Guadeloupe","GUM":"Guam","GTM":"Guatemala","GGY":"Guernsey","GIN":"Guinea","GNB":"Guinea-Bissau","GUY":"Guyana","HTI":"Haiti","HMD":"Heard and Mcdonald Islands","VAT":"Holy See (Vatican City State)","HND":"Honduras","HUN":"Hungary","ISL":"Iceland","IND":"India","IDN":"Indonesia","IRN":"Iran, Islamic Republic of","IRQ":"Iraq","IRL":"Ireland","IMN":"Isle of Man","ISR":"Israel","ITA":"Italy","JAM":"Jamaica","JPN":"Japan","JEY":"Jersey","JOR":"Jordan","KAZ":"Kazakhstan","KEN":"Kenya","KIR":"Kiribati","PRK":"Korea (North)","KOR":"Korea (South)","KWT":"Kuwait","KGZ":"Kyrgyzstan","LAO":"Lao PDR","LVA":"Latvia","LBN":"Lebanon","LSO":"Lesotho","LBR":"Liberia","LBY":"Libya","LIE":"Liechtenstein","LTU":"Lithuania","LUX":"Luxembourg","MKD":"Macedonia, Republic of","MDG":"Madagascar","MWI":"Malawi","MAS":"Malaysia","MDV":"Maldives","MLI":"Mali","MLT":"Malta","MHL":"Marshall Islands","MTQ":"Martinique","MRT":"Mauritania","MUS":"Mauritius","MYT":"Mayotte","MEX":"Mexico","FSM":"Micronesia, Federated States of","MDA":"Moldova","MCO":"Monaco","MNG":"Mongolia","MNE":"Montenegro","MSR":"Montserrat","MAR":"Morocco","MOZ":"Mozambique","MMR":"Myanmar","NAM":"Namibia","NRU":"Nauru","NPL":"Nepal","NLD":"Netherlands","ANT":"Netherlands Antilles","NCL":"New Caledonia","NZL":"New Zealand","NIC":"Nicaragua","NER":"Niger","NGA":"Nigeria","NIU":"Niue","NFK":"Norfolk Island","MNP":"Northern Mariana Islands","NOR":"Norway","OMN":"Oman","PAK":"Pakistan","PLW":"Palau","PSE":"Palestinian Territory","PAN":"Panama","PNG":"Papua New Guinea","PRY":"Paraguay","PER":"Peru","PHI":"Philippines","PCN":"Pitcairn","POL":"Poland","POR":"Portugal","PRI":"Puerto Rico","QAT":"Qatar","REU":"R\xe9union","ROU":"Romania","RUS":"Russian Federation","RWA":"Rwanda","BLM":"Saint-Barth\xe9lemy","SHN":"Saint Helena","KNA":"Saint Kitts and Nevis","LCA":"Saint Lucia","MAF":"Saint-Martin (French part)","SPM":"Saint Pierre and Miquelon","VCT":"Saint Vincent and Grenadines","WSM":"Samoa","SMR":"San Marino","STP":"Sao Tome and Principe","SAU":"Saudi Arabia","SEN":"Senegal","SRB":"Serbia","SYC":"Seychelles","SLE":"Sierra Leone","SGP":"Singapore","SVK":"Slovakia","SLO":"Slovenia","SLB":"Solomon Islands","SOM":"Somalia","RSA":"South Africa","SGS":"South Georgia and the South Sandwich Islands","SSD":"South Sudan","ESP":"Spain","LKA":"Sri Lanka","SDN":"Sudan","SUR":"Suriname","SJM":"Svalbard and Jan Mayen Islands","SWZ":"Swaziland","SWE":"Sweden","CHE":"Switzerland","SYR":"Syrian Arab Republic (Syria)","TWN":"Taiwan, Republic of China","TJK":"Tajikistan","TZA":"Tanzania, United Republic of","THA":"Thailand","TLS":"Timor-Leste","TGO":"Togo","TKL":"Tokelau","TON":"Tonga","TTO":"Trinidad and Tobago","TUN":"Tunisia","TUR":"Turkey","TKM":"Turkmenistan","TCA":"Turks and Caicos Islands","TUV":"Tuvalu","UGA":"Uganda","UKR":"Ukraine","ARE":"United Arab Emirates","ENG":"England","SCO":"Scotland","WLS":"Wales","USA":"United States of America","UMI":"US Minor Outlying Islands","URY":"Uruguay","UZB":"Uzbekistan","VUT":"Vanuatu","VEN":"Venezuela (Bolivarian Republic)","VNM":"Viet Nam","VIR":"Virgin Islands, US","WLF":"Wallis and Futuna Islands","ESH":"Western Sahara","YEM":"Yemen","ZAM":"Zambia","ZIM":"Zimbabwe"}')},61:function(e,t,n){e.exports={spacer:"draggable_spacer__3RZCV","fade-in":"draggable_fade-in__18Frg",highlighted:"draggable_highlighted__MQkbn",listElement:"draggable_listElement__h1q4X",columns:"draggable_columns__2tdtx",buttonContainer:"draggable_buttonContainer__1RgHU",number:"draggable_number__2D2V0",ignored:"draggable_ignored__33WO4",tbReset:"draggable_tbReset__Q1n8C",tbSubmit:"draggable_tbSubmit__2qF0F"}},623:function(e,t){},65:function(e,t,n){e.exports={wrapper:"crosstable_wrapper__JHCOc",table:"crosstable_table__3zvgj",td:"crosstable_td__1sGEm",th:"crosstable_th__10uL3",cell:"crosstable_cell__1MJn3",blank:"crosstable_blank__3PQt4",player:"crosstable_player__2j1uI",edit:"crosstable_edit__1bPyk",headerCell:"crosstable_headerCell__3uT06",firstColumn:"crosstable_firstColumn__pA3Ha",closeButton:"crosstable_closeButton__21AWF",container:"crosstable_container__3OxZH",submit:"crosstable_submit__3hLUD",scrollbar:"crosstable_scrollbar__2K4Bx",track:"crosstable_track__1kz8g"}},655:function(e,t){},657:function(e,t){},687:function(e,t){},688:function(e,t){},72:function(e,t,n){e.exports={stage:"export_stage__63y6S",columns:"export_columns__16Si0",column:"export_column__3Laqg"}},732:function(e,t){},734:function(e,t){},756:function(e,t){},8:function(e,t,n){e.exports={sidebar:"sidebar_sidebar__3Z89I","slide-in-from-left":"sidebar_slide-in-from-left__3kaGk",players:"sidebar_players__3X4vY",newPlayers:"sidebar_newPlayers__2MILk",stage:"sidebar_stage__14IEV",playersSection:"sidebar_playersSection__3_kKf",skel:"sidebar_skel__1_Yn-",infoBox:"sidebar_infoBox__1Oh8P",scoreSection:"sidebar_scoreSection__2Qh1c",playerLine:"sidebar_playerLine__1cnKs","slide-down":"sidebar_slide-down__apR1e",addPlayerForm:"sidebar_addPlayerForm__1BL-S",input:"sidebar_input__3Y8ld",cancel:"sidebar_cancel__1DhJL",edit:"sidebar_edit__zaTlg",activate:"sidebar_activate__2-tDL",submit:"sidebar_submit__22Uk4",info:"sidebar_info__2QcrS",null:"sidebar_null__39tIA",playerInfo:"sidebar_playerInfo__12dBq",team:"sidebar_team__3Gw6e",scoreSeparator:"sidebar_scoreSeparator__1zbAQ",sectionHeader:"sidebar_sectionHeader__2UjkE",playerInactive:"sidebar_playerInactive__1Y9Kw",topBanner:"sidebar_topBanner__3fw_E",bottomBanner:"sidebar_bottomBanner__ZFfBX",striped:"sidebar_striped__dRdNU",searchResults:"sidebar_searchResults__3jJ2m"}},864:function(e,t){},87:function(e){e.exports=JSON.parse('{"server":"http://localhost:8080/","prodServer":"https://api.scorchapp.co.uk/","resultsServer":"http://localhost:3001/","prodResultsServer":"https://results.scorchapp.co.uk/","useProd":false}')},88:function(e,t,n){e.exports={statusBar:"statusbar_statusBar__3f7HO",favicon:"statusbar_favicon__1Unmh",menu:"statusbar_menu__3nFvT",title:"statusbar_title__3ClL5",exec:"statusbar_exec__2fXB2",close:"statusbar_close__3ssky"}},9:function(e,t,n){e.exports={pairings:"pairings_pairings__2Z6gd","fade-in":"pairings_fade-in__3Iydy",switch:"pairings_switch__2g0NT",stage:"pairings_stage__2dyTl",knockoutWrapper:"pairings_knockoutWrapper__1CbUP",pool:"pairings_pool__1OJZP",pairingContainer:"pairings_pairingContainer__2snrJ",pairing:"pairings_pairing__jh3eo","set-blue-background":"pairings_set-blue-background__3X4MM",playerInfo:"pairings_playerInfo__2BGOf",inputResult:"pairings_inputResult__8kpK5",titleContainer:"pairings_titleContainer__3xYF4",topBanner:"pairings_topBanner__duKX4",statusBarBackground:"pairings_statusBarBackground__3c8y3",statusBar:"pairings_statusBar__Y2g9v","slide-in-from-bottom":"pairings_slide-in-from-bottom__1tu-V",switchStatusBar:"pairings_switchStatusBar__1L_Ga",waitButton:"pairings_waitButton__3CIsd",finishButton:"pairings_finishButton__elOep",nextButton:"pairings_nextButton__1fjha",undoButton:"pairings_undoButton__1u_Y2",rotate:"pairings_rotate__rWtYA",submit:"pairings_submit__258vX",pairingAddButton:"pairings_pairingAddButton__1UJs-",clearFiltered:"pairings_clearFiltered__27eNo",manualPairing:"pairings_manualPairing__aqFws",manualResultsBridge:"pairings_manualResultsBridge__2HXJc",scoreSpacer:"pairings_scoreSpacer__1wULz",centre:"pairings_centre__2s7rb",knockout:"pairings_knockout__2WbQk"}},99:function(e,t,n){e.exports={container:"dropdown_container__3Irea",header:"dropdown_header__1bzxL",sent:"dropdown_sent__129Rn",wrapper:"dropdown_wrapper__2ihat",list:"dropdown_list__3-k52"}}},[[480,1,2]]]);
//# sourceMappingURL=main.111f248b.chunk.js.map